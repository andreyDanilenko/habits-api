# ๐ ะะะะะะฏ ะจะะะะะะะะ ะะ SQL

## ๐ฏ ะะะะฏะะะ ะะซะะะะะะะะฏ SQL-ะะะะะะกะ

**โ ะะะ ะะซ ะะะจะะ (ะฟะพััะดะพะบ ะบะพะผะฐะฝะด):**
```sql
SELECT [DISTINCT | ALL] /* ะฟะพะปั ัะฐะฑะปะธั */
FROM /* ะธะท ะบะฐะบะธั ัะฐะฑะปะธั */
WHERE /* ััะปะพะฒะธะต ะฝะฐ ะพะณัะฐะฝะธัะตะฝะธะต ัััะพะบ */
GROUP BY /* ััะปะพะฒะธะต ะณััะฟะฟะธัะพะฒะบะธ */
HAVING /* ััะปะพะฒะธะต ะฝะฐ ะพะณัะฐะฝะธัะตะฝะธะต ัััะพะบ ะฟะพัะปะต ะณััะฟะฟะธัะพะฒะบะธ */
ORDER BY /* ะฟะพััะดะพะบ ัะพััะธัะพะฒะบะธ */ [ASC | DESC]
LIMIT /* ะพะณัะฐะฝะธัะตะฝะธะต ะบะพะป-ะฒะพ ะทะฐะฟะธัะตะน */
```

**โ ะะะ ะกะะะะะ ะะฃะะะะข (ะฟะพััะดะพะบ ะฒัะฟะพะปะฝะตะฝะธั):**
```
1. FROM / JOIN           โ ะฒัะฑะพั ัะฐะฑะปะธั ะธ ัะพะตะดะธะฝะตะฝะธะต
2. WHERE                 โ ัะธะปัััะฐัะธั ัััะพะบ
3. GROUP BY              โ ะณััะฟะฟะธัะพะฒะบะฐ
4. HAVING                โ ัะธะปัััะฐัะธั ะณััะฟะฟ
5. SELECT                โ ะฒััะธัะปะตะฝะธะต ะฒััะฐะถะตะฝะธะน
6. ORDER BY              โ ัะพััะธัะพะฒะบะฐ
7. LIMIT / OFFSET        โ ะพะณัะฐะฝะธัะตะฝะธะต ะบะพะปะธัะตััะฒะฐ
```

---

## ๐ค ะะกะะะะะซะ ะะะะะะะซ ะ ะะะฎะงะะะซะ ะกะะะะ

| ะะพะผะฐะฝะดะฐ | ะะฟะธัะฐะฝะธะต | ะัะธะผะตั |
|--------|---------|--------|
| **SELECT** | ะฟัะธะบะฐะท ะกะฃะะ ะฒัะฑัะฐัั ััะพ-ัะพ | `SELECT * FROM book;` |
| **AS** | "ะฒ ะบะฐัะตััะฒะต", ะฟัะตะฒะดะพะฝะธะผ | `SELECT title AS ะะฐะทะฒะฐะฝะธะต FROM book;` |
| **DISTINCT** | ัะฝะธะบะฐะปัะฝัะต ะทะฝะฐัะตะฝะธั | `SELECT DISTINCT author FROM book;` |
| **FROM** | ะธะท ะบะฐะบะธั ัะฐะฑะปะธั | `FROM book JOIN author` |
| **WHERE** | ััะปะพะฒะธะต ะฝะฐ ะพะณัะฐะฝะธัะตะฝะธะต ัััะพะบ | `WHERE price > 500` |
| **GROUP BY** | ะณััะฟะฟะธัะพะฒะบะฐ ะดะฐะฝะฝัั | `GROUP BY author` |
| **HAVING** | ัะธะปััั ะฟะพัะปะต ะณััะฟะฟะธัะพะฒะบะธ | `HAVING SUM(price) > 1000` |
| **ORDER BY** | ัะพััะธัะพะฒะบะฐ | `ORDER BY price DESC` |
| **LIMIT** | ะพะณัะฐะฝะธัะตะฝะธะต ะบะพะปะธัะตััะฒะฐ ัััะพะบ | `LIMIT 10` |
| **JOIN** | ะฟัะธัะพะตะดะธะฝะธัั ัะฐะฑะปะธัั | `book JOIN author ON book.author_id = author.id` |
| **UNION** | ัะปะธัะฝะธะต ัะฐะฑะปะธั (ะฒะตััะธะบะฐะปัะฝะพ) | `SELECT title FROM book1 UNION SELECT title FROM book2` |
| **UNION ALL** | ัะปะธัะฝะธะต ั ะดัะฑะปะธะบะฐัะฐะผะธ | `... UNION ALL ...` |
| **INTERSECT** | ะฟะตัะตัะตัะตะฝะธะต ะผะฝะพะถะตััะฒ | `... INTERSECT ...` |
| **EXCEPT** | ัะฐะทะฝะพััั ะผะฝะพะถะตััะฒ | `... EXCEPT ...` |
| **UPDATE** | ะธะทะผะตะฝะตะฝะธะต ะทะฐะฟะธัะตะน | `UPDATE book SET price = price * 1.1` |
| **DELETE** | ัะดะฐะปะตะฝะธะต ะทะฐะฟะธัะตะน | `DELETE FROM book WHERE amount = 0` |
| **INSERT** | ะทะฐะฝะตััะธ ะฝะพะฒัะต ะทะฐะฟะธัะธ | `INSERT INTO book(title, author) VALUES ('ะะดะธะพั', 'ะะพััะพะตะฒัะบะธะน ะค.ะ.')` |
| **CREATE** | ัะพะทะดะฐัั ัะฐะฑะปะธัั/ะธะฝะดะตะบั/ะฒัั | `CREATE TABLE author (id INT PRIMARY KEY)` |
| **ALTER** | ะธะทะผะตะฝะธัั ัะฐะฑะปะธัั | `ALTER TABLE book ADD COLUMN pages INT` |
| **DROP** | ัะดะฐะปะธัั ัะฐะฑะปะธัั | `DROP TABLE IF EXISTS temp` |
| **SET** | ัััะฐะฝะพะฒะธัั ะทะฝะฐัะตะฝะธะต | `SET price = 0.7 * price` |
| **VALUES** | ะทะฝะฐัะตะฝะธั ะดะปั INSERT | `VALUES (1, 'ะัะปะณะฐะบะพะฒ')` |
| **PRIMARY KEY** | ะฟะตัะฒะธัะฝัะน ะบะปัั | `id INT PRIMARY KEY` |
| **FOREIGN KEY** | ะฒะฝะตัะฝะธะน ะบะปัั | `FOREIGN KEY (author_id) REFERENCES author(id)` |
| **AUTO_INCREMENT** | ะฐะฒัะพะธะฝะบัะตะผะตะฝั | `id INT PRIMARY KEY AUTO_INCREMENT` |

---

## ๐ญ ะฃะกะะะะะซะ ะะะะกะขะะฃะะฆะะ

### IF() โ ััะฝะบัะธั
```sql
IF(ะปะพะณะธัะตัะบะพะต_ะฒััะฐะถะตะฝะธะต, ะฒััะฐะถะตะฝะธะต_1, ะฒััะฐะถะตะฝะธะต_2)
-- ะัะต ััะธ ะฟะฐัะฐะผะตััะฐ ะพะฑัะทะฐัะตะปัะฝั

SELECT 
    title, 
    amount, 
    price, 
    IF(amount < 4, price * 0.5, price * 0.7) AS sale
FROM book;

-- ะะปะพะถะตะฝะฝัะต IF
SELECT 
    author,
    title,
    IF(author = "ะัะปะณะฐะบะพะฒ ะ.ะ.", price * 1.1,
        IF(author = "ะัะตะฝะธะฝ ะก.ะ.", price * 1.05, price * 1)
    ) AS new_price
FROM book;
```

### CASE โ ัะฝะธะฒะตััะฐะปัะฝะฐั ะบะพะฝััััะบัะธั
```sql
-- ะคะพัะผะฐั 1: ะฟะพะธัะบ ะฟะพ ะทะฝะฐัะตะฝะธั
CASE ะทะฝะฐัะตะฝะธะต
    WHEN ััะฐะฒะฝะธะฒะฐะตะผะพะต_ะทะฝะฐัะตะฝะธะต_1 THEN ะฒะพะทะฒัะฐัะฐะตะผะพะต_ะทะฝะฐัะตะฝะธะต_1
    WHEN ััะฐะฒะฝะธะฒะฐะตะผะพะต_ะทะฝะฐัะตะฝะธะต_2 THEN ะฒะพะทะฒัะฐัะฐะตะผะพะต_ะทะฝะฐัะตะฝะธะต_2
    WHEN ััะฐะฒะฝะธะฒะฐะตะผะพะต_ะทะฝะฐัะตะฝะธะต_n THEN ะฒะพะทะฒัะฐัะฐะตะผะพะต_ะทะฝะฐัะตะฝะธะต_n
    [ELSE ะฒะพะทะฒัะฐัะฐะตะผะพะต_ะทะฝะฐัะตะฝะธะต_ะฟะพ_ัะผะพะปัะฐะฝะธั]
END

-- ะคะพัะผะฐั 2: ะฟะพะธัะบ ะฟะพ ััะปะพะฒะธัะผ
CASE
    WHEN ััะปะพะฒะธะต_1 THEN ัะตะทัะปััะฐั_1
    WHEN ััะปะพะฒะธะต_2 THEN ัะตะทัะปััะฐั_2
    ELSE ัะตะทัะปััะฐั_ะฟะพ_ัะผะพะปัะฐะฝะธั
END

-- ะัะธะผะตั 1: ะฟะพะฒััะตะฝะธะต ัะตะฝั ะฒ ะทะฐะฒะธัะธะผะพััะธ ะพั ะฐะฒัะพัะฐ
SELECT 
    author,
    title,
    CASE author
        WHEN "ะัะปะณะฐะบะพะฒ ะ.ะ." THEN price * 1.1
        WHEN "ะัะตะฝะธะฝ ะก.ะ." THEN price * 1.05
        ELSE price
    END AS new_price
FROM book;

-- ะัะธะผะตั 2: ะบะฐัะตะณะพัะธะทะฐัะธั ะฟะพ ัะตะฝะต
SELECT 
    title,
    price,
    CASE 
        WHEN price < 300 THEN 'ะะตัะตะฒะฐั'
        WHEN price BETWEEN 300 AND 600 THEN 'ะกัะตะดะฝัั'
        WHEN price > 600 THEN 'ะะพัะพะณะฐั'
        ELSE 'ะะต ะพะฟัะตะดะตะปะตะฝะฐ'
    END AS category
FROM book;

-- ะัะธะผะตั 3: CASE ะฒ WHERE
SELECT *
FROM patients
WHERE TRUE
    AND 1 = (CASE 
                WHEN allergies = 'Penicillin' AND city = 'Burlington' 
                THEN 1 
                ELSE 0 
             END);
```

### COALESCE() โ ะฟะตัะฒัะน ะฝะต-NULL
```sql
COALESCE(x, y, z, ...)  -- ะฒะพะทะฒัะฐัะฐะตั ะฟะตัะฒัะน ะฐัะณัะผะตะฝั, ะบะพัะพััะน ะฝะต NULL

SELECT COALESCE(NULL, NULL, 1, 2, NULL, 3)  -- 1
SELECT COALESCE(phone, email, 'ะฝะตั ะบะพะฝัะฐะบัะพะฒ') FROM users;
```

### IFNULL() / ISNULL() โ ะทะฐะผะตะฝะฐ NULL
```sql
IFNULL(ะฒััะฐะถะตะฝะธะต, ัะตะทัะปััะฐั)      -- MySQL, SQLite
ISNULL(ะฒััะฐะถะตะฝะธะต, ัะตะทัะปััะฐั)      -- MS SQL Server

SELECT name_author, IFNULL(SUM(amount), 0) AS total_books
FROM author LEFT JOIN book ON author.author_id = book.author_id
GROUP BY name_author;
```

---

## ๐ ะะะะะะขะะะซ ะคะะะฌะขะะะฆะะ WHERE

| ะะฟะตัะฐัะพั | ะะฟะธัะฐะฝะธะต | ะัะธะผะตั |
|---------|---------|--------|
| **=** | ัะฐะฒะฝะพ | `WHERE author = 'ะัะปะณะฐะบะพะฒ ะ.ะ.'` |
| **!=, <>** | ะฝะต ัะฐะฒะฝะพ | `WHERE price != 500` |
| **>** | ะฑะพะปััะต | `WHERE price > 500` |
| **<** | ะผะตะฝััะต | `WHERE price < 500` |
| **>=** | ะฑะพะปััะต ะธะปะธ ัะฐะฒะฝะพ | `WHERE price >= 500` |
| **<=** | ะผะตะฝััะต ะธะปะธ ัะฐะฒะฝะพ | `WHERE price <= 500` |
| **AND (&&)** | ะปะพะณะธัะตัะบะพะต ะ | `WHERE price > 500 AND amount < 10` |
| **OR (||)** | ะปะพะณะธัะตัะบะพะต ะะะ | `WHERE author = 'ะัะปะณะฐะบะพะฒ' OR author = 'ะัะตะฝะธะฝ'` |
| **NOT** | ะปะพะณะธัะตัะบะพะต ะะ | `WHERE NOT author = 'ะัะปะณะฐะบะพะฒ'` |
| **BETWEEN** | ะฒ ะดะธะฐะฟะฐะทะพะฝะต (ะฒะบะปััะฐั ะณัะฐะฝะธัั) | `WHERE price BETWEEN 500 AND 700` |
| **IN** | ะฒ ัะฟะธัะบะต | `WHERE amount IN (2, 3, 5, 7)` |
| **NOT IN** | ะฝะต ะฒ ัะฟะธัะบะต | `WHERE amount NOT IN (0, 1)` |
| **LIKE** | ะฟะพ ัะฐะฑะปะพะฝั | `WHERE title LIKE '%ะฒะพะนะฝะฐ%'` |
| **NOT LIKE** | ะฝะต ัะพะพัะฒะตัััะฒัะตั ัะฐะฑะปะพะฝั | `WHERE title NOT LIKE '% %'` |
| **IS NULL** | ัะฐะฒะฝะพ NULL | `WHERE author IS NULL` |
| **IS NOT NULL** | ะฝะต ัะฐะฒะฝะพ NULL | `WHERE author IS NOT NULL` |
| **EXISTS** | ัััะตััะฒัะตั ะฟะพะดะทะฐะฟัะพั | `WHERE EXISTS (SELECT 1 FROM book WHERE author_id = a.id)` |
| **ANY / SOME** | ะปัะฑะพะน ะธะท | `WHERE price > ANY (SELECT price FROM book WHERE author = 'ะัะปะณะฐะบะพะฒ')` |
| **ALL** | ะฒัะต ะธะท | `WHERE price > ALL (SELECT price FROM book WHERE author = 'ะัะปะณะฐะบะพะฒ')` |

### LIKE โ ัะฐะฑะปะพะฝั ะฟะพะธัะบะฐ
```
'%a'      - ะพะบะฐะฝัะธะฒะฐะตััั ะฝะฐ 'a'
'a%'      - ะฝะฐัะธะฝะฐะตััั ั 'a'
'%abc%'   - ัะพะดะตัะถะธั 'abc'
'a_'      - 'a' ะธ ัะพะฒะฝะพ 1 ะปัะฑะพะน ัะธะผะฒะพะป
'a__'     - 'a' ะธ ัะพะฒะฝะพ 2 ะปัะฑัั ัะธะผะฒะพะปะฐ
'a%b'     - ะฝะฐัะธะฝะฐะตััั ะฝะฐ 'a', ะทะฐะบะฐะฝัะธะฒะฐะตััั ะฝะฐ 'b'
'_% _%'   - ะผะธะฝะธะผัะผ 2 ัะปะพะฒะฐ (ะฟัะพะฑะตะป ะฒะฝัััะธ, ะดะพ ะธ ะฟะพัะปะต ะผะธะฝะธะผัะผ 1 ัะธะผะฒะพะป)
'% % %'   - ัะพะดะตัะถะธั 2 ะฟัะพะฑะตะปะฐ (3 ัะปะพะฒะฐ)
'[ะฐ-ั]%'  - ะฝะฐัะธะฝะฐะตััั ั ััััะบะพะน ะฑัะบะฒั
'[^0-9]%' - ะฝะต ะฝะฐัะธะฝะฐะตััั ั ัะธััั
```

### REGEXP โ ัะตะณัะปััะฝัะต ะฒััะฐะถะตะฝะธั
```sql
-- ะคัะฝะบัะธั REGEXP ะฒะพะทะฒัะฐัะฐะตั TRUE, ะตัะปะธ ัััะพะบะฐ ัะพะพัะฒะตัััะฒัะตั ัะตะณัะปััะฝะพะผั ะฒััะฐะถะตะฝะธั
WHERE ProductName REGEXP 'Phone'              -- ัะพะดะตัะถะธั "Phone"
WHERE ProductName REGEXP '^Phone'             -- ะฝะฐัะธะฝะฐะตััั ั "Phone"
WHERE ProductName REGEXP 'Phone$'             -- ะทะฐะบะฐะฝัะธะฒะฐะตััั ะฝะฐ "Phone"
WHERE ProductName REGEXP 'iPhone [78]'        -- iPhone 7 ะธะปะธ iPhone 8
WHERE ProductName REGEXP 'iPhone [6-8]'       -- iPhone 6,7,8
WHERE ProductName REGEXP 'Phone|Galaxy'       -- ัะพะดะตัะถะธั Phone ะธะปะธ Galaxy
WHERE name_genre REGEXP '[[:<:]]ัะพะผะฐะฝ[[:>:]]' -- ัะปะพะฒะพ "ัะพะผะฐะฝ" ัะตะปะธะบะพะผ
```

---

## ๐ ะะะะะะะขะะซะ ะคะฃะะะฆะะ

| ะคัะฝะบัะธั | ะะฟะธัะฐะฝะธะต | ะัะธะผะตั |
|--------|---------|--------|
| **COUNT(*)** | ะบะพะปะธัะตััะฒะพ ัััะพะบ | `SELECT COUNT(*) FROM book;` |
| **COUNT(column)** | ะบะพะปะธัะตััะฒะพ ะฝะต-NULL ะทะฝะฐัะตะฝะธะน | `SELECT COUNT(author) FROM book;` |
| **COUNT(DISTINCT column)** | ะบะพะปะธัะตััะฒะพ ัะฝะธะบะฐะปัะฝัั | `SELECT COUNT(DISTINCT author) FROM book;` |
| **SUM(column)** | ััะผะผะฐ | `SELECT SUM(price * amount) FROM book;` |
| **AVG(column)** | ััะตะดะฝะตะต | `SELECT AVG(price) FROM book;` |
| **MIN(column)** | ะผะธะฝะธะผัะผ | `SELECT MIN(price) FROM book;` |
| **MAX(column)** | ะผะฐะบัะธะผัะผ | `SELECT MAX(price) FROM book;` |
| **GROUP_CONCAT()** | ะบะพะฝะบะฐัะตะฝะฐัะธั ัััะพะบ (MySQL) | `SELECT author, GROUP_CONCAT(title) FROM book GROUP BY author;` |
| **STRING_AGG()** | ะบะพะฝะบะฐัะตะฝะฐัะธั ัััะพะบ (PostgreSQL) | `SELECT author, STRING_AGG(title, ', ') FROM book GROUP BY author;` |
| **ARRAY_AGG()** | ัะพะฑัะฐัั ะฒ ะผะฐััะธะฒ | `SELECT author, ARRAY_AGG(title) FROM book GROUP BY author;` |
| **FILTER** | ัะธะปััั ะดะปั ะฐะณัะตะณะฐัะธะธ | `AVG(price) FILTER (WHERE category = 'ัะพะผะฐะฝ')` |

### ะัะธะผะตัั ะฐะณัะตะณะฐัะธะธ
```sql
-- ะัะพััะฐั ะณััะฟะฟะธัะพะฒะบะฐ
SELECT 
    author,
    COUNT(*) AS book_count,
    SUM(amount) AS total_copies,
    AVG(price) AS avg_price,
    MIN(price) AS min_price,
    MAX(price) AS max_price,
    SUM(price * amount) AS total_revenue
FROM book
GROUP BY author
HAVING COUNT(*) >= 2;

-- GROUP_CONCAT (MySQL)
SELECT 
    author,
    COUNT(*) AS book_count,
    GROUP_CONCAT(title SEPARATOR '; ') AS books
FROM book
GROUP BY author;

-- STRING_AGG (PostgreSQL)
SELECT 
    country,
    STRING_AGG(name, ', ' ORDER BY name) AS ships_list
FROM Ships s
JOIN Classes c ON s.class = c.class
GROUP BY country;

-- ARRAY_AGG (PostgreSQL)
SELECT 
    author,
    ARRAY_AGG(title) AS titles_array,
    ARRAY_LENGTH(ARRAY_AGG(title), 1) AS book_count
FROM book
GROUP BY author;

-- FILTER (PostgreSQL)
SELECT 
    AVG(price) AS avg_all,
    AVG(price) FILTER (WHERE amount > 5) AS avg_high_stock,
    AVG(price) FILTER (WHERE amount <= 5) AS avg_low_stock
FROM book;

-- SUM + CASE (ะบัะพัั-ัะฐะฑะปะธัะฐ)
SELECT 
    author,
    SUM(CASE WHEN genre = 'ัะพะผะฐะฝ' THEN amount ELSE 0 END) AS roman_sales,
    SUM(CASE WHEN genre = 'ะฟะพัะทะธั' THEN amount ELSE 0 END) AS poetry_sales,
    SUM(CASE WHEN genre = 'ัะฐะฝัะฐััะธะบะฐ' THEN amount ELSE 0 END) AS sci_fi_sales,
    SUM(amount) AS total_sales
FROM book
GROUP BY author;
```

---

## ๐ JOIN โ ะะะชะะะะะะะะ ะขะะะะะฆ

```sql
-- INNER JOIN (ัะพะปัะบะพ ัะพะฒะฟะฐะดะฐััะธะต ะทะฐะฟะธัะธ)
SELECT title, name_author
FROM author
INNER JOIN book ON author.author_id = book.author_id;

-- LEFT JOIN (ะฒัะต ะธะท ะปะตะฒะพะน + ัะพะฒะฟะฐะดะฐััะธะต ะธะท ะฟัะฐะฒะพะน)
SELECT name_author, title
FROM author
LEFT JOIN book ON author.author_id = book.author_id;

-- RIGHT JOIN (ะฒัะต ะธะท ะฟัะฐะฒะพะน + ัะพะฒะฟะฐะดะฐััะธะต ะธะท ะปะตะฒะพะน)
SELECT name_author, title
FROM author
RIGHT JOIN book ON author.author_id = book.author_id;

-- FULL JOIN / FULL OUTER JOIN (ะฒัะต ัััะพะบะธ ะธะท ะพะฑะตะธั ัะฐะฑะปะธั)
SELECT name_author, title
FROM author
FULL JOIN book ON author.author_id = book.author_id;

-- CROSS JOIN (ะดะตะบะฐััะพะฒะพ ะฟัะพะธะทะฒะตะดะตะฝะธะต)
SELECT name_author, title
FROM author
CROSS JOIN book;

-- SELF JOIN (ะฟัะธัะพะตะดะธะฝะตะฝะธะต ัะฐะฑะปะธัั ะบ ัะฐะผะพะน ัะตะฑะต)
SELECT e1.name AS employee, e2.name AS manager
FROM employees e1
LEFT JOIN employees e2 ON e1.manager_id = e2.id;

-- NATURAL JOIN (ะฟะพ ะพะดะฝะพะธะผะตะฝะฝัะผ ััะพะปะฑัะฐะผ - ะะ ะะะะะะะะะฃะะขะกะฏ)
SELECT * FROM author NATURAL JOIN book;

-- JOIN ั USING (ะตัะปะธ ััะพะปะฑัั ะฝะฐะทัะฒะฐัััั ะพะดะธะฝะฐะบะพะฒะพ)
SELECT title, name_author
FROM author
JOIN book USING(author_id);

-- ะะฝะพะถะตััะฒะตะฝะฝัะต JOIN
SELECT 
    b.title,
    a.name_author,
    g.name_genre
FROM book b
JOIN author a ON b.author_id = a.author_id
JOIN genre g ON b.genre_id = g.genre_id
WHERE g.name_genre = 'ะะพะผะฐะฝ'
ORDER BY b.title;
```

---

## ๐งฎ ะะะะะะซะ ะคะฃะะะฆะะ (WINDOW FUNCTIONS)

### ะะฐะฝะถะธััััะธะต ััะฝะบัะธะธ
```sql
ROW_NUMBER() OVER()                     -- ะฟัะพััะพ ะฝัะผะตัะฐัะธั ัััะพะบ 1,2,3,4...
RANK() OVER()                          -- ั ะฟัะพะฟััะบะฐะผะธ: 1,1,3,3,5...
DENSE_RANK() OVER()                   -- ะฑะตะท ะฟัะพะฟััะบะพะฒ: 1,1,2,2,3...
NTILE(n) OVER()                       -- ัะฐะทะฑะธะตะฝะธะต ะฝะฐ n ะณััะฟะฟ
PERCENT_RANK() OVER()                 -- ะพัะฝะพัะธัะตะปัะฝัะน ัะฐะฝะณ (0-1)
CUME_DIST() OVER()                   -- ะธะฝัะตะณัะฐะปัะฝะพะต ัะฐัะฟัะตะดะตะปะตะฝะธะต

-- ะัะธะผะตั
SELECT 
    name,
    subject,
    grade,
    ROW_NUMBER() OVER(PARTITION BY name ORDER BY grade DESC) AS row_num,
    RANK() OVER(PARTITION BY name ORDER BY grade DESC) AS rank,
    DENSE_RANK() OVER(PARTITION BY name ORDER BY grade DESC) AS dense_rank,
    NTILE(2) OVER(PARTITION BY name ORDER BY grade DESC) AS ntile_2,
    PERCENT_RANK() OVER(PARTITION BY name ORDER BY grade DESC) AS percent_rank,
    CUME_DIST() OVER(PARTITION BY name ORDER BY grade DESC) AS cume_dist
FROM student_grades;
```

### ะะณัะตะณะธััััะธะต ะพะบะพะฝะฝัะต ััะฝะบัะธะธ
```sql
SELECT 
    name,
    subject,
    grade,
    SUM(grade) OVER(PARTITION BY name) AS sum_by_name,
    AVG(grade) OVER(PARTITION BY name) AS avg_by_name,
    COUNT(grade) OVER(PARTITION BY name) AS count_by_name,
    MIN(grade) OVER(PARTITION BY name) AS min_by_name,
    MAX(grade) OVER(PARTITION BY name) AS max_by_name,
    SUM(grade) OVER(ORDER BY grade) AS running_total,
    AVG(grade) OVER(ORDER BY grade ROWS BETWEEN 1 PRECEDING AND 1 FOLLOWING) AS moving_avg
FROM student_grades;
```

### ะคัะฝะบัะธะธ ัะผะตัะตะฝะธั
```sql
LAG(column, offset, default) OVER(...)      -- ะทะฝะฐัะตะฝะธะต ะธะท ะฟัะตะดัะดััะตะน ัััะพะบะธ
LEAD(column, offset, default) OVER(...)     -- ะทะฝะฐัะตะฝะธะต ะธะท ัะปะตะดัััะตะน ัััะพะบะธ
FIRST_VALUE(column) OVER(...)               -- ะฟะตัะฒะพะต ะทะฝะฐัะตะฝะธะต ะฒ ะพะบะฝะต
LAST_VALUE(column) OVER(...)               -- ะฟะพัะปะตะดะฝะตะต ะทะฝะฐัะตะฝะธะต ะฒ ะพะบะฝะต
NTH_VALUE(column, n) OVER(...)            -- n-ะพะต ะทะฝะฐัะตะฝะธะต ะฒ ะพะบะฝะต

-- ะัะธะผะตัั
SELECT 
    code,
    LAG(code) OVER(ORDER BY code) AS prev_code,
    LAG(code, 1, -999) OVER(ORDER BY code) AS prev_code_default,
    LAG(code, 2) OVER(ORDER BY code) AS prev_code_2,
    LEAD(code) OVER(ORDER BY code) AS next_code,
    FIRST_VALUE(code) OVER(ORDER BY code) AS first_code,
    LAST_VALUE(code) OVER(ORDER BY code ROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING) AS last_code,
    NTH_VALUE(code, 3) OVER(ORDER BY code) AS third_code
FROM products;
```

### ROWS vs RANGE โ ะณัะฐะฝะธัั ะพะบะฝะฐ
```sql
-- ROWS โ ัะฐะฑะพัะฐ ั ัะธะทะธัะตัะบะธะผะธ ัััะพะบะฐะผะธ
ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW     -- ะฒัะต ัััะพะบะธ ะดะพ ัะตะบััะตะน + ัะตะบััะฐั
ROWS BETWEEN 1 PRECEDING AND 1 FOLLOWING             -- 1 ะดะพ, ัะตะบััะฐั, 1 ะฟะพัะปะต
ROWS BETWEEN CURRENT ROW AND UNBOUNDED FOLLOWING     -- ัะตะบััะฐั ะธ ะฒัะต ะฟะพัะปะต
ROWS UNBOUNDED PRECEDING                             -- ัะพะบัะฐัะตะฝะธะต ะดะปั ... AND CURRENT ROW

-- RANGE โ ัะฐะฑะพัะฐ ั ะดะธะฐะฟะฐะทะพะฝะพะผ ะทะฝะฐัะตะฝะธะน (ORDER BY)
RANGE BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW    -- ะฒัะต ะทะฝะฐัะตะฝะธั <= ัะตะบััะตะผั
RANGE BETWEEN CURRENT ROW AND UNBOUNDED FOLLOWING    -- ะฒัะต ะทะฝะฐัะตะฝะธั >= ัะตะบััะตะผั

-- ะัะธะผะตั
SELECT 
    date,
    revenue,
    SUM(revenue) OVER(ORDER BY date ROWS UNBOUNDED PRECEDING) AS running_total_rows,
    SUM(revenue) OVER(ORDER BY date RANGE UNBOUNDED PRECEDING) AS running_total_range,
    AVG(revenue) OVER(ORDER BY date ROWS BETWEEN 1 PRECEDING AND 1 FOLLOWING) AS moving_avg_3,
    SUM(revenue) OVER(ORDER BY date ROWS BETWEEN CURRENT ROW AND 2 FOLLOWING) AS forward_sum_3
FROM daily_sales;
```

### ะัะพัะตะฝัะธะปะธ ะธ ััะฐัะธััะธะบะฐ
```sql
-- PERCENTILE_CONT โ ะฝะตะฟัะตััะฒะฝัะน ะฟัะพัะตะฝัะธะปั (ะธะฝัะตัะฟะพะปััะธั)
-- PERCENTILE_DISC โ ะดะธัะบัะตัะฝัะน ะฟัะพัะตะฝัะธะปั (ัััะตััะฒัััะตะต ะทะฝะฐัะตะฝะธะต)

SELECT 
    department,
    PERCENTILE_CONT(0.5) WITHIN GROUP (ORDER BY salary) AS median_cont,
    PERCENTILE_DISC(0.5) WITHIN GROUP (ORDER BY salary) AS median_disc,
    PERCENTILE_CONT(0.25) WITHIN GROUP (ORDER BY salary) AS q1,
    PERCENTILE_CONT(0.75) WITHIN GROUP (ORDER BY salary) AS q3
FROM employees
GROUP BY department;
```

---

## ๐ ะะะะะขะ ะก ะะะขะะะ ะ ะะะะะะะะ

### ะคัะฝะบัะธะธ ะดะฐัั ะธ ะฒัะตะผะตะฝะธ

| ะคัะฝะบัะธั | ะะฟะธัะฐะฝะธะต | ะัะธะผะตั |
|--------|---------|--------|
| **NOW(), CURRENT_TIMESTAMP** | ัะตะบััะฐั ะดะฐัะฐ ะธ ะฒัะตะผั | `SELECT NOW();` |
| **CURRENT_DATE, CURDATE()** | ัะตะบััะฐั ะดะฐัะฐ | `SELECT CURRENT_DATE;` |
| **CURRENT_TIME, CURTIME()** | ัะตะบััะตะต ะฒัะตะผั | `SELECT CURRENT_TIME;` |
| **DATE()** | ัะพะปัะบะพ ะดะฐัะฐ | `SELECT DATE(created_at);` |
| **TIME()** | ัะพะปัะบะพ ะฒัะตะผั | `SELECT TIME(created_at);` |
| **YEAR()** | ะณะพะด | `YEAR('2024-01-15') โ 2024` |
| **MONTH()** | ะผะตััั (1-12) | `MONTH('2024-01-15') โ 1` |
| **DAY()** | ะดะตะฝั ะผะตัััะฐ | `DAY('2024-01-15') โ 15` |
| **DAYOFMONTH()** | ะดะตะฝั ะผะตัััะฐ | ะฐะฝะฐะปะพะณะธัะฝะพ DAY() |
| **DAYOFWEEK()** | ะดะตะฝั ะฝะตะดะตะปะธ (1-7) | `DAYOFWEEK('2024-01-15')` |
| **DAYOFYEAR()** | ะดะตะฝั ะณะพะดะฐ (1-366) | `DAYOFYEAR('2024-01-15') โ 15` |
| **WEEK()** | ะฝะพะผะตั ะฝะตะดะตะปะธ | `WEEK('2024-01-15')` |
| **MONTHNAME()** | ะฝะฐะทะฒะฐะฝะธะต ะผะตัััะฐ | `MONTHNAME('2024-01-15') โ 'January'` |
| **DAYNAME()** | ะฝะฐะทะฒะฐะฝะธะต ะดะฝั | `DAYNAME('2024-01-15') โ 'Monday'` |
| **QUARTER()** | ะบะฒะฐััะฐะป (1-4) | `QUARTER('2024-01-15') โ 1` |
| **HOUR()** | ัะฐัั | `HOUR('15:30:45') โ 15` |
| **MINUTE()** | ะผะธะฝััั | `MINUTE('15:30:45') โ 30` |
| **SECOND()** | ัะตะบัะฝะดั | `SECOND('15:30:45') โ 45` |

### ะะฐะทะฝะธัะฐ ะผะตะถะดั ะดะฐัะฐะผะธ
```sql
-- MySQL, MS SQL Server
DATEDIFF(date1, date2)                     -- ะบะพะปะธัะตััะฒะพ ะดะฝะตะน
DATEDIFF('2024-01-20', '2024-01-15') โ 5

-- MySQL
TIMEDIFF(time1, time2)                    -- ัะฐะทะฝะธัะฐ ะฒะพ ะฒัะตะผะตะฝะธ
TIMESTAMPDIFF(unit, start, end)           -- ัะฐะทะฝะธัะฐ ะฒ ัะบะฐะทะฐะฝะฝัั ะตะดะธะฝะธัะฐั

-- PostgreSQL
AGE(date1, date2)                         -- ะธะฝัะตัะฒะฐะป
EXTRACT(EPOCH FROM (date1 - date2)) / 86400 -- ัะฐะทะฝะธัะฐ ะฒ ะดะฝัั

-- ะัะธะผะตั: ัะฐะทะฝะธัะฐ ะฒ ะผะธะฝััะฐั ั ััะตัะพะผ ะฟะตัะตัะพะดะฐ ัะตัะตะท ัััะบะธ
SUM((DATEDIFF(minute, time_out, time_in) + 1440) % 1440) AS minutes

-- ะะปะธ ัะตัะตะท CASE
CASE
    WHEN DATEDIFF(mi, time_out, time_in) < 0 
        THEN 1440 + DATEDIFF(mi, time_out, time_in)
    ELSE DATEDIFF(mi, time_out, time_in)
END AS minutes
```

### ะัะธัะผะตัะธะบะฐ ั ะดะฐัะฐะผะธ
```sql
-- MySQL
DATE_ADD(date, INTERVAL value unit)        -- ะดะพะฑะฐะฒะธัั ะธะฝัะตัะฒะฐะป
DATE_SUB(date, INTERVAL value unit)        -- ะฒััะตััั ะธะฝัะตัะฒะฐะป

DATE_ADD('2024-01-15', INTERVAL 7 DAY)     -- 2024-01-22
DATE_ADD('2024-01-15', INTERVAL 1 MONTH)   -- 2024-02-15
DATE_ADD('2024-01-15', INTERVAL 1 YEAR)    -- 2025-01-15

-- PostgreSQL
date + integer                            -- ะดะพะฑะฐะฒะธัั ะดะฝะธ
date + INTERVAL '1 day'                  -- ะดะพะฑะฐะฒะธัั ะธะฝัะตัะฒะฐะป
date - INTERVAL '1 month'               -- ะฒััะตััั ะธะฝัะตัะฒะฐะป

-- MS SQL Server
DATEADD(unit, value, date)               -- ะดะพะฑะฐะฒะธัั ะธะฝัะตัะฒะฐะป
DATEADD(day, 7, '2024-01-15')           -- 2024-01-22
```

### ะคะพัะผะฐัะธัะพะฒะฐะฝะธะต ะดะฐั
```sql
-- MySQL
DATE_FORMAT(date, format)               -- ัะพัะผะฐัะธัะพะฒะฐะฝะธะต ะดะฐัั
DATE_FORMAT('2024-01-15', '%d.%m.%Y')   -- 15.01.2024
DATE_FORMAT('2024-01-15', '%W, %M %D, %Y') -- Monday, January 15th, 2024

-- ะคะพัะผะฐัั: %Y - 4-ะทะฝะฐั ะณะพะด, %y - 2-ะทะฝะฐั, %m - ะผะตััั (01-12), %d - ะดะตะฝั, 
-- %H - ัะฐั (00-23), %i - ะผะธะฝััั, %s - ัะตะบัะฝะดั, %W - ะดะตะฝั ะฝะตะดะตะปะธ, %M - ะผะตััั

-- PostgreSQL
TO_CHAR(date, format)                   -- ัะพัะผะฐัะธัะพะฒะฐะฝะธะต ะดะฐัั
TO_CHAR('2024-01-15', 'DD.MM.YYYY')     -- 15.01.2024
TO_CHAR('2024-01-15', 'FMMonth DD, YYYY') -- January 15, 2024

-- MS SQL Server
CONVERT(varchar, date, format)          -- ะบะพะฝะฒะตััะฐัะธั ั ัะพัะผะฐัะพะผ
CONVERT(varchar, '2024-01-15', 3)       -- 15/01/2024
CONVERT(varchar, '2024-01-15', 104)     -- 15.01.2024

-- ะคะพัะผะฐัั: 1/101 - mm/dd/yyyy, 3/103 - dd/mm/yyyy, 
-- 4/104 - dd.mm.yyyy, 10/110 - mm-dd-yyyy
```

### ะะทะฒะปะตัะตะฝะธะต ัะฐััะตะน ะดะฐัั
```sql
-- PostgreSQL: DATE_PART, EXTRACT
DATE_PART('year', TIMESTAMP '2024-01-15 20:31:05')      -- 2024.00
DATE_PART('month', TIMESTAMP '2024-01-15')              -- 1.00
DATE_PART('day', TIMESTAMP '2024-01-15')                -- 15.00
DATE_PART('hour', TIMESTAMP '2024-01-15 20:31:05')      -- 20.00
DATE_PART('minute', TIMESTAMP '2024-01-15 20:31:05')    -- 31.00
DATE_PART('second', TIMESTAMP '2024-01-15 20:31:05')    -- 5.00
DATE_PART('dow', TIMESTAMP '2024-01-15')               -- ะดะตะฝั ะฝะตะดะตะปะธ (0-6)
DATE_PART('isodow', TIMESTAMP '2024-01-15')            -- ะดะตะฝั ะฝะตะดะตะปะธ (1-7)
DATE_PART('quarter', TIMESTAMP '2024-01-15')           -- ะบะฒะฐััะฐะป (1-4)
DATE_PART('week', TIMESTAMP '2024-01-15')              -- ะฝะตะดะตะปั ISO

-- ะขะพ ะถะต ัะตัะตะท EXTRACT
EXTRACT(YEAR FROM TIMESTAMP '2024-01-15')              -- 2024
EXTRACT(MONTH FROM TIMESTAMP '2024-01-15')             -- 1
EXTRACT(DAY FROM TIMESTAMP '2024-01-15')               -- 15
EXTRACT(EPOCH FROM TIMESTAMP '2024-01-15')             -- ัะตะบัะฝะด ั 1970-01-01
```

### Unix ะฒัะตะผั
```sql
-- Unix timestamp โ ัะตะบัะฝะดั ั 1970-01-01
UNIX_TIMESTAMP()                       -- ัะตะบััะตะต Unix-ะฒัะตะผั (MySQL)
UNIX_TIMESTAMP('2024-01-15')          -- ะบะพะฝะฒะตััะฐัะธั ะดะฐัั ะฒ Unix-ะฒัะตะผั

FROM_UNIXTIME(1705276800)             -- Unix โ ะดะฐัะฐ: 2024-01-15 00:00:00
FROM_UNIXTIME(1598291490)            -- 2020-08-24 17:51:30

-- ะคะพัะผัะปะฐ ะฟะตัะตะฒะพะดะฐ: 1970-01-01 + time_unix / 86400
-- PostgreSQL: TO_TIMESTAMP(1705276800)

-- ะะพะฝะฒะตััะฐัะธั ัะตะบัะฝะด ะฒ ัะพัะผะฐั ะฒัะตะผะตะฝะธ
SEC_TO_TIME(288)                     -- 00:04:48 (MySQL)
MAKETIME(0, 4, 48)                  -- 00:04:48
```

### ะะตัะฒัะน/ะฟะพัะปะตะดะฝะธะน ะดะตะฝั ะผะตัััะฐ
```sql
-- MS SQL Server
EOMONTH(date)                        -- ะฟะพัะปะตะดะฝะธะน ะดะตะฝั ะผะตัััะฐ
EOMONTH('2024-01-15') โ 2024-01-31
EOMONTH('2024-01-15', -1)           -- ะฟะพัะปะตะดะฝะธะน ะดะตะฝั ะฟัะตะดัะดััะตะณะพ ะผะตัััะฐ
EOMONTH('2024-01-15', 1)            -- ะฟะพัะปะตะดะฝะธะน ะดะตะฝั ัะปะตะดัััะตะณะพ ะผะตัััะฐ

-- ะะตัะฒัะน ะดะตะฝั ะผะตัััะฐ
DATEADD(DAY, 1, EOMONTH('2024-01-15', -1))  -- 2024-01-01

-- MySQL
LAST_DAY(date)                       -- ะฟะพัะปะตะดะฝะธะน ะดะตะฝั ะผะตัััะฐ
DATE_FORMAT(date, '%Y-%m-01')        -- ะฟะตัะฒัะน ะดะตะฝั ะผะตัััะฐ

-- PostgreSQL
DATE_TRUNC('month', date) + INTERVAL '1 month' - INTERVAL '1 day'  -- ะฟะพัะปะตะดะฝะธะน ะดะตะฝั
DATE_TRUNC('month', date)           -- ะฟะตัะฒัะน ะดะตะฝั ะผะตัััะฐ
```

### DATE_TRUNC โ ััะตัะตะฝะธะต ะดะฐัั/ะฒัะตะผะตะฝะธ (PostgreSQL)
```sql
-- ะฃัะตะบะฐะตั ะดะฐัั/ะฒัะตะผั ะดะพ ัะบะฐะทะฐะฝะฝะพะน ัะพัะฝะพััะธ
DATE_TRUNC('year', TIMESTAMP '2024-01-15 08:55:30')   -- 2024-01-01 00:00:00
DATE_TRUNC('month', TIMESTAMP '2024-01-15 08:55:30')  -- 2024-01-01 00:00:00
DATE_TRUNC('day', TIMESTAMP '2024-01-15 08:55:30')    -- 2024-01-15 00:00:00
DATE_TRUNC('hour', TIMESTAMP '2024-01-15 08:55:30')   -- 2024-01-15 08:00:00
DATE_TRUNC('minute', TIMESTAMP '2024-01-15 08:55:30') -- 2024-01-15 08:55:00
```

---

## ๐ข ะะะขะะะะขะะงะะกะะะ ะคะฃะะะฆะะ

| ะคัะฝะบัะธั | ะะฟะธัะฐะฝะธะต | ะัะธะผะตั |
|--------|---------|--------|
| **ROUND(x, k)** | ะพะบััะณะปะตะฝะธะต ะดะพ k ะทะฝะฐะบะพะฒ | `ROUND(4.361, 2) โ 4.36` |
| **CEILING(x), CEIL(x)** | ะพะบััะณะปะตะฝะธะต ะฒะฒะตัั | `CEILING(4.2) โ 5, CEIL(-5.8) โ -5` |
| **FLOOR(x)** | ะพะบััะณะปะตะฝะธะต ะฒะฝะธะท | `FLOOR(4.9) โ 4, FLOOR(-5.8) โ -6` |
| **TRUNCATE(x, k)** | ััะตัะตะฝะธะต (ะฑะตะท ะพะบััะณะปะตะฝะธั) | `TRUNCATE(4.361, 2) โ 4.36` |
| **ABS(x)** | ะผะพะดัะปั ัะธัะปะฐ | `ABS(-5) โ 5` |
| **POWER(x, y)** | ะฒะพะทะฒะตะดะตะฝะธะต ะฒ ััะตะฟะตะฝั | `POWER(3, 4) โ 81.0` |
| **SQRT(x)** | ะบะฒะฐะดัะฐัะฝัะน ะบะพัะตะฝั | `SQRT(16) โ 4.0` |
| **EXP(x)** | ัะบัะฟะพะฝะตะฝัะฐ (e^x) | `EXP(1) โ 2.718...` |
| **LOG(x)** | ะฝะฐัััะฐะปัะฝัะน ะปะพะณะฐัะธัะผ | `LOG(2.718) โ 1.0` |
| **LOG10(x)** | ะดะตัััะธัะฝัะน ะปะพะณะฐัะธัะผ | `LOG10(100) โ 2.0` |
| **PI()** | ัะธัะปะพ ฯ | `PI() โ 3.1415926...` |
| **RADIANS(x)** | ะณัะฐะดััั โ ัะฐะดะธะฐะฝั | `RADIANS(180) โ 3.14159...` |
| **DEGREES(x)** | ัะฐะดะธะฐะฝั โ ะณัะฐะดััั | `DEGREES(3.14159) โ 180` |
| **SIN(x), COS(x), TAN(x)** | ััะธะณะพะฝะพะผะตััะธัะตัะบะธะต | `SIN(PI()/2) โ 1` |
| **ASIN(x), ACOS(x), ATAN(x)** | ะพะฑัะฐัะฝัะต ััะธะณะพะฝะพะผะตััะธัะตัะบะธะต | `ASIN(1) โ 1.5708` |
| **RAND(), RANDOM()** | ัะปััะฐะนะฝะพะต ัะธัะปะพ (0-1) | `RAND() โ 0.12345` |
| **SIGN(x)** | ะทะฝะฐะบ ัะธัะปะฐ (-1,0,1) | `SIGN(-5) โ -1` |
| **MOD(x, y)** | ะพััะฐัะพะบ ะพั ะดะตะปะตะฝะธั | `MOD(10, 3) โ 1` |
| **POWER(SQRT(ABS()),3)** | ะบะพะผะฑะธะฝะธัะพะฒะฐะฝะธะต | `POWER(SQRT(ABS(-16)), 3) โ 64` |

---

## ๐ ะะะะะขะ ะกะ ะกะขะะะะะะ

### ะัะฝะพะฒะฝัะต ัััะพะบะพะฒัะต ััะฝะบัะธะธ

| ะคัะฝะบัะธั | ะะฟะธัะฐะฝะธะต | ะัะธะผะตั |
|--------|---------|--------|
| **CONCAT(s1, s2, ...)** | ะพะฑัะตะดะธะฝะตะฝะธะต ัััะพะบ | `CONCAT('ab', 'cd') โ 'abcd'` |
| **CONCAT_WS(sep, s1, s2)** | ะพะฑัะตะดะธะฝะตะฝะธะต ั ัะฐะทะดะตะปะธัะตะปะตะผ | `CONCAT_WS(', ', 'a', 'b') โ 'a, b'` |
| **SUBSTRING(s, pos, len)** | ะฟะพะดัััะพะบะฐ | `SUBSTRING('abcdef', 2, 3) โ 'bcd'` |
| **SUBSTR(s, pos, len)** | ะฐะฝะฐะปะพะณ SUBSTRING | `SUBSTR('abcdef', -3, 2) โ 'de'` |
| **LEFT(s, n)** | ะฟะตัะฒัะต n ัะธะผะฒะพะปะพะฒ | `LEFT('abcdef', 3) โ 'abc'` |
| **RIGHT(s, n)** | ะฟะพัะปะตะดะฝะธะต n ัะธะผะฒะพะปะพะฒ | `RIGHT('abcdef', 3) โ 'def'` |
| **LENGTH(s)** | ะดะปะธะฝะฐ ัััะพะบะธ (ะฑะฐะนัั) | `LENGTH('abc') โ 3` |
| **CHAR_LENGTH(s)** | ะดะปะธะฝะฐ ัััะพะบะธ (ัะธะผะฒะพะปั) | `CHAR_LENGTH('ะฐะฑะฒ') โ 3` |
| **UPPER(s)** | ะฒะตััะฝะธะน ัะตะณะธััั | `UPPER('abc') โ 'ABC'` |
| **LOWER(s)** | ะฝะธะถะฝะธะน ัะตะณะธััั | `LOWER('ABC') โ 'abc'` |
| **TRIM(s)** | ัะดะฐะปะธัั ะฟัะพะฑะตะปั ั ะบะพะฝัะพะฒ | `TRIM(' abc ') โ 'abc'` |
| **LTRIM(s)** | ัะดะฐะปะธัั ะฟัะพะฑะตะปั ัะปะตะฒะฐ | `LTRIM(' abc') โ 'abc'` |
| **RTRIM(s)** | ัะดะฐะปะธัั ะฟัะพะฑะตะปั ัะฟัะฐะฒะฐ | `RTRIM('abc ') โ 'abc'` |
| **REPLACE(s,

ะงะฐััั 1 ะฝะต ะพัะผััะปะตะฝะฝะฐั) ะดะพะฟะพะปะฝัะป ะฝะฐ ัะฐะฝะฝะธั ััะฐะฟะฐั

!!!!SQL ะฒัะฟะพะปะฝัะตั ะบะพะผะฐะฝะดั ะฝะต ัะฐะบ!!! ะญัะพ ะฟะพััะดะพะบ ะทะฐะฟะธัะธ ะบะพะดะฐ:

SELECT [DISTINCT | ALL ] /* ะฟะพะปั ัะฐะฑะปะธั*/
FROM /* ะธะท ะบะฐะบะธั ัะฐะฑะปะธั*/
WHERE /* ััะปะพะฒะธะต ะฝะฐ ะพะณัะฐะฝะธัะตะฝะธะต ัััะพะบ*/
GROUP BY /*ััะปะพะฒะธะต ะณััะฟะฟะธัะพะฒะบะธ*/
HAVING BY /*ััะปะพะฒะธะต ะฝะฐ ะพะณัะฐะฝะธัะตะฝะธะต ัััะพะบ ะฟะพัะปะต ะณััะฟะฟะธัะพะฒะบะธ*/
ORDER BY /*ะฟะพััะดะพะบ ัะพััะธัะพะฒะบะธ*/ [ ASC | DESC]
LIMIT /* ะพะณัะฐะฝะธัะตะฝะธะต ะบะพะปะฒะพ ะทะฐะฟะธัะตะน*/

!!!SQL ะดัะผะฐะตั ะฒ ัะฐะบะพะผ ะฟะพััะดะบะต :-- ะฟะพััะดะพะบ ะฒัะฟะพะปะฝะตะฝะธั ะทะฐะฟัะพัะพะฒ ะฝะฐ ะฒัะฑะพัะบั ะฝะฐ ะกะะะะะ:
ย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย FROM (ะฒัะฑะพั ัะฐะฑะปะธัั)
ย ย ย ย ย ย ย ย ย ย ย ย ย ย JOIN (ะบะพะผะฑะธะฝะฐัะธั ั ะฟะพะดัะพะดััะธะผะธ ะฟะพ ััะปะพะฒะธั ะดะฐะฝะฝัะผะธ ะธะท ะดััะณะธั ัะฐะฑะปะธั)
ย ย ย ย ย ย ย ย ย ย ย ย ย ย WHERE (ัะธะปัััะฐัะธั ัััะพะบ)
ย ย ย ย ย ย ย ย ย ย ย ย ย ย GROUP BY (ะฐะณัะตะณะธัะพะฒะฐะฝะธะต ะดะฐะฝะฝัั)
ย ย ย ย ย ย ย ย ย ย ย ย ย ย HAVING (ัะธะปัััะฐัะธั ะฐะณัะตะณะธัะพะฒะฐะฝะฝัั ะดะฐะฝะฝัั)
ย ย ย ย ย ย ย ย ย ย ย ย ย ย SELECT (ะฒะพะทะฒัะฐั ัะตะทัะปััะธััััะตะณะพ ะดะฐัะฐัะตัะฐ)
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ORDER BY (ัะพััะธัะพะฒะบะฐ).
_________________________________________________________________________________________

SELECT * FROM book; - ะัะฑัะฐัั ะฒัะต ะทะฐะฟะธัะธ ัะฐะฑะปะธัั book

SELECT - ะฟัะธะบะฐะท ะกะฃะะ ะฒัะฑัะฐัั ััะพ-ัะพ

AS - "ะฒ ะบะฐัะตััะฒะต", "ะพะฑะทะพะฒะธ ะฒัั ััะพ ัะปะตะฒะฐ ััะฐะทะพะน ัะฟัะฐะฒะฐ"
ย ย : ะปะตะฒัะน ะพะฟะตัะฐะฝะด AS(ะฒ ะบะฐัะตััะฒะต) ะฟัะฐะฒะพะณะพ ะพะฟะตัะฐะฝะดะฐ
ย ย ย ย ย ย ย ย /*SELECT title AS ะะฐะทะฒะฐะฝะธะต, amountย
ย ย ย ย ย ย ย ย FROM book;*/

IF(ะปะพะณะธัะตัะบะพะต_ะฒััะฐะถะตะฝะธะต, ะฒััะฐะถะตะฝะธะต_1, ะฒััะฐะถะตะฝะธะต_2)
ย ย ะคัะฝะบัะธั ะฒััะธัะปัะตั ะปะพะณะธัะตัะบะพะต_ะฒััะฐะถะตะฝะธะต, ะตัะปะธ ะพะฝะพ ะธััะธะฝะฐ โย
ย ย ะฒ ะฟะพะปะต ะทะฐะฝะพัะธััั ะทะฝะฐัะตะฝะธะต ะฒััะฐะถะตะฝะธั_1, ะฒ ะฟัะพัะธะฒะฝะพะผ ัะปััะฐะต โ ยะทะฝะฐัะตะฝะธะต ะฒััะฐะถะตะฝะธั_2.ย
ย ย ะัะต ััะธ ะฟะฐัะฐะผะตััะฐ IF() ัะฒะปััััั ะพะฑัะทะฐัะตะปัะฝัะผะธ.

ย ย ะะพะฟััะบะฐะตััั ะธัะฟะพะปัะทะพะฒะฐะฝะธะต ะฒะปะพะถะตะฝะฝัั ััะฝะบัะธะน, ะฒะผะตััะพ ะฒััะฐะถะตะฝะธั_1 ะธะปะธ ะฒััะฐะถะตะฝะธั_2 ะผะพะถะตั ััะพััั ะฝะพะฒะฐั ััะฝะบัะธั IF.



JOIN - ะฟัะธัะพะตะดะธะฝะธัั
ย ย ย ย ย ย ย ย ย ย ย ย SELECT title, name_author
ย ย ย ย ย ย ย ย ย ย ย ย FROMย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย author INNER JOIN book
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ON author.author_id = book.author_id;

HAVING COUNT(DISTINCT(....)) ะฟะพะดััะตั ัะฝะธะบะฐะปัะฝัั ัะปะตะผะตะฝัะพะฒ ะฒ ััะปะพะฒะธะธ



WHERE ะธัะฟะพะปัะทัะตััั ะะ!!! GROUP BY, ะฐ ะฟะพัะปะต GROUP BY ะธัะฟะพะปัะทัะตััั HAVING !!! - "ะะดะต (ะตััั)",ย
ย ย ย(ะัะปะธ ััะปะพะฒะธะต โ ะธััะธะฝะฐ, ัะพ ัััะพะบะฐ(ะทะฐะฟะธัั) ยะฒะบะปััะฐะตััั ะฒ ะฒัะฑะพัะบั, ะตัะปะธ ะปะพะถั โ ะฝะตั.)
ย ย ะะพะณะธัะตัะบะพะต ะฒััะฐะถะตะฝะธะต ะฟะพัะปะต ะบะปััะตะฒะพะณะพ ัะปะพะฒะฐ WHERE ะบัะพะผะต ะพะฟะตัะฐัะพัะพะฒ ััะฐะฒะฝะตะฝะธั ยะธ ะฒััะฐะถะตะฝะธะนย
ย ย ะผะพะถะตั ะฒะบะปััะฐัั ยะปะพะณะธัะตัะบะธะต ะพะฟะตัะฐัะธะธ (ะ ยซandยป (&&), ะะะ ยซorยป (||), ะะ ยซnotยป) ะธย
ย ย ะบััะณะปัะต ัะบะพะฑะบะธ, ะธะทะผะตะฝัััะธะต ะฟัะธะพัะธัะตัั ะฒัะฟะพะปะฝะตะฝะธั ะพะฟะตัะฐัะธะน.

ย ย BETWEEN ะธ IN - ยะะพะณะธัะตัะบะพะต ะฒััะฐะถะตะฝะธะต ะฟะพัะปะต ะบะปััะตะฒะพะณะพ ัะปะพะฒะฐ WHEREย
ย ย ย ย ย ย ย ย ย ย WHERE ะผะพะถะตั ะฒะบะปััะฐัั ะพะฟะตัะฐัะพัั ยBETWEEN ะธ IN.ย
ย ย ย ย ย ย ย ย ะัะธะพัะธัะตั ยั ััะธั ะพะฟะตัะฐัะพัะพะฒ ัะฐะบะพะน ะถะต ะบะฐะบ ั ะพะฟะตัะฐัะพัะพะฒ ััะฐะฒะฝะตะฝะธั,ย
ย ย ย ย ย ย ย ย ัะพ ะตััั ะพะฝะธ ะฒัะฟะพะปะฝััััั ัะฐะฝััะต, ัะตะผ NOT, AND, OR.
ย ย ย ย ย ย ย ย /*SELECT title, amountย
ย ย ย ย ย ย ย ย FROM book
ย ย ย ย ย ย ย ย WHERE amount BETWEEN 5 AND 14;*/

ย ย ย ย ย ย ย ย BETWEEN - ะฟะพะทะฒะพะปัะตั ะพัะพะฑัะฐัั ะดะฐะฝะฝัะต, ะพัะฝะพัััะธะตัั ะบ ะฝะตะบะพัะพัะพะผั ะธะฝัะตัะฒะฐะปั, ะฒะบะปััะฐั ะตะณะพ ะณัะฐะฝะธัั
ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย IN ยะพะฟัะตะดะตะปัะตั, ัะพะฒะฟะฐะดะฐะตั ะปะธ ะทะฝะฐัะตะฝะธะต ััะพะปะฑัะฐ ั ะพะดะฝะธะผ ะธะท ะทะฝะฐัะตะฝะธะน, ัะพะดะตัะถะฐัะธััั ะฒะพ ะฒะปะพะถะตะฝะฝะพะผ ะทะฐะฟัะพัะต.ย
ย ย ย ย ย ย ย ย ย ย ะัะธ ััะพะผ ะปะพะณะธัะตัะบะพะต ะฒััะฐะถะตะฝะธะต ะฟะพัะปะต WHERE ะฟะพะปััะฐะตั ะทะฝะฐัะตะฝะธะต ะธััะธะฝะฐ.ย
ย ย ย ย ย ย ย ย ย ย ะะฟะตัะฐัะพั NOT IN ะฒัะฟะพะปะฝัะตั ะพะฑัะฐัะฝะพะต ะดะตะนััะฒะธะต โ ะฒััะฐะถะตะฝะธะต ะธััะธะฝะฝะพ,ย
ย ย ย ย ย ย ย ย ย ย ะตัะปะธ ะทะฝะฐัะตะฝะธะต ััะพะปะฑัะฐ ะฝะต ัะพะดะตัะถะธััั ะฒะพ ะฒะปะพะถะตะฝะฝะพะผ ะทะฐะฟัะพัะต.

HAVING - ะ ะทะฐะฟัะพัะฐั ั ะณััะฟะฟะพะฒัะผะธ ััะฝะบัะธัะผะธ ะฒะผะตััะพ WHERE, ะบะพัะพัะพะต ัะฐะทะผะตัะฐะตััั ะฟะพัะปะต ะพะฟะตัะฐัะพัะฐ GROUP BY.ย
ย ย ย ย ย ย ย ย /*SELECT author,
ย ย ย ย ย ย ย ย MIN(price) AS ะะธะฝะธะผะฐะปัะฝะฐั_ัะตะฝะฐ,ย
ย ย ย ย ย ย ย ย MAX(price) AS ะะฐะบัะธะผะฐะปัะฝะฐั_ัะตะฝะฐ
ย ย ย ย ย ย ย ย FROM book
ย ย ย ย ย ย ย ย GROUP BY author
ย ย ย ย ย ย ย ย HAVING SUM(price * amount) > 5000; */


WHERE ัะธะปััััะตั ัััะพะบะธ ะฒ ัะฐะฑะปะธัะต, HAVING ัะธะปััััะตั ัะตะทัะปััะฐัั ะณััะฟะฟะธัะพะฒะบะธ,ย
ย ย ย ะ ัะฐะผะบะฐั ะพะดะฝะพะณะพ ะทะฐะฟัะพัะฐ ะผะพะถะตั ะฑััั WHERE ะธ HAVING,ย
ย ย ย ะฟัะพััะพ WHERE ัะฐะฑะพัะฐะตั ะะ ะณััะฟะฟะธัะพะฒะพะบ, ะฐ HAVING - ะฟะพัะปะต

ะ where ะธ having ะธัะฟะพะปัะทััััั ะดะปั ะฝะฐะปะพะถะตะฝะธั ะพะณัะฐะฝะธัะตะฝะธะน,ย
ะฝะพ where ะธัะฟะพะปัะทััััั ะฟัะธ ะพะณัะฐะฝะธัะตะฝะธะธ ะฝะฐ ะธััะพะดะฝัะต ะทะฝะฐัะตะฝะธั ะฒ ัััะพะบะฐั ะฝะฐัะตะน ัะฐะฑะปะธัั,ย
ะฐ having ะฝะฐ ัะถะต ะฐะณัะตะณะธัะพะฒะฐะฝะฝัะต ะทะฝะฐัะตะฝะธั.


GROUP BY (DISTINCT) - ะณััะฟะฟะธััะตั ะดะฐะฝะฝัะต ะฟัะธ ะฒัะฑะพัะบะต, ะธะผะตััะธะต ะพะดะธะฝะฐะบะพะฒัะต ะทะฝะฐัะตะฝะธั ะฒ ะฝะตะบะพัะพัะพะผ ััะพะปะฑัะต
ย ย ย ย ย ย ะฟัะธ ััะพะผ ะผะพะถะฝะพ ะธัะฟะพะปัะทะพะฒะฐัั ะฐะณัะตะณะฐัะฝัะต ััะฝะบัะธะธ SUM, AVG, MAX ะธ ั.ะด.
ย ย ย ย ย ย ย /*SELECT ยะฐััะธะฑัั
ย ย ย ย ย ย ย ย FROM ัะฐะฑะปะธัะฐ
ย ย ย ย ย ย ย ย GROUP BY ะฐััะธะฑัั;*/ ยย

DISTINCT (GROUP BY) - ัะฐะฑะพัะฐะตั ะฑััััะตะต GROUP BY ะฝะพ ั ะผะตะฝััะธะผ ััะฝะบัะธะพะฝะฐะปะพะผ (ะพัะพะฑัะฐัั ัะฝะธะบะฐะปัะฝัะต ัะปะตะผะตะฝัั ะฝะตะบะพัะพัะพะณะพ ััะพะปะฑัะฐ)
ย ย ย ย ย ย ย ย
ย ย ย ย ย ย ย ย /*SELECT DISTINCT ะฐััะธะฑัั
ย ย ย ย ย ย ย ย FROM book;*/

ORDER BY - ยะฟะพัะปะต ะบะพัะพััั ะทะฐะดะฐัััั ะธะผะตะฝะฐ ััะพะปะฑัะพะฒ
ย ย ะะพ ัะผะพะปัะฐะฝะธั ORDER BY ะฒัะฟะพะปะฝัะตั ัะพััะธัะพะฒะบั ะฟะพ ะฒะพะทัะฐััะฐะฝะธั.ย
ย ย ะงัะพะฑั ัะฟัะฐะฒะปััั ะฝะฐะฟัะฐะฒะปะตะฝะธะตะผ ัะพััะธัะพะฒะบะธ ะฒัััะฝัั,ย
ย ย ะฟะพัะปะต ะธะผะตะฝะธ ััะพะปะฑัะฐ ัะบะฐะทัะฒะฐะตััั ะบะปััะตะฒะพะต ัะปะพะฒะพ ASC (ะฟะพ ะฒะพะทัะฐััะฐะฝะธั) ะธะปะธ DESC (ะฟะพ ัะฑัะฒะฐะฝะธั).ย

ย ย ะกัะพะปะฑัั ะฟะพัะปะต ะบะปััะตะฒะพะณะพ ัะปะพะฒะฐ ORDER BY ะผะพะถะฝะพ ะทะฐะดะฐะฒะฐัั:

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ะฝะฐะทะฒะฐะฝะธะตะผ ััะพะปะฑัะฐ;
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ะฝะพะผะตัะพะผ ััะพะปะฑัะฐ ัะบะฐะทะฐะฝะฝะพะฒ ะฒ SELECT;
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ะธะผะตะฝะตะผ ััะพะปะฑัะฐ (ัะบะฐะทะฐะฝะฝัะผ ะฟะพัะปะต AS).

UNION - ัะปะธัะฝะธะต ัะฐะฑะปะธั( ัะพัะผะธััะตะผ ะพะดะฝั ัะฐะฑะปะธัั ะธ ะฒัะพััั,ย
ย ย ย ย ะตัะปะธ ััะพะปะฑัั ัะพะฒะฟะพะดะฐัั ะฟะพ ะบะพะปะปะธัะตััะฒั ัะผะพะถะตะผ ะธั ัะพะตะดะตะฝะธัั ะฒ ะพะดะฝั ะดััะณ ะฟะพะด ะดััะณะพะผ)

LIKE - ะะฟะตัะฐัะพั LIKE ะธัะฟะพะปัะทัะตััั ะดะปั ััะฐะฒะฝะตะฝะธั ัััะพะบ ะฒ ัะพะพัะฒะตัััะฒะธะธ ั ัะฐะฑะปะพะฝะพะผ.ย
ย ย ะ ัะทัะบะต SQL ะพะฑะทัะฒะฐะตััั ะฟะฐััะตัะฝะพะผ(ัะฐะฑะปะพะฝะพะผ)
ย ย ะจะฐะฑะปะพะฝ ะผะพะถะตั ะฒะบะปััะฐัั ะพะฑััะฝัะต ัะธะผะฒะพะปั ะธ ัะธะผะฒะพะปั-ัะฐะฑะปะพะฝั ( % ะธ _ ).
ย ยย
NOT LIKE, ะบะพัะพััะน ะฒ ะดะฐะฝะฝะพะผ ัะปััะฐะต ะพัะฑะตัะตั ะฒัะต ะฝะฐะทะฒะฐะฝะธั, ะฒ ะบะพัะพััั ะฝะตั ะฟัะพะฑะตะปะพะฒ.

ย ย ย ย ย ย ย ย ย ย ย ย ย ย 'abc%' - ะปัะฑัะต ัััะพะบะธ ะฝะฐัะธะฝะฐััะตะตัั ั abc
ย ย ย ย ย ย ย ย ย ย ย ย ย ย 'abc_' - ัััะพะบะธ ะฝะฐัะธะฝะฐะฝะฐััะตะตัั ั abc ะดะปะธะฝะฝะพะน 4 ัะธะผะฒะพะปะฐ
ย ย ย ย ย ย ย ย ย ย ย ย ย ย '%z' ย - ะฟะพัะปะตะดะพะฒะฐัะตะปัะฝะพััั ัะธะผะฒะพะปะพะฒ ะฝะฐ ะบะพะฝัะต z
ย ย ย ย ย ย ย ย ย ย ย ย ย ย '%Rost%' - ะฟะพัะปะตะดะพะฒะฐัะตะปัะฝะพััั ะปัะฑะฐั ัะพะดะตัะถะฐัะฐั Rost
ย ย ย ย ย ย ย ย ย ย ย ย ย ย '% % %' ัะตะบั ัะพะดะตะพะถะฐัะธะน 2 ะฟัะพะฑะตะปะฐ
ย ย ย ย ย ย ย ย ย ย ย ย ย ย WHERE name_genre LIKE"[[:<:]]ัะพะผะฐะฝ[[:>:]]"

PRIMARY - "ะฟะตัะฒะธัะฝัะน", ะธะผะตะตััั ะฒ ะฒะธะดั - "KEY", ะตััั ะตัั ะพะดะธะฝ - FOREIGN, ัะพะถะต - ะบะปััะธะบ.ย
ะญัะธ ะบะปััะธ - ะธััะธะฝะฝะฐั ัะธะปะฐ RELATION-ะฝะพะน ะผะพะดะตะปะธ ะฑะฐะทั ะดะฐะฝะฝัั,ย
Relation - ะฟะตัะตะฒะพะดะธััั ะบะฐะบ "ะพัะฝะพัะตะฝะธะต" ัะตะณะพ-ัะพ ะบ ัะตะผั-ัะพ, ะปะธะฑะพ ะบะฐะบ "ัะฒัะทั" ัะตะณะพ-ัะพ ั ัะตะผ-ัะพ(ะบะพะณะพ-ัะพ ั ะบะตะผ-ัะพ - ัะพะถะต).

UPDATE -- ะะทะผะตะฝะตะฝะธะต ะทะฐะฟะธัะตะน ะฒ ัะฐะฑะปะธัะตย
ย ย ย ย ย ย ย ย UPDATE ัะฐะฑะปะธัะฐ SET ะฟะพะปะต = ะฒััะฐะถะตะฝะธะต

ย ย ย ย ย ย ย ย UPDATE bookย
ย ย ย ย ย ย ย ย SET price = 0.7 * price;

ย ย ย ย ย ย ย ย SELECT * FROM book;

SET - ะณะปะฐะณะพะป - ัััะฐะฝะพะฒะธ

INSERT - 'ะะฐะฝะตััะธ': ะธะผั ัะฐะฑะปะธัั + ( cะฟะธัะพะบ ะฟะพะปะตะน ัะตัะตะท ะทะฐะฟัััั, ะฒ ะบะพัะพััะต ัะปะตะดัะตั ะทะฐะฝะตััะธ ะฝะพะฒัะต ะดะฐะฝะฝัะต)
VALUES - ััะพ ะธะผะตะฝะฝะพ ะทะฐะฝะตััะธ. ัะฟะธัะพะบ ะทะฝะฐัะตะฝะธะน ัะตัะตะท ะทะฐะฟัััั,ย
ะบะพัะพััะต ะทะฐะฝะพััััั ะฒ ัะพะพัะฒะตัััะฒัััะธะต ะฟะพะปั, ะฟัะธ ััะพะผ ัะตะบััะพะฒัะต ะทะฝะฐัะตะฝะธั ะทะฐะบะปััะฐัััั ะฒ ะบะฐะฒััะบะธ,ย
ัะธัะปะพะฒัะต ะทะฝะฐัะตะฝะธั ะทะฐะฟะธััะฒะฐัััั ะฑะตะท ะบะฐะฒััะตะบ, ะฒ ะบะฐัะตััะฒะต ัะฐะทะดะตะปะธัะตะปั ัะตะปะพะน ะธ ะดัะพะฑะฝะพะน ัะฐััะธ ะธัะฟะพะปัะทัะตััั ัะพัะบะฐ;
ย ย ย ย ย ย ย ย /*INSERT INTO book(title, author, price, amount)
ย ย ย ย ย ย ย ย VALUES ('ะะดะธะพั', 'ะะพััะพะตะฒัะบะธะน ะค.ะ.', 460.00, 10);*/

DELETE - ะณะปะฐะณะพะป "ัะดะฐะปะธ"ย
ย ย ย ย ย ย ย ย DELETE FROM ัะฐะฑะปะธัะฐ; ย- ะญัะพั ะทะฐะฟัะพั ัะดะฐะปัะตั ะฒัะต ะทะฐะฟะธัะธ ะธะท ัะบะฐะทะฐะฝะฝะพะน ะฟะพัะปะต FROM ัะฐะฑะปะธัั.
ย ย ย ย ย ย ย ย /*DELETE FROM supply;*/

DROP - ัะดะฐะปะธัั ัะฐะฑะปะธัั
ย ย ย ย ย ย ย ย ย ย ย ย DROP TABLE applicant;

LIMIT - ััะพะฑั ะพัะพะฑัะฐัั ะทะฐะดะฐะฝะฝะพะต ะบะพะปะธัะตััะฒะพ ะพััะพััะธัะพะฒะฐะฝะฝัั ัััะพะบ ัะตะทัะปััะฐัะฐ ะทะฐะฟัะพัะฐ
ย ย ย ย ย ย ย ย ย ย ย ย/*SELECT *
ย ย ย ย ย ย ย ย ย ย ย ย FROM trip
ย ย ย ย ย ย ย ย ย ย ย ย ORDER BY ยdate_first
ย ย ย ย ย ย ย ย ย ย ย ย LIMIT 1;*/

CASE - "ะ ะกะะฃะงะะ"

WHEN - ย"ะะะะะ"

THEN - ย"ะขะะะะ"
ย ย ย ย ย ย ย ย ย ย ย ย SELECT first_name, last_name,
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย CASE
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย WHEN TIMESTAMPDIFF(YEAR, birthday, NOW()) >= 18 THEN "ะกะพะฒะตััะตะฝะฝะพะปะตัะฝะธะน"
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ELSE "ะะตัะพะฒะตััะตะฝะฝะพะปะตัะฝะธะน"
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย END AS status
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย FROM Student

ย ย ย ย ย ย ย ย ย ย ย ย ย ย CASE ะทะฝะฐัะตะฝะธะต
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย WHEN ััะฐะฒะฝะธะฒะฐะตะผะพะต_ะทะฝะฐัะตะฝะธะต_1 THEN ะฒะพะทะฒัะฐัะฐะตะผะพะต_ะทะฝะฐัะตะฝะธะต_1
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย WHEN ััะฐะฒะฝะธะฒะฐะตะผะพะต_ะทะฝะฐัะตะฝะธะต_2 THEN ะฒะพะทะฒัะฐัะฐะตะผะพะต_ะทะฝะฐัะตะฝะธะต_2
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย WHEN ััะฐะฒะฝะธะฒะฐะตะผะพะต_ะทะฝะฐัะตะฝะธะต_n THEN ะฒะพะทะฒัะฐัะฐะตะผะพะต_ะทะฝะฐัะตะฝะธะต_n
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย [ELSE ะฒะพะทะฒัะฐัะฐะตะผะพะต_ะทะฝะฐัะตะฝะธะต_ะฟะพ-ัะผะพะปัะฐะฝะธั]
ย ย ย ย ย ย ย ย ย ย ย ย ย ย END

REGEXP ย ย ย ย ยhttps://stepik.org/lesson/404275/step/3?auth=login&unit=393473
ย ย ย ย -- ะคัะฝะบัะธั REGEXP ะฒ SQL ะธัะฟะพะปัะทัะตััั ะดะปั ัะพะฟะพััะฐะฒะปะตะฝะธั ัะตะบััะพะฒะพะน ัััะพะบะธย
ย ย ย ย -- ั ัะตะณัะปััะฝัะผ ะฒััะฐะถะตะฝะธะตะผ. ะะฝะฐ ะฒะพะทะฒัะฐัะฐะตั TRUE, ะตัะปะธ ัััะพะบะฐ ัะพะพัะฒะตัััะฒัะตัย
ย ย ย ย -- ัะตะณัะปััะฝะพะผั ะฒััะฐะถะตะฝะธั, ะธ FALSE ะฒ ะฟัะพัะธะฒะฝะพะผ ัะปััะฐะต.

ย ย ย ย ย ย ย ย WHERE ProductName REGEXP 'Phone': ัััะพะบะฐ ะดะพะปะถะฝะฐ ัะพะดะตัะถะฐัั "Phone", ะฝะฐะฟัะธะผะตั, iPhone X, Nokia Phone N, iPhone

ย ย ย ย ย ย ย ย WHERE ProductName REGEXP '^Phone': ัััะพะบะฐ ะดะพะปะถะฝะฐ ะฝะฐัะธะฝะฐัััั ั "Phone", ะฝะฐะฟัะธะผะตั, Phone 34, PhoneX

ย ย ย ย ย ย ย ย WHERE ProductName REGEXP 'Phone$': ัััะพะบะฐ ะดะพะปะถะฝะฐ ะทะฐะบะฐะฝัะธะฒะฐัััั ะฝะฐ "Phone", ะฝะฐะฟัะธะผะตั, iPhone, Nokia Phone

ย ย ย ย ย ย ย ย WHERE ProductName REGEXP 'iPhone [78]';: ัััะพะบะฐ ะดะพะปะถะฝะฐ ัะพะดะตัะถะฐัั ะปะธะฑะพ iPhone 7, ะปะธะฑะพ iPhone 8

ย ย ย ย ย ย ย ย WHERE ProductName REGEXP 'iPhone [6-8]';: ัััะพะบะฐ ะดะพะปะถะฝะฐ ัะพะดะตัะถะฐัั ะปะธะฑะพ iPhone 6, ะปะธะฑะพ iPhone 7, ะปะธะฑะพ iPhone 8

ย ย ย ย ย ย ย ย ะะฐะฟัะธะผะตั, ะฝะฐะนะดะตะผ ัะพะฒะฐัั, ะฝะฐะทะฒะฐะฝะธั ะบะพัะพััั ัะพะดะตัะถะฐั ะปะธะฑะพ "Phone", ะปะธะฑะพ "Galaxy":

ย ย ย ย ย ย ย ย SELECT * FROM Products

ย ย ย ย ย ย ย ย WHERE ProductName REGEXP 'Phone|Galaxy';


COALESCE() ย-- ััะพ ัะฟะตัะธะฐะปัะฝะพะต ะฒััะฐะถะตะฝะธะต, ะบะพัะพัะพะต ะฒััะธัะปัะตั ะฟะพ ะฟะพััะดะบั ะบะฐะถะดัะน ะธะท ัะฒะพะธั ะฐัะณัะผะตะฝัะพะฒ ะธย
ย ย ย ย ย ย --ะฝะฐ ะฒััะพะดะต ะฒะพะทะฒัะฐัะฐะตั ะทะฝะฐัะตะฝะธะต ะฟะตัะฒะพะณะพ ะฐัะณัะผะตะฝัะฐ, ะบะพัะพััะน ะฑัะป ะฝะต NULL.
ย ย ย ย ย ย ย ย ย ย ย ย SELECT COALESCE(NULL, NULL, 1, 2, NULL, 3)
ย ย ย ย ย ย ย ย ย ย ย ย ย ย # 1


ISNULL(columnName, 0) -- ะทะฐะผะตะฝะฐ NULL ะฝะฐ 0


MONTH(ะดะฐัะฐ) - ััะพะฑั ะฒัะดะตะปะธัั ะฝะพะผะตั ะผะตัััะฐ ะธะท ะดะฐััย
ย ย ย ย ย ย ย ย ย ย ย ย /*MONTH('2020-04-12') = 4
ย ย ย ย ย ย ย ย ย ย ย ย MONTH(date_first) ะผะตััั ะธะท ััะพะปะฑัะฐ*/

DAY('2020-02-01') = 1
MONTH('2020-02-01') = 2
YEAR('2020-02-01') = 2020 ย ย ย ย ย ย ย ย ย ย ย ย

MONTHNAME(ะดะฐัะฐ) - ะฒะพะทะฒัะฐัะฐะตั ะฝะฐะทะฒะฐะฝะธะต ะผะตัััะฐ ะฝะฐ ะฐะฝะณะปะธะนัะบะพะผ ัะทัะบะต ะดะปั ัะบะฐะทะฐะฝะฝะพะน ะดะฐัั
ย ย ย ย ย ย ย ย ย ย ย ย /* MONTHNAME('2020-04-12')='April' */


DATEDIFF(ะดะฐัะฐ_1, ะดะฐัะฐ_2) - ัะตะทัะปััะฐัะพะผ ะบะพัะพัะพะน ัะฒะปัะตััั ะบะพะปะธัะตััะฒะพ ะดะฝะตะน ะผะตะถะดั ะดะฐัะฐ_1 ะธ ะดะฐัะฐ_2. ะะฐะฟัะธะผะตั,

ย ย ย ย ย ย ย ย ย ย ย ย /* DATEDIFF('2020-04-01', '2020-03-28')=4

ย ย ย ย ย ย ย ย ย ย ย ย DATEDIFF('2020-05-09','2020-05-01')=8

ย ย ย ย ย ย ย ย ย ย ย ย DATEDIFF(date_last, date_first)*/

CEILING(x)ยย ยะฒะพะทะฒัะฐัะฐะตั ะฝะฐะธะผะตะฝััะตะต ัะตะปะพะต ัะธัะปะพ, ะฑะพะปััะตะต ะธะปะธ ัะฐะฒะฝะพะต x
(ะพะบััะณะปัะตั ะดะพ ัะตะปะพะณะพ ัะธัะปะฐ ะฒ ะฑะพะปัััั ััะพัะพะฝั)ยย ย
ย ย CEILING(4.2)=5
ย ย CEILING(-5.8)=-5

ROUND(x, k)ยย ยะพะบััะณะปัะตั ะทะฝะฐัะตะฝะธะต x ะดะพ k ะทะฝะฐะบะพะฒ ะฟะพัะปะต ะทะฐะฟััะพะน,
ะตัะปะธ k ะฝะต ัะบะฐะทะฐะฝะพ โ x ะพะบััะณะปัะตััั ะดะพ ัะตะปะพะณะพยย ย
ย ย ROUND(4.361)=4
ย ย ROUND(5.86592,1)=5.9
CEIL(x) ยะบะพัะพัะฐั ะฒัะฟะพะปะฝัะตั ะพะบััะณะปะตะฝะธะต ัะธัะปะฐ ะฒะฒะตัั ะดะพ ะฑะปะธะถะฐะนัะตะณะพ ัะตะปะพะณะพ ัะธัะปะฐ.

FLOOR(x)ยย ยะฒะพะทะฒัะฐัะฐะตั ะฝะฐะธะฑะพะปััะตะต ัะตะปะพะต ัะธัะปะพ, ะผะตะฝััะตะต ะธะปะธ ัะฐะฒะฝะพะต x
(ะพะบััะณะปัะตั ะดะพ ยัะตะปะพะณะพ ัะธัะปะฐ ะฒ ะผะตะฝัััั ััะพัะพะฝั)ยย ย
ย ย FLOOR(4.2)=4
ย ย FLOOR(-5.8)=-6

POWER(x, y)ยย ยะฒะพะทะฒะตะดะตะฝะธะต x ะฒ ััะตะฟะตะฝั yยย ย
ย ย POWER(3,4)=81.0

SQRT(x)ยย ยะบะฒะฐะดัะฐัะฝัะน ะบะพัะตะฝั ะธะท xยย ย
ย ย SQRT(4)=2.0
ย ย SQRT(2)=1.41...

DEGREES(x)ยย ยะบะพะฝะฒะตััะธััะตั ะทะฝะฐัะตะฝะธะต x ะธะท ัะฐะดะธะฐะฝ ะฒ ะณัะฐะดัััยย ย
ย ย DEGREES(3) = 171.8...

RADIANS(x)ยย ยะบะพะฝะฒะตััะธััะตั ะทะฝะฐัะตะฝะธะต x ะธะท ะณัะฐะดััะพะฒ ะฒ ัะฐะดะธะฐะฝัยย ย
ย ย RADIANS(180)=3.14...

ABS(x)ยย ยะผะพะดัะปั ัะธัะปะฐ xยย ย
ย ย ABS(-1) = 1
ย ย ABS(1) = 1

PI()ยย ยpi = 3.1415926...

******************************************

ะงะฐััั 2 ะพัะผััะปะตะฝะฝะฐั)
*********
00) ะะพัะผะพััะตัั ัะฐะฑะปะธััย
ย ย ย ย ย ย ย ย ย ย ย ย SHOW COLUMNS FROM book;


ย ย ย ย ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย ย ย ย ย Query result:
ย ย ย ย ย ย ย ย ย ย ย ย +-----------+--------------+------+-----+---------+----------------+
ย ย ย ย ย ย ย ย ย ย ย ย | Field ย ย | Type ย ย ย ย | Null | Key | Default | Extra ย ย ย ย ย|
ย ย ย ย ย ย ย ย ย ย ย ย +-----------+--------------+------+-----+---------+----------------+
ย ย ย ย ย ย ย ย ย ย ย ย | book_id ย | int ย ย ย ย ย| NO ย | PRI | NULL ย ย| auto_increment |
ย ย ย ย ย ย ย ย ย ย ย ย | title ย ย | varchar(50) ย| YES ย| ย ย | NULL ย ย| ย ย ย ย ย ย ย ย|
ย ย ย ย ย ย ย ย ย ย ย ย | author_id | int ย ย ย ย ย| NO ย | MUL | NULL ย ย| ย ย ย ย ย ย ย ย|
ย ย ย ย ย ย ย ย ย ย ย ย | genre_id ย| int ย ย ย ย ย| YES ย| MUL | NULL ย ย| ย ย ย ย ย ย ย ย|
ย ย ย ย ย ย ย ย ย ย ย ย | price ย ย | decimal(8,2) | YES ย| ย ย | NULL ย ย| ย ย ย ย ย ย ย ย|
ย ย ย ย ย ย ย ย ย ย ย ย | amount ย ย| int ย ย ย ย ย| YES ย| ย ย | NULL ย ย| ย ย ย ย ย ย ย ย|
ย ย ย ย ย ย ย ย ย ย ย ย +-----------+--------------+------+-----+---------+----------------+
0) ะกะพะทะดะฐะฝะธะต ัะฐะฑะปะธััย
ย ย ย ย ย ย ย ย ย ย ย ย CREATE TABLE author (author_id INT PRIMARY KEY AUTO_INCREMENT, name_author VARCHAR(50));
ย ย ย ย ย ย ย ย ย ย ย ย SELECT * FROM author;

0.0) ะะฐะฟะพะปะฝะตะฝะธะต ัะฐะฑะปะธัั
ย ย ย ย ย ย ย ย ย ย ย ย INSERT INTO author(name_author)ย
ย ย ย ย ย ย ย ย ย ย ย ย VALUES ('ะัะปะณะฐะบะพะฒ ะ.ะ.'), ('ะะพััะพะตะฒัะบะธะน ะค.ะ.'), ('ะัะตะฝะธะฝ ะก.ะ.'), ('ะะฐััะตัะฝะฐะบ ะ.ะ.');

ย ย ย ย ย ย ย ย ย ย ย ย SELECT * FROM author;

ะะปะธ ัะฐะบ))) https://onecompiler.com/mysqlย
-- CREATE TABLE trainingTeam(
-- trainingTeam_id INTEGER PRIMARY KEY AUTO_INCREMENT,ย
-- name TEXT NOT NULL,ย
-- age INTEGER,ย
-- address TEXT NOT NULL
-- );
-- INSERT INTO trainingTeam(name, age, address)
-- VALUES ('ะัะปะณะฐะบะพะฒ ะ.ะ.', 48, 'ะะพัะบะฒะฐ, ะกะกะกะ'),
-- ('ะะพััะพะตะฒัะบะธะน ะค.ะ.', 59, 'ะกะฐะฝะบั-ะะตัะตัะฑััะณ, ะะพััะธะนัะบะฐั ะธะผะฟะตัะธั'),
-- ('ะัะตะฝะธะฝ ะก.ะ.', 30, 'ะะตะฝะธะฝะณัะฐะด, ะกะกะกะ'),
-- ('ะะฐััะตัะฝะฐะบ ะ.ะ.', 70, 'ะะตัะตะดะตะปะบะธะฝะพ, ะกะกะกะ'),
-- ('ะัะบะฐะฝะดะตั ะค.ะ.', 87, 'ะะตัะตะดะตะปะบะธะฝะพ, ะกะกะกะ');

-- SELECT * FROM trainingTeam;


1) ะะฐะฝะตััะธ ะฒ ัะฐะฑะปะธัั 1 ยะดะฐะฝะฝัะต ยะธะท ัะฐะฑะปะธัั 2 - UPDATE 1,2

ย ย ะะพะผะฐะฝะดะฐ SET ะธัะฟะพะปัะทัะตััั ั UPDATE, ััะพะฑั ัะบะฐะทะฐัั, ะบะฐะบะธะต ััะพะปะฑัั ะธ ะทะฝะฐัะตะฝะธั ะดะพะปะถะฝั ะฑััั ะพะฑะฝะพะฒะปะตะฝั ะฒ ัะฐะฑะปะธัะต.

ย ย ย ย ย ย ย ย ย ย UPDATE applicant_order JOIN (SELECT row_number() over (partition by program_id) AS str_num
ย ย ย ย ย ย ย ย ย ย ย ย ย ย , program_id, enrollee_id, itog
ย ย ย ย ย ย ย ย ย ย ย ย FROM applicant_order) AS t2 USING (program_id, enrollee_id)
ย ย ย ย ย ย ย ย ย ย ย ย SET applicant_order.str_id = t2.str_num;

ย ย ย ย ย ย ย ย ย ย ย ย SELECT * FROM applicant_order;

ย ย ย ย ะัะดััะต ะพััะพัะพะถะฝั ะฟัะธ ะพะฑะฝะพะฒะปะตะฝะธะธ ะทะฐะฟะธัะตะน ะฒ ัะฐะฑะปะธัะต!ย
ย ย ะะฑัะฐัะธัะต ะฒะฝะธะผะฐะฝะธะต ะฝะฐ ะฟัะตะดะปะพะถะตะฝะธะต WHERE ะฒ ะธะฝััััะบัะธะธ UPDATE.ย
ย ย ะัะตะดะปะพะถะตะฝะธะต WHERE ัะบะฐะทัะฒะฐะตั, ะบะฐะบะธะต ะทะฐะฟะธัะธ ะดะพะปะถะฝั ะฑััั ะพะฑะฝะพะฒะปะตะฝั.ย
ย ย ะัะปะธ ะฒั ะพะฟัััะธัะต ะฟัะตะดะปะพะถะตะฝะธะต WHERE, ะฒัะต ะทะฐะฟะธัะธ ะฒ ัะฐะฑะปะธัะต ะฑัะดัั ะพะฑะฝะพะฒะปะตะฝั!

1.1) ALTER TABLE -- ะธะทะผะตะฝะตะฝะธะต ัะฐะฑะปะธััย

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ยALTER TABLE clientย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย DROP FOREIGN KEY fk_client_source1,ย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย DROP COLUMN code,
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย DROP COLUMN source_id;
ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย ย ย ยALTER TABLE ะฝะฐะทะฒะฐะฝะธะต_ัะฐะฑะปะธัั [WITH CHECK | WITH NOCHECK]
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย { ADD ะฝะฐะทะฒะฐะฝะธะต_ััะพะปะฑัะฐ ัะธะฟ_ะดะฐะฝะฝัั_ััะพะปะฑัะฐ [ะฐััะธะฑััั_ััะพะปะฑัะฐ] | -- ะดะพะฑะฐะฒะธะผ ะฒ ะฝะฐัั ัะฐะฑะปะธัั ะฝะพะฒัะน ััะพะปะฑะตั
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย -- ADD author NVARCHAR(50) NOT NULL;
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย DROP COLUMN ะฝะฐะทะฒะฐะฝะธะต_ััะพะปะฑัะฐ | -- ัะดะฐะปะธัั ััะพะปะฑะตั ยDROP COLUMN authors
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ALTER COLUMN ะฝะฐะทะฒะฐะฝะธะต_ััะพะปะฑัะฐ ัะธะฟ_ะดะฐะฝะฝัั_ััะพะปะฑัะฐ [NULL|NOT NULL] | -- ะธะทะผะตะฝะตะฝะธะต ััะพะปะฑัะฐ ะธ ะตะณะพ ัะธะฟะฐ
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย-- ALTER COLUMN book_category VARCHAR(200)
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ADD [CONSTRAINT] ะพะฟัะตะดะตะปะตะฝะธะต_ะพะณัะฐะฝะธัะตะฝะธั | -- ะดะพะฑะฐะฒะปะตะฝะธะต ะฟะตัะฒะธัะฝะพะณะพ ะบะปััะฐย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย-- ADD PRIMARY KEY (book_id)
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย-- ะฒะฝะตัะฝะตะณะพ ะบะปััะฐย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย-- ADD FOREIGN KEY (author_id) REFERENCES authors(author_id)

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย-- ัะพะทะดะฐะฝะธะต ะพะณัะฐะฝะธัะตะฝะธั -- ADD CHECK (Age > 21) ะพัะธะฑะบะฐ ะตัะปะธ ะตััั ะธะฝัะต ะดะฐะฝะฝัะตย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย-- ALTER TABLE Customers WITH NOCHECK ADD CHECK (Age > 21) - ะฝะต ะฒัะทะพะฒะตั ะพัะธะฑะบั
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย-- ะดะพะฑะฐะฒะปะตะฝะธะต ะธะผะตะฝะธ ะพะณัะฐะฝะธัะตะฝะธัย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย-- ALTER TABLE Customers ADD CONSTRAINT Check_Age_Greater_Than_Twenty_One CHECK (Age > 21);
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย-- ัะดะฐะปะตะฝะธะต ะพะณัะฐะฝะธัะตะฝะธั
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย-- ALTER TABLE Customers DROP Check_Age_Greater_Than_Twenty_One;

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ALTER TABLE client
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ADD source_id INT null,
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ADD CONSTRAINT fk_source_id FOREIGN KEY (source_id) REFERENCES source(id);


ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย DROP [CONSTRAINT] ะธะผั_ะพะณัะฐะฝะธัะตะฝะธั} -- ะพะณัะฐะฝะธัะตะฝะธะต ยะธะปะธ ะบะปัั DROP FOREIGN KEY <fk_name>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย-- RENAME COLUMN author TO authors ย-- ะฟะตัะตะธะผะตะฝะพะฒะฐะฝะธะต ััะพะปะฑัะฐ
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย-- ALTER TABLE book RENAME TO books_selectel; ย-- ะฟะตัะตะธะผะตะฝะพะฒะฐะฝะธะต ัะฐะฑะป
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย-- ัะดะฐะปะธัั ัะฐะฑะปะธัั DROP TABLE source;

1.2) ะัะตะดััะฐะฒะปะตะฝะธั (ะฒะธัััะฐะปัะฝะฐั ัะฐะฑะปะธัะฐ)
ย ย ย ย ย ย ย ย CREATE VIEW ViewUsers AS
ย ย ย ย ย ย ย ย ย ย ย SELECT id, name,
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ยCONCAT(SUBSTR(email, 1, 2), '****', SUBSTR(email, -4)) AS email
ย ย ย ย ย ย ย ย ย ย ย ย FROM Users;

ย ย ย ย ย ย ย ย DESCRIBE ViewUsers; -- ะฟะพัะผะพััะตัั ััะพะปะฑัั ะฟัะตะดััะฐะฒะปะตะฝะธั
ย ย ย ย ย ย ย ย DROP VIEW view_name; -- ัะดะฐะปะตะฝะธะต ะฟัะตะดััะฐะฒะปะตะฝะธั

ย ย ย ย ย ย ย ย OR REPLACE -- ะฟัะธ ะธัะฟะพะปัะทะพะฒะฐะฝะธะธ ััะพะณะพ ะพะฟัะธะพะฝะฐะปัะฝะพะณะพ ะฟะฐัะฐะผะตััะฐ ะฒ ัะปััะฐะต, ะตัะปะธ ะฟัะตะดััะฐะฒะปะตะฝะธะต ั ัะฐะบะธะผ ะธะผะตะฝะตะผ ัะถะต ัััะตััะฒัะตั,ย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย-- ััะฐัะพะต ะฟัะตะดััะฐะฒะปะตะฝะธะต ะฑัะดะตั ัะดะฐะปะตะฝะพ, ะฐ ะฝะพะฒะพะต ัะพะทะดะฐะฝะพ.ย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย-- ะ ะฟัะพัะธะฒะฝะพะผ ัะปััะฐะต, ะฟัะธ ะฟะพะฟััะบะต ัะพะทะดะฐัั ะฟัะตะดััะฐะฒะปะตะฝะธะต ั ัััะตััะฒัััะตะผ ะธะผะตะฝะตะผ, ะฒะพะทะฝะธะบะฝะตั ะพัะธะฑะบะฐ.

ย ย ย ย ย ย ย ย CREATE [OR REPLACE]
ย ย ย ย ย ย ย ย VIEW ะธะผั_ะฟัะตะดััะฐะฒะปะตะฝะธั [(ะธะผะตะฝะฐ_ะฟะพะปะตะน_ะฟัะตะดััะฐะฒะปะตะฝะธั)]
ย ย ย ย ย ย ย ย AS select_ะฒััะฐะถะตะฝะธะต

1.3) ะะฐัะตัะธะฐะปะธะทะพะฒะฐะฝะฝัะต ะฟัะตะดััะฐะฒะปะตะฝะธั -- ะะฐะฝะฝัะน ัะธะฟ ะฟัะตะดััะฐะฒะปะตะฝะธะน ะพะดะธะฝ ัะฐะท ะฒัะฟะพะปะฝัะตั ะทะฐะฟัะพั ะธ ััะฐะฝะธั ะดะฐะฝะฝัะต.
ย ย ย ย ย ย ย ย CREATE MATERIALIZED VIEW view_name AS
ย ย ย ย ย ย ย ย SELECT columns
ย ย ย ย ย ย ย ย ย FROM tables;

ย ย ย ย ย ย ย ย REFRESH MATERIALIZED VIEW view_name; -- ะพะฑะฝะพะฒะปะตะฝะธั ะดะฐะฝะฝัั

2) ะกะพะทะดะฐัั ัะฐะฑะปะธัั ะฝะฐ ะพัะฝะพะฒะต ะดะฐะฝะฝัั ะธะท ะดััะณะพะน ัะฐะฑะปะธัั.ย
ย ย ย ย ย ย ะะปั ััะพะณะพ ะธัะฟะพะปัะทัะตััั ะทะฐะฟัะพั SELECT,ย
ย ย ย ย ัะตะทัะปััะธััััะฐั ัะฐะฑะปะธัะฐ ะบะพัะพัะพะณะพ ะธ ะฑัะดะตั ะฝะพะฒะพะน ัะฐะฑะปะธัะตะน ะฑะฐะทั ะดะฐะฝะฝัั.ย
ย ย ย ย ะัะธ ััะพะผ ะธะผะตะฝะฐ ััะพะปะฑัะพะฒ ะทะฐะฟัะพัะฐ ััะฐะฝะพะฒัััั ะธะผะตะฝะฐะผะธ ััะพะปะฑัะพะฒ ะฝะพะฒะพะน ัะฐะฑะปะธัั.
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย CREATE TABLE ะธะผั_ัะฐะฑะปะธัั AS
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย SELECT ...
ย ย ย ย ะัะธะผะตั

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย CREATE TABLE ordering AS
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย SELECT author, title, 5 AS amount
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย FROM book
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย WHERE amount < 4;
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย SELECT * FROM ordering;

3) ะฃะดะฐะปะธัั ะธะท ัะฐะฑะปะธัั ะธะฝัะพัะผะฐัะธั
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย DELETE FROM fine
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย WHERE date_violation < '2020-02-01';

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย SELECT * FROM fine

4) REPLACE -- ะทะฐะผะตะฝัะตั ะฒ ัััะพะบะต_1 ะฒัะต ะฒัะพะถะดะตะฝะธั ัััะพะบะธ_2 ะฝะฐ ัััะพะบั_3
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย REPLACE(ัััะพะบะฐ1, ัััะพะบะฐ2, ัััะพะบะฐ3)
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย UPDATE Ships
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย SET name = REPLACE(name, ' ', '-');

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย SELECT name, LEN(REPLACE(name, 'a', 'aa')) - LEN(name)ย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย FROM Ships;


5) ะบะฐะบะธะต ัะฐะฑะปะธัั(ะฒัะต) ัะพะทะดะฐะฝั ะฒ ะะ:

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย SELECT table_name, engine
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย FROM information_schema.tables
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย WHERE engine = 'InnoDB';

6) ะัะฑะพัะบะฐ
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย SELECT ยname_genre, title, name_author
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย FROM
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย genreย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย INNER JOIN ยbook ON genre.genre_id = book.genre_id
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย INNER JOIN ยauthor ON author.author_id = book.author_id
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย WHERE name_genre IN ('ะะพะผะฐะฝ') /* WHERE name_genre LIKE"% ัะพะผะฐะฝ %"*/
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ORDER BY title;

7) ะะพะปะปะธัะตััะฒะพ ะฑะตะท NULL
ย ย ย ย ย ย ย ย ย ย ย ย ย ย SELECT name_author, COALESCE(SUM(amount), 0) AS ะะพะปะธัะตััะฒะพ
ย ย ย ย ย ย ย ย ย ย ย ย ย ย FROMย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย author LEFT JOIN book
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย on author.author_id = book.author_id ยย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย GROUP BY name_author
ย ย ย ย ย ย ย ย ย ย ย ย ย ย HAVING ะะพะปะธัะตััะฒะพ < 10 /*HAVING IFNULL(SUM(book.amount), 0) < 10*/ย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ORDER BY ะะพะปะธัะตััะฒะพ;ย
7.1) ะะฐะผะตะฝะฐ NULL ะฝะฐ 0
ย ย ย ย ย ย ย ย ย ย ย ย ย ย IFNULL(ะฒััะฐะถะตะฝะธะต, ัะตะทัะปััะฐั)
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ยะบะพัะพัะฐั ะฒะพะทะฒัะฐัะฐะตั ัะตะทัะปััะฐั, ะตัะปะธ ะฒััะฐะถะตะฝะธะต ัะฐะฒะฝะพ NULL,ย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ยะธ ัะฐะผะพ ะฒััะฐะถะตะฝะธะต ะฒ ะฟัะพัะธะฒะฝะพะผ ัะปััะฐะต.
7.2) COALESCE() --ะฒ SQL ะธัะฟะพะปัะทัะตััั ะดะปั ะทะฐะผะตะฝั ะฝัะปะตะฒัั ะทะฝะฐัะตะฝะธะน ะฝะฐ ะดััะณะพะต ะทะฝะฐัะตะฝะธะต.ย
ย ย ย ย ย ย ย ย ย-- ะะฝะฐ ะฟัะธะฝะธะผะฐะตั ัะฟะธัะพะบ ะฐัะณัะผะตะฝัะพะฒ ะธ ะฒะพะทะฒัะฐัะฐะตั ะฟะตัะฒะพะต ะฝะต-NULL ะทะฝะฐัะตะฝะธะต ะธะท ััะพะณะพ ัะฟะธัะบะฐ.ย
ย ย ย ย ย ย ย ย ย-- ะัะปะธ ะฒัะต ะฐัะณัะผะตะฝัั ัะฐะฒะฝั NULL, ะพะฝะฐ ะฒะพะทะฒัะฐัะฐะตั NULL.
ย ย ย ย ย ย ย ย ยCOALESCE(x, y)

7.3) ISNULL() -- ะญัะฐ ััะฝะบัะธั ะพะฑััะฝะพ ะธัะฟะพะปัะทัะตััั ะฒ Microsoft SQL Server. ะะฝะฐ ะฟัะพะฒะตััะตั, ัะฒะปัะตััั ะปะธ ะทะฝะฐัะตะฝะธะต NULL,ย
ย ย ย ย ย ย ย -- ะธ ะฒะพะทะฒัะฐัะฐะตั 1 (True) ะตัะปะธ ะทะฝะฐัะตะฝะธะต NULL, ะธ 0 (False) ะฒ ะฟัะพัะธะฒะฝะพะผ ัะปััะฐะต. ะกะธะฝัะฐะบัะธั:
ย ย ย ย ย ย ย ISNULL(expression, replacement_value)


8) ะะัะตะดะตะฝะตะฝะธะต ะทะฐะฟัะพัะพะฒ ยUNION:

ย ย ย ย ย ย ย ย ย ย ย ย ย ย <ะทะฐะฟัะพั 1>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย UNION [ALL]
ย ย ย ย ย ย ย ย ย ย ย ย ย ย <ะทะฐะฟัะพั 2> ย

9) ะฟัะตะดััะฐะฒะธัั ัะตะทัะปััะฐั ะฒ ะพะดะธะฝ ััะพะปะฑะตั, ะฒะพัะฟะพะปัะทัะตะผัั ััะฝะบัะธะตะน ยCOALESCE:


ย ย ย ย ย ย ย ย ย ย ย ย ย ย SELECT COALESCE(m_pc.maker, m_printer.maker)
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ยFROM
ย ย ย ย ย ย ย ย ย ย ย ย ย ย (SELECT DISTINCT maker FROM Product WHERE type='pc') m_pc
ย ย ย ย ย ย ย ย ย ย ย ย ย ย FULL JOIN
ย ย ย ย ย ย ย ย ย ย ย ย ย ย (SELECT DISTINCT maker FROM Product WHERE type='printer') m_printer
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ON m_pc.maker = m_printer.maker ยย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย WHERE m_pc.maker IS NULL OR m_printer.maker IS NULL;ย

10) ะ ัะปััะฐะต ะฟะตัะตัะตัะตะฝะธั ะธ ัะฐะทะฝะพััะธ ะผะพะถะฝะพ ะฒะพัะฟะพะปัะทะพะฒะฐัััั ะฟัะตะดะธะบะฐัะพะผ ัััะตััะฒะพะฒะฐะฝะธั EXISTS.

ย ย ะฐ ัะฐะบะถะต INTERSECT/EXCEPT ะตัะปะธ ะกะฃะะ ะฟะพะดะดะตัะถะธะฒะฐะตั

11) CONVERT

ย ย ย ย ย ย ย ย ย ย ย ย ย ย SELECT CONVERT(NUMERIC(6,2),AVG(numGuns*1.0)) AS ngAVGย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย FROM Classes
ย ย ย ย ย ย ย ย ย ย ย ย ย ย WHERE type = 'bb'


ย ย ย ย ย ย ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย ย ยย
12) ะะบะพะฝะฝัะต ััะฝะบัะธะธ

ย ย ย ย ย ย -- ะะณัะตะณะธััััะธะต

ย ย ย ย ย ย ย ย ย ย ย ย ย ย select name, subject, grade,
ย ย ย ย ย ย ย ย ย ย ย ย ย ย sum(grade) over (partition by name) as sum_grade,
ย ย ย ย ย ย ย ย ย ย ย ย ย ย avg(grade) over (partition by name) as avg_grade,
ย ย ย ย ย ย ย ย ย ย ย ย ย ย count(grade) over (partition by name) as count_grade,
ย ย ย ย ย ย ย ย ย ย ย ย ย ย min(grade) over (partition by name) as min_grade,
ย ย ย ย ย ย ย ย ย ย ย ย ย ย max(grade) over (partition by name) as max_grade
ย ย ย ย ย ย ย ย ย ย ย ย ย ย from student_grades;

ย ย ย ย ย ย -- ะะฐะฝะถะธััััะธะต

ย ย ย ย ย ย ย ย ย ย ย ย ย ย select name, subject, grade,
ย ย ย ย ย ย ย ย ย ย ย ย ย ย row_number() over (partition by name order by grade desc),
ย ย ย ย ย ย ย ย ย ย ย ย ย ย rank() over (partition by name order by grade desc),
ย ย ย ย ย ย ย ย ย ย ย ย ย ย dense_rank() over (partition by name order by grade desc)
ย ย ย ย ย ย ย ย ย ย ย ย ย ย from student_grades;

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ROW_NUMBER() over() -- ะฟัะพััะพ ะฝัะผะตัะฐัะธั ัััะพะบ;

ย ย ย ย ย ย ย ย ย ย ย ย ย ย RANK() over() -- ัะฐะฝะถะธัะพะฒะฐะฝะธะต ัััะพะบ - ะฟัะธ ะพะดะธะฝะฐะบะพะฒะพะผ ะทะฝะฐัะตะฝะธะธ ัััะพะบะฐะผ ะฟัะธัะฒะฐะธะฒะฐะตััั ะพะดะธะฝ ะฝะพะผะตั,
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย -- ั ะฟัะพะฟััะบะพะผ ะฝะพะผะตัะพะฒ;

ย ย ย ย ย ย ย ย ย ย ย ย ย ย DENSE_RANK() over()-- ัะฐะฝะถะธัะพะฒะฐะฝะธะต ัััะพะบ ะฑะตะท ะฟัะพะฟััะบะฐ ะฝะพะผะตัะพะฒ;

ย ย ย ย ย ย -- ะคัะฝะบัะธะธ ัะผะตัะตะฝะธั

ย ย ย ย ย ย ย ย ย ย ย ย ย ย LAG() - ะฒัะฑะธัะฐะตั ัััะพะบั, ะฟัะตะดัะตััะฒััััั ัะตะบััะตะน, ะตัะปะธ ัะฐะบะพะฒะพะน ะฝะตั - ะฒัะดะฐะตััั NULL;

ย ย ย ย ย ย ย ย ย ย ย ย ย ย LEAD() - ะฒัะฑะธัะฐะตั ัััะพะบั, ัะปะตะดััััั ะทะฐ ัะตะบััะตะน, ะตัะปะธ ัะฐะบะพะฒะพะน ะฝะตั - ะฒัะดะฐะตััั NULL.ย

ย ย ย ย ย ย ย ย ย ย ย ย ย ย LAG(code) OVER(ORDER BY code) prev_code

ย ย ย ย ย ย ย ย ย ย ย ย ย ย LAG(code,1,-999) OVER(ORDER BY code) prev_code -- ย-999 ะะฝะฐัะตะฝะธะต ััะพะณะพ ะฟะฐัะฐะผะตััะฐ ะฑัะดะตัย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย -- ะธัะฟะพะปัะทะพะฒะฐัััั ะฒ ัะพะผ ัะปััะฐะต, ะตัะปะธ ัะพะพัะฒะตัััะฒัััะตะน ัััะพะบะธ ะฝะต ัััะตััะฒัะตั

ย ย ย ย ย ย ย ย ย ย ย ย ย ย LAG(code,2,-999) OVER(ORDER BY code) prev_code -- 2 ะบะฐะบัั ะธะท ะฟัะตะดัะดััะธั (ะฟะพัะปะตะดัััะธั)ย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย -- ัััะพะบ ัะปะตะดัะตั ะธัะฟะพะปัะทะพะฒะฐัั, ั.ะต. ะฝะฐ ัะบะพะปัะบะพ ะดะฐะฝะฝะฐั ัััะพะบะฐ ะพัััะพะธั ะพั ัะตะบััะตะน

ย ย ย ย ย ย ย ย ย ย ย ย ย ย /* ะคัะฝะบัะธั ะผะพะถะฝะพ ะธัะฟะพะปัะทะพะฒะฐัั ะดะปั ัะพะณะพ, ััะพะฑั ััะฐะฒะฝะธะฒะฐัั ัะตะบััะตะต ะทะฝะฐัะตะฝะธะต ัััะพะบะธ ั ะฟัะตะดัะดััะธะผ ะธะปะธ ัะปะตะดัััะธะผ.ย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ยะะผะตะตั ััะธ ะฟะฐัะฐะผะตััะฐ: ััะพะปะฑะตั, ะทะฝะฐัะตะฝะธะต ะบะพัะพัะพะณะพ ะฝะตะพะฑัะพะดะธะผะพ ะฒะตัะฝััั, ะบะพะปะธัะตััะฒะพ ัััะพะบ ะดะปั ัะผะตัะตะฝะธั (ะฟะพ ัะผะพะปัะฐะฝะธั 1),ย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ยะทะฝะฐัะตะฝะธะต, ะบะพัะพัะพะต ะฝะตะพะฑัะพะดะธะผะพ ะฒะตัะฝััั ะตัะปะธ ะฟะพัะปะต ัะผะตัะตะฝะธั ะฒะพะทะฒัะฐัะฐะตััั ะทะฝะฐัะตะฝะธะต NULL;*/

ย ย ย ย ย ย ย ย ย ย ย ย ย ย FIRST_VALUE() -- ั ะฟะพะผะพััั ััะฝะบัะธะธ ะผะพะถะฝะพ ะฟะพะปััะธัั ะฟะตัะฒะพะต ะทะฝะฐัะตะฝะธะต ะฒ ะพะบะฝะต.
ย ย ย ย ย ย ย ย ย ย ย ย ย ย LAST_VALUE() -- ั ะฟะพะผะพััั ััะฝะบัะธะธ ะผะพะถะฝะพ ะฟะพะปััะธะขั ะฟะพัะปะตะดะฝะตะต ะทะฝะฐัะตะฝะธะต ะฒ ะพะบะฝะต.ย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย /*ะ ะบะฐัะตััะฒะต ะฟะฐัะฐะผะตััะฐ ะฟัะธะฝะธะผะฐะตั ััะพะปะฑะตั, ะทะฝะฐัะตะฝะธะต ะบะพัะพัะพะณะพ ะฝะตะพะฑัะพะดะธะผะพ ะฒะตัะฝััั.*/ ย ย ย ย ย ย ย ย ย ย ยย

ย ย ย ย ย ย -- ะะฝะฐะปะธัะธัะตัะบะธะต ััะฝะบัะธะธ
ย ย ย ย ย ย ย ย ย ย ย ย ย ย -- ััะพ ััะฝะบัะธะธ ะบะพัะพััะต ะฒะพะทะฒัะฐัะฐัั ะธะฝัะพัะผะฐัะธั ะพ ัะฐัะฟัะตะดะตะปะตะฝะธะธ ะดะฐะฝะฝัั ะธ ะธัะฟะพะปัะทััััั ะดะปั ััะฐัะธััะธัะตัะบะพะณะพ ะฐะฝะฐะปะธะทะฐ.

ย ย ย ย ย ย ย ย ย ย ย ย ย ย CUME_DIST -- ะฒััะธัะปัะตั ะธะฝัะตะณัะฐะปัะฝะพะต ัะฐัะฟัะตะดะตะปะตะฝะธะต (ะพัะฝะพัะธัะตะปัะฝะพะต ะฟะพะปะพะถะตะฝะธะต) ะทะฝะฐัะตะฝะธะน ะฒ ะพะบะฝะต;
ย ย ย ย ย ย ย ย ย ย ย ย ย ย PERCENT_RANK -- ะฒััะธัะปัะตั ะพัะฝะพัะธัะตะปัะฝัะน ัะฐะฝะณ ัััะพะบะธ ะฒ ะพะบะฝะต;
ย ย ย ย ย ย ย ย ย ย ย ย ย ย PERCENTILE_CONT -- ะฒััะธัะปัะตั ะฟัะพัะตะฝัะธะปั ะฝะฐ ะพัะฝะพะฒะต ะฟะพััะพัะฝะฝะพะณะพ ัะฐัะฟัะตะดะตะปะตะฝะธั ะทะฝะฐัะตะฝะธั ััะพะปะฑัะฐ.ย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย -- ะ ะบะฐัะตััะฒะต ะฟะฐัะฐะผะตััะฐ ะฟัะธะฝะธะผะฐะตั ะฟัะพัะตะฝัะธะปั, ะบะพัะพััะน ะฝะตะพะฑัะพะดะธะผะพ ะฒััะธัะปะธัั (ะฝะฐะฟัะธะผะตั ะฟะพััะธัะฐัั ะผะตะดะธะฐะฝั);
ย ย ย ย ย ย ย ย ย ย ย ย ย ย PERCENTILE_DISC -- ะฒััะธัะปัะตั ะพะฟัะตะดะตะปะตะฝะฝัะน ะฟัะพัะตะฝัะธะปั ะดะปั ะพััะพััะธัะพะฒะฐะฝะฝัั ะทะฝะฐัะตะฝะธะน ะฒ ะฝะฐะฑะพัะต ะดะฐะฝะฝัั.ย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย -- ะ ะบะฐัะตััะฒะต ะฟะฐัะฐะผะตััะฐ ะฟัะธะฝะธะผะฐะตั ะฟัะพัะตะฝัะธะปั, ะบะพัะพััะน ะฝะตะพะฑัะพะดะธะผะพ ะฒััะธัะปะธัั.
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ะะฐะถะฝะพ! ะฃ ััะฝะบัะธะน PERCENTILE_CONT ะธ PERCENTILE_DISC, ััะพะปะฑะตั,ย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ะฟะพ ะบะพัะพัะพะผั ะฑัะดะตั ะฟัะพะธััะพะดะธัั ัะพััะธัะพะฒะบะฐ, ัะบะฐะทัะฒะฐะตััั ั ะฟะพะผะพััั ะบะปััะตะฒะพะณะพ ัะปะพะฒะฐ WITHIN GROUP.

ย ย ย ย ย ย ย ย ย ย ย ย ย ย SELECTย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย Date
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย , Medium
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย , Conversions
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย , CUME_DIST() OVER(PARTITION BY Date ORDER BY Conversions) AS 'Cume_Dist'ย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย , PERCENT_RANK() OVER(PARTITION BY Date ORDER BY Conversions) AS 'Percent_Rank'ย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย , PERCENTILE_CONT(0.5) WITHIN GROUP (ORDER BY Conversions) OVER(PARTITION BY Date) AS 'Percentile_Cont'ย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย , PERCENTILE_DISC(0.5) WITHIN GROUP (ORDER BY Conversions) OVER(PARTITION BY Date) AS 'Percentile_Disc'
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย FROM Orders

12.1) ROWS ะธะปะธ RANGE

ย ย ย ย ะะฝััััะบัะธั ROWS -- ะฟะพะทะฒะพะปัะตั ะพะณัะฐะฝะธัะธัั ัััะพะบะธ ะฒ ะพะบะฝะต, ัะบะฐะทัะฒะฐั ัะธะบัะธัะพะฒะฐะฝะฝะพะต ะบะพะปะธัะตััะฒะพ ัััะพะบ, ะฟัะตะดัะตััะฒัััะธั ะธะปะธ ัะปะตะดัััะธั ะทะฐ ัะตะบััะตะน.

ย ย ย ย ย ย ย ย ย ย sum(revenue) OVER(ORDER BY date, revenue rows between unbounded preceding and current row) as total_revenue
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย ย ย sum(arpu) OVER(ORDER BY date, arpu ROWS UNBOUNDED PRECEDING) as running_arpu -- ัะตะบััะฐั + ะฟัะตะดะธะดััะฐั

ย ย ย ย ย ย ย ย ย ย -- ะฝะต ะพะณัะฐะฝะธัะธะฒะฐะตะผ ะดะธะฐะฟะพะทะพะฝ ัััะพะบ
ย ย ย ย ย ย ย ย ย ย ROWS BETWEEN CURRENT ROW AND 1 FOLLOWING -- ะฒ ะพะบะฝะพ ะฟะพะฟะฐะดัั ัะตะบััะฐั ะธ ะพะดะฝะฐ ัะปะตะดัััะฐั ะทะฐะฟะธัั;
ย ย ย ย ย ย ย ย ย ย BETWEEN UNBOUNDED PRECEDING ย-- ะัะต, ััะพ ะดะพ ัะตะบััะตะน ัััะพะบะธ/ะดะธะฐะฟะฐะทะพะฝะฐ
ย ย ย ย ย ย ย ย ย ย BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW -- ะัะต, ััะพ ะดะพ ัะตะบััะตะน ัััะพะบะธ/ะดะธะฐะฟะฐะทะพะฝะฐ ะธ ัะฐะผะพ ะทะฝะฐัะตะฝะธะต ัะตะบััะตะน ัััะพะบะธ
ย ย ย ย ย ย ย ย ย ย BETWEEN CURRENT ROW AND UNBOUNDED FOLLOWING -- ะขะตะบััะฐั ัััะพะบะฐ/ะดะธะฐะฟะฐะทะพะฝ ะธ ะฒัะต, ััะพ ะฟะพัะปะต ะฝะตะต

ย ย ย ย ย ย ย ย ย ย -- ะบะพะฝะบัะตัะฝะพะต ะพะณัะฐะฝะธัะตะฝะธะต ะดะธะฐะฟะพะทะพะฝะฐ ัััะพะบ
ย ย ย ย ย ย ย ย ย ย BETWEEN <ัะตะปะพะต ัะธัะปะพ> Preceding AND <ัะตะปะพะต ัะธัะปะพ> Following -- ัะบะพะปัะบะพ ัััะพะบ ะดะพ ะธ ะฟะพัะปะต ะฒะบะปััะฐัั (ะฝะต ะฟะพะดะดะตัะถะธะฒะฐะตััั ะดะปั RANGE)
ย ย ย ย ย ย ย ย ย ย BETWEEN CURRENT ROW AND <ัะตะปะพะต ัะธัะปะพ> Following -- ัะบะพะปัะบะพ ัััะพะบ ะดะพ ะธ ะฟะพัะปะต ะฒะบะปััะฐัั (ะฝะต ะฟะพะดะดะตัะถะธะฒะฐะตััั ะดะปั RANGE)
ย ย ย ย ย ย ย ย ย ย BETWEEN <ัะตะปะพะต ัะธัะปะพ> Preceding AND CURRENT ROW -- ัะบะพะปัะบะพ ัััะพะบ ะดะพ ะธ ะฟะพัะปะต ะฒะบะปััะฐัั (ะฝะต ะฟะพะดะดะตัะถะธะฒะฐะตััั ะดะปั RANGE)
ย ย ย ย ย
ย ย ย ย UNBOUNDED PRECEDING โ ัะบะฐะทัะฒะฐะตั, ััะพ ะพะบะฝะพ ะฝะฐัะธะฝะฐะตััั ั ะฟะตัะฒะพะน ัััะพะบะธ ะณััะฟะฟั;
ย ย ย ย UNBOUNDED FOLLOWING โ ั ะฟะพะผะพััั ะดะฐะฝะฝะพะน ะธะฝััััะบัะธะธ ะผะพะถะฝะพ ัะบะฐะทะฐัั, ััะพ ะพะบะฝะพ ะทะฐะบะฐะฝัะธะฒะฐะตััั ะฝะฐ ะฟะพัะปะตะดะฝะตะน ัััะพะบะต ะณััะฟะฟั;
ย ย ย ย CURRENT ROW โ ะธะฝััััะบัะธั ัะบะฐะทัะฒะฐะตั, ััะพ ะพะบะฝะพ ะฝะฐัะธะฝะฐะตััั ะธะปะธ ะทะฐะบะฐะฝัะธะฒะฐะตััั ะฝะฐ ัะตะบััะตะน ัััะพะบะต;
ย ย ย ย BETWEEN ยซะณัะฐะฝะธัะฐ ะพะบะฝะฐยป AND ยซะณัะฐะฝะธัะฐ ะพะบะฝะฐยป โ ัะบะฐะทัะฒะฐะตั ะฝะธะถะฝัั ะธ ะฒะตััะฝัั ะณัะฐะฝะธัั ะพะบะฝะฐ;
ย ย ย ย <ัะตะปะพะต ัะธัะปะพ> PRECEDING โ ะพะฟัะตะดะตะปัะตั ัะธัะปะพ ัััะพะบ ะฟะตัะตะด ัะตะบััะตะน ัััะพะบะพะน (ะฝะต ะดะพะฟััะบะฐะตััั ะฒ ะฟัะตะดะปะพะถะตะฝะธะธ RANGE).;
ย ย ย ย <ัะตะปะพะต ัะธัะปะพ> FOLLOWING โ ะพะฟัะตะดะตะปัะตั ัะธัะปะพ ัััะพะบ ะฟะพัะปะต ัะตะบััะตะน ัััะพะบะธ (ะฝะต ะดะพะฟััะบะฐะตััั ะฒ ะฟัะตะดะปะพะถะตะฝะธะธ RANGE).
ย
ย ยย
ย ย ย ย ะะฝััััะบัะธั RANGE --, ะฒ ะพัะปะธัะธะต ะพั ROWS, ัะฐะฑะพัะฐะตั ะฝะต ัะพ ัััะพะบะฐะผะธ, ะฐ ั ะดะธะฐะฟะฐะทะพะฝะพะผ ัััะพะบ ะฒ ะธะฝััััะบัะธะธ ORDER BY.ย
ย ย ย ย ย ย ะขะพ ะตััั ะฟะพะด ะพะดะฝะพะน ัััะพะบะพะน ะดะปั RANGE ะผะพะณัั ะฟะพะฝะธะผะฐัััั ะฝะตัะบะพะปัะบะพ ัะธะทะธัะตัะบะธั ัััะพะบ ะพะดะธะฝะฐะบะพะฒัั ะฟะพ ัะฐะฝะณั.
ย ย ย ย ย ย ะัะตะดะปะพะถะตะฝะธะต RANGE ะผะพะถะตั ะธัะฟะพะปัะทะพะฒะฐัััั ัะพะปัะบะพ ั ะพะฟัะธัะผะธ CURRENT ROW, UNBOUNDED PRECEDING ะธ UNBOUNDED FOLLOWING.
ย ย ย ย ย ยย
ย ย ย ย ย ย ะัะตะดะปะพะถะตะฝะธะต RANGE ะฟัะตะดะฝะฐะทะฝะฐัะตะฝะพ ัะฐะบะถะต ะดะปั ะพะณัะฐะฝะธัะตะฝะธั ะฝะฐะฑะพัะฐ ัััะพะบ.ย
ย ย ย ย ย ย ะ ะพัะปะธัะธะต ะพั ROWS, ะพะฝะพ ัะฐะฑะพัะฐะตั ะฝะต ั ัะธะทะธัะตัะบะธะผะธ ัััะพะบะฐะผะธ, ะฐ ั ะดะธะฐะฟะฐะทะพะฝะพะผ ัััะพะบ ะฒ ะฟัะตะดะปะพะถะตะฝะธะธ ORDER BY.ย
ย ย ย ย ย ย ะญัะพ ะพะทะฝะฐัะฐะตั, ััะพ ะพะดะธะฝะฐะบะพะฒัะต ะฟะพ ัะฐะฝะณั ัััะพะบะธ ะฒ ะบะพะฝัะตะบััะต ะฟัะตะดะปะพะถะตะฝะธั ORDER BY ะฑัะดัั ััะธัะฐัััั ะบะฐะบ ะพะดะฝะฐย
ย ย ย ย ย ย ัะตะบััะฐั ัััะพะบะฐ ะดะปั ััะฝะบัะธะธ CURRENT ROW. ะ ะฒ ะฟัะตะดะปะพะถะตะฝะธะธ ROWS ัะตะบััะฐั ัััะพะบะฐ โ ััะพ ะพะดะฝะฐ, ัะตะบััะฐั ัััะพะบะฐ ะฝะฐะฑะพัะฐ ะดะฐะฝะฝัั.


13) ะัะฑะพั ัะปััะฐะนะฝัั ัััะพะบ ะฒ ะพะดะธะฝ ะทะฐะฟัะพั


ย ย ย ย ย ย ย ยะฑัััััะนย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย MAX * rand()

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ะะพะปััะตะฝะธะต ะพะดะฝะพะน ัััะพะบะธ:
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย SELECT t.pk_id FROM test as t,
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย (SELECT ROUND((SELECT MAX(pk_id) FROM test) *rand()) as rndย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย FROM test LIMIT 1) tmp
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย WHERE t.pk_id = rnd

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ะกัะตะดะฝะตะต ะฒัะตะผั ะฒัะฟะพะปะฝะตะฝะธั โ 0.001 ัะตะบัะฝะดั
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ะะพะปััะตะฝะธะต 100 ัััะพะบ:
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย SELECT t.pk_id FROM test as t,
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย (SELECT ROUND((SELECT MAX(pk_id) FROM test) *rand()) as rndย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย FROM test LIMIT 100) tmp
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย WHERE t.pk_id in (rnd)
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ORDER BY pk_id
ย ย ย ย ย ย ย ยะฝะฐะดะตะถะฝัะน
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ORDER BY rand + LIMIT

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ะะทะพะฑัะฐะถะตะฝะธะต ะฝะต ะทะฐะณััะถะตะฝะพ

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ะะพะปััะตะฝะธะต ะพะดะฝะพะน ัััะพะบะธ:
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย SELECT pk_id FROM test ORDER BY rand() LIMIT 1

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ะกัะตะดะฝะตะต ะฒัะตะผั ะฒัะฟะพะปะฝะตะฝะธั ะฒ MySQL โ 6.150 ัะตะบัะฝะด

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ะะพะฟัะพะฑัะตะผ ะฒะทััั 100 ะทะฐะฟะธัะตะน
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย SELECT pk_id FROM test ORDER BY rand() LIMIT 100

14) LEFT -- ะงัะพะฑั ะฒัะดะตะปะธัั ะบัะฐะนะฝะธะต ะปะตะฒัะต n ัะธะผะฒะพะปะพะฒ ะธะท ัััะพะบะธ ะธัะฟะพะปัะทัะตััั ััะฝะบัะธั LEFT(ัััะพะบะฐ, n):

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย LEFT("abcde", 3) -> "abc"


15) CONCAT -- ะกะพะตะดะธะฝะตะฝะธะต ัััะพะบ ะพัััะตััะฒะปัะตััั ั ะฟะพะผะพััั ััะฝะบัะธะธ CONCAT(ัััะพะบะฐ_1, ัััะพะบะฐ_2):

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย CONCAT("ab","cd") -> "abcd"

ย ย CONCAT --ะัะปะธ ัะพัั ะฑั ะพะดะธะฝ ะธะท ะฐัะณัะผะตะฝัะพะฒ ัะฐะฒะตะฝ NULL, ะฒะพะทะฒัะฐัะฐะตััั ะทะฝะฐัะตะฝะธะต NULL.

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย SELECT CONCAT('sql', '-', 'academy');

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย SELECT CONCAT('sql', NULL);

ย ยย

16) FILTER --ะะฐัะธะฐะฝั ัะธะปัััะฐัะธะธ:
ย ย ย ย ย ย ย ย ย ย ย ะัะปะธ ะฟะพัะปะต ะฐะณัะตะณะธััััะตะน ััะฝะบัะธะธ ัะบะฐะทะฐัั ะบะปััะตะฒะพะต ัะปะพะฒะพ FILTER ะธ ะฟะพะผะตััะธัั ะฒ ัะบะพะฑะบะฐัย
ย ย ย ย ย ย ย ย ย ย ย ะฝะตะบะพัะพัะพะต ััะปะพะฒะธะต condition ะฟะพัะปะต WHERE, ัะพ ะฐะณัะตะณะธััััะตะน ััะฝะบัะธะธ ะฝะฐ ะฒัะพะดย
ย ย ย ย ย ย ย ย ย ย ย ะฑัะดัั ะฟะพะดะฐะฝั ัะพะปัะบะพ ัะต ัััะพะบะธ, ะดะปั ะบะพัะพััั ััะปะพะฒะธะต ัะธะปัััะฐ ะพะบะฐะถะตััั ะธััะธะฝะฝัะผ.

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ะ ะพะฑัะตะผ ะฒะธะดะต ััะฐ ะบะพะฝััััะบัะธั ะฒัะณะปัะดะธั ัะฐะบ:

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย SELECT agg_function(column) FILTER (WHERE condition)
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย FROM table


ย ย ย ย ะะฐะฟัะธะผะตั, ะตัะปะธ ะฑั ะผั ะทะฐัะพัะตะปะธ ะฟะพััะธัะฐัั ััะตะดะฝัั ัะตะฝั ัะพะปัะบะพ ะดะปั ัะพะฒะฐัะพะฒ ะบะฐัะตะณะพัะธะธ 'ััะฑะฐ', ัะพ ะทะฐะฟัะพั ะฒัะณะปัะดะตะป ะฑั ัะฐะบ:

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย SELECT AVG(price) FILTER (WHERE category = 'ััะฑะฐ') AS avg_fish_price
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย FROM table

17) UPPER -- ะัะตะพะฑัะฐะทะพะฒะฐัั ะฒัะต ะฑัะบะฒั ัะบะฐะทะฐะฝะฝะพะน ัััะพะบะธ ะฒ ะฒะตััะฝะธะน ัะตะณะธััั.
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย UPPER( string )

18) Unix -- ะฒัะตะผั , ะฒ ะบะพัะพัะพะผ ััะฐะฝะธััั ะบะพะปะธัะตััะฒะพ ัะตะบัะฝะด, ะฟัะพัะตะดัะธั ั 1 ัะฝะฒะฐัั 1970 ะณะพะดะฐ.ย
ย ย ย ย ย ย ย ย ย ย ย ยะะปั ะฟะตัะตะฒะพะดะฐ ะบ ะฟัะธะฒััะฝะพะผั ะฒะธะดั DATE ะธัะฟะพะปัะทัะตััั ัะพัะผัะปะฐ:

ย ย ย ย ย ย ย ย ย ย ย ย 1970-01-01 + time_unix / 86400
ย ย ย ย ย ะ SQL ะดะปั ะฟะตัะตะฒะพะดะฐ ัะดะพะฑะฝะพ ะธัะฟะพะปัะทะพะฒะฐัั ััะฝะบัะธั ยFROM_UNIXTIME( ).

ย ย ย ย ย ย ย ย ะะฐะฟัะธะผะตั:

ย ย ย ย ย ย ย ย FROM_UNIXTIME(1598291490) = ย2020-08-24 17:51:30
ย ย ย ย ย ย ย ยย
ย ย ย ย ย ะะปั ะฟะตัะตะฒะพะดะฐ ะบะพะปะธัะตััะฒะฐ ัะตะบัะฝะด ะฒะพ ะฒัะตะผะตะฝะฝะพะน ัะพัะผะฐั ะธัะฟะพะปัะทัะตััั ััะฝะบัะธั SEC_TO_TIME(),ะฝะฐะฟัะธะผะตั:

ย ย ย ย ย ย ย ย SEC_TO_TIME(288) = 0:04:48


19) STRING_AGG -- ะฟะพะทะฒะพะปัััะฐั ะบะพะฝะบะฐัะตะฝะธัะพะฒะฐัั ัััะพะบะธ

ย ย ย ย ย ย ย ย ย ย ย ย select ยmaker, STRING_AGG(type, '/')
ย ย ย ย ย ย ย ย ย ย ย ย from (select distinct maker, type from Product) as Product
ย ย ย ย ย ย ย ย ย ย ย ย group by maker

ย ย ย ย ย ย ย ย ย-- ะงัะพะฑั ะทะฐะดะฐัั ะฟะพััะดะพะบ ัะพััะธัะพะฒะบะธ, ะธัะฟะพะปัะทัะตััั ะฝะตะพะฑัะทะฐัะตะปัะฝะพะต ะฟัะตะดะปะพะถะตะฝะธะต WITHIN GROUP

ย ย ย ย ย ย ย ย ย ย ย ย ยSELECT country, STRING_AGG(name,',') WITHIN GROUP (ORDER BY name) ships_listย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย FROM Ships s JOIN Classes c ON s.class=c.class
ย ย ย ย ย ย ย ย ย ย ย ย ย ย GROUP BY country
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ORDER BY country;
ย ย ย ย ย ย ย ย ย ย ย ย ย ยย
20) AGE --ะะตัะฝััั ัะฐะทะฝะธัั ะผะตะถะดั ะดะฒัะผั ะทะฝะฐัะตะฝะธัะผะธ, ะฟัะตะดััะฐะฒะปะตะฝะฝัะผะธ ะฒ ัะพัะผะฐัะต TIMESTAMP
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย SELECT AGE('2022-12-12', '2021-11-10')

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ะะตะทัะปััะฐั:
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย 397 days, 0:00:00

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย SELECT AGE(current_date, '2021-11-10')

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ะะตะทัะปััะฐั:
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย 397 days, 0:00:00

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย SELECT AGE(current_date, '2021-11-10')::VARCHAR

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ะะตะทัะปััะฐั:
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย 1 year 1 mon 2 days

20.0) MONTHNAME(ะดะฐัะฐ) -- ะฒัะดะตะปะธัั ะฝะฐะทะฒะฐะฝะธะต ะผะตัััะฐ ะธะท ะดะฐัั
ย ย ย ย ย ย ย ย ย ย ย ย MONTHNAME('2020-04-12')='April'
ย ย ย ย ย ย ย ย ย ย ย ยย
20.1) DATEDIFF(ะดะฐัะฐ_1, ะดะฐัะฐ_2) --ะะตัะฝััั ัะฐะทะฝะธัั ะผะตะถะดั ะดะฒัะผั ะทะฝะฐัะตะฝะธัะผะธ -- DATEDIFF(datepart, startdate, enddate)
ย ย ย ย ย ย ย ย ยDATEDIFF('2020-04-01', '2020-03-28')=4

ย ย ย ย ย ย ย ย ย ย DATEDIFF('2020-05-09','2020-05-01')=8

ย ย ย ย ย ย ย ย ย ย DATEDIFF(date_last, date_first)

ย ย ย ย ย ย ย ย ย ย SUM((DATEDIFF(minute, time_out, time_in) + 1440)%1440) AS minutes

ย ย ย ย ย ย ย ย ย ย ะธะปะธ

ย ย ย ย ย ย ย ย ย ย case
ย ย ย ย ย ย ย ย ย ย ย ย ย ย when DATEDIFF(mi, time_out, time_in) < 0 then 1440 + DATEDIFF(mi, time_out, time_in)
ย ย ย ย ย ย ย ย ย ย ย ย ย ย else DATEDIFF(mi, time_out, time_in)
ย ย ย ย ย ย ย ย ย ย end as int

20.2) ะ PGSql ะฝะตั DATEDIFF

ย ย ย ย ย ย ยSELECT (EXTRACT(EPOCH FROM time_out) - EXTRACT(EPOCH FROM time_in)) * 60 AS difference_in_minutes
ย ย ย ย ย ย ย ยFROM your_table;
ย ย ย ย ย ย ย ย
21) DATE_TRUNC -- ะธัะฟะพะปัะทัะตััั ะดะปั ััะตัะตะฝะธั ะดะฐั ะธ ะฒัะตะผะตะฝะธ, ั.ะต. ะพะฝะฐ ัะฐะฑะพัะฐะตั ะฐะฝะฐะปะพะณะธัะฝะพ ะพะบััะณะปะตะฝะธั ROUND,ย
ัะพะปัะบะพ ะดะปั ัะธะฟะพะฒ ะดะฐะฝะฝัั TIMESTAMP ะธ INTERVAL.

ะกะธะฝัะฐะบัะธั ั ะฝะตั ัะฐะบะพะน ะถะต, ะบะฐะบ ะธ ั DATE_PART:
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ยSELECT DATE_TRUNC(part, column)

ะะฐ ะผะตััะต part ะฒ ะบะฐะฒััะบะฐั ัะบะฐะทัะฒะฐะตััั,ย
ะดะพ ะบะฐะบะพะน ัะพัะฝะพััะธ ัะปะตะดัะตั ะพะบััะณะปััั ะฟะตัะตะดะฐะฝะฝะพะต ะทะฝะฐัะตะฝะธะต ะฒัะตะผะตะฝะธ: ย'year', 'month', 'day', 'hour'

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย SELECT DATE_TRUNC('month', TIMESTAMP '2022-01-12 08:55:30')

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ะะตะทัะปััะฐั:
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย 01/01/22 00:00

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย SELECT DATE_TRUNC('day', TIMESTAMP '2022-01-12 08:55:30')

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ะะตะทัะปััะฐั:
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย 12/01/22 00:00ยย ย

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย SELECT DATE_TRUNC('hour', TIMESTAMP '2022-01-12 08:55:30')

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ะะตะทัะปััะฐั:
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย 12/01/22 08:00ยย ย

22.0) ะััะฐะฒะธัั ัะพะปัะบะพ ะดะฐัั ะฑะตะท ะฒัะตะผะตะฝะธ 1962-10-20 00:00:00.000 ยะฒ 1962-10-20
ย ย ย ยmssql ย SELECT CONVERT(date, ะฐัะณัะผะตะฝั) AS DateOnly;
ย ย ย ย ย ย ย ยSELECT CAST(ะฐัะณัะผะตะฝั AS date) AS DateOnly;

ย ย ย ย ะพััะฐะปัะฝัะต ยSELECT DATE(ะฐัะณัะผะตะฝั) AS DateOnly;

22) DATE_PART --ะะปั ะธะทะฒะปะตัะตะฝะธั ัะฐััะธ ะดะฐัั (ะณะพะด, ะผะตััั, ะดะตะฝั, ัะฐั ะธ ั.ะด.)ย


ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ยSELECT DATE_PART(part, column)


ย ย ย ย ย ย ะะฐ ะผะตััะต part ะฝะตะพะฑัะพะดะธะผะพ ะฒ ะบะฐะฒััะบะฐั ัะบะฐะทะฐัั ัั ัะฐััั,ย
ย ย ย ย ย ย ะบะพัะพััั ะฝัะถะฝะพ ะธะทะฒะปะตัั: 'year', 'month', 'day', 'hour' ะธ ั.ะด.ย
ย ย ย ย ย ย ะะฐ ะผะตััะต column ัะปะตะดัะตั ัะบะฐะทะฐัั ะฝัะถะฝัั ะบะพะปะพะฝะบั ะปะธะฑะพ ะบะพะฝะบัะตัะฝัั ะดะฐัั ะธะปะธ ะฒัะตะผั.ย


ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย SELECT DATE_PART('year', DATE '2022-01-12')

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ะะตะทัะปััะฐั:
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย 2022.00


ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย SELECT DATE_PART('month', DATE '2022-01-12')

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ะะตะทัะปััะฐั:
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย 1.00


ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย SELECT DATE_PART('day', DATE '2022-01-12')

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ะะตะทัะปััะฐั:
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย 12.00


ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย SELECT DATE_PART('hour', TIMESTAMP '2022-01-12 20:31:05')

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ะะตะทัะปััะฐั:
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย 20.00


ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย SELECT DATE_PART('minute', TIMESTAMP '2022-01-12 20:31:05')

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ะะตะทัะปััะฐั:
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย 31.00


ย ย ย ย ะััะต ะฒ ะบะฐัะตััะฒะต ะฟัะธะผะตัะฐ ะผั ัะบะฐะทะฐะปะธ ะบะพะฝะบัะตัะฝัั ะดะฐัั. ะะฐ ะตั ะผะตััะต ะผะพะณะปะฐ ะฑััั, ะฝะฐะฟัะธะผะตั, ะบะพะปะพะฝะบะฐ ั ะดะฐัะฐะผะธ dates.
ย ย ย ย ะขะพะณะดะฐ ะทะฐะฟัะพั ะฒัะณะปัะดะตะป ะฑั ัะฐะบ:
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย SELECT DATE_PART('day', dates)
ย ย ย ย ย ย ย ย ย ย ย ยย
ย ย ย ย centuryยย ยะัะฟะพะปัะทัะตั ะณัะธะณะพัะธะฐะฝัะบะธะน ะบะฐะปะตะฝะดะฐัั, ะณะดะต ะฟะตัะฒัะน ะฒะตะบ ะฝะฐัะธะฝะฐะตััั ั '0001-01-01 00:00:00 AD'
ย ย ย ย dayยย ยะดะตะฝั ะผะตัััะฐ (1 to 31)
ย ย ย ย decadeยย ยะะพะด ะดะตะปะธััั ะฝะฐ 10
ย ย ย ย dowยย ยะดะตะฝั ะฒ ะฝะตะดะตะปั (0=Sunday, 1=Monday, 2=Tuesday, ... 6=Saturday)
ย ย ย ย doyยย ยะดะตะฝั ะฝะตะดะตะปะธ ะฒ ะณะพะดั (1 = ะฟะตัะฒัะน ะดะตะฝั ะณะพะดะฐ, 365/366 = ะฟะพัะปะตะดะฝะธะน ะดะตะฝั ะณะพะดะฐ, ะฒ ะทะฐะฒะธัะธะผะพััะธ ะพั ัะพะณะพ, ะฒะธัะพะบะพัะฝัะน ะปะธ ััะพ ะณะพะด)
ย ย ย ย epochยย ยะะพะปะธัะตััะฒะพ ัะตะบัะฝะด ั '1970-01-01 00:00:00 UTC', ะตัะปะธ ะทะฝะฐัะตะฝะธะต ะดะฐัั. ะะพะปะธัะตััะฒะพ ัะตะบัะฝะด ะฒ ะธะฝัะตัะฒะฐะปะต, ะตัะปะธ ะทะฝะฐัะตะฝะธะต ะธะฝัะตัะฒะฐะป.
ย ย ย ย hourยย ยัะฐั (0 to 23)
ย ย ย ย isodowยย ยะดะตะฝั ะฝะตะดะตะปะธ (1=Monday, 2=Tuesday, 3=Wednesday, ... 7=Sunday)
ย ย ย ย isoyearยย ยISO 8601 (ะณะดะต ะณะพะด ะฝะฐัะธะฝะฐะตััั ะฒ ะฟะพะฝะตะดะตะปัะฝะธะบ ะฝะตะดะตะปะธ, ัะพะดะตัะถะฐัะตะน 4 ัะฝะฒะฐัั)
ย ย ย ย microsecondsยย ยะกะตะบัะฝะดั (ะธ ะดะพะปะธ ัะตะบัะฝะดั), ัะผะฝะพะถะตะฝะฝัะต ะฝะฐ 1 000 000
ย ย ย ย millenniumยย ยะทะฝะฐัะตะฝะธะต ัััััะตะปะตัะธั
ย ย ย ย millisecondsยย ยะกะตะบัะฝะดั (ะธ ะดะพะปะธ ัะตะบัะฝะดั), ัะผะฝะพะถะตะฝะฝัะต ะฝะฐ 1000
ย ย ย ย minuteยย ยะผะธะฝััะฐ (0 to 59)
ย ย ย ย monthยย ยะฝะพะผะตั ะผะตัััะฐ ะดะปั ะผะตัััะฐ (ะพั 1 ะดะพ 12), ะตัะปะธ ะทะฝะฐัะตะฝะธะต ะดะฐัั. ะะพะปะธัะตััะฒะพ ะผะตัััะตะฒ (ะพั 0 ะดะพ 11), ะตัะปะธ ะทะฝะฐัะตะฝะธะต ะธะฝัะตัะฒะฐะปะฐ
ย ย ย ย quarterยย ยะบะฒะฐััะฐะป (ั 1 ะฟะพ 4)
ย ย ย ย secondยย ยัะตะบัะฝะดั (ะธ ะดะพะปะธ ัะตะบัะฝะดั)
ย ย ย ย timezoneยย ยะกะผะตัะตะฝะธะต ัะฐัะพะฒะพะณะพ ะฟะพััะฐ ะพั UTC, ะฒััะฐะถะตะฝะฝะพะต ะฒ ัะตะบัะฝะดะฐั
ย ย ย ย timezone_hourยย ยะงะฐัะพะฒะฐั ัะฐััั ัะผะตัะตะฝะธั ัะฐัะพะฒะพะณะพ ะฟะพััะฐ ะพั UTC
ย ย ย ย timezone_minuteยย ยะะธะฝััะฝะฐั ัะฐััั ัะผะตัะตะฝะธั ัะฐัะพะฒะพะณะพ ะฟะพััะฐ ะพั UTC
ย ย ย ย weekยย ยะะพะผะตั ะฝะตะดะตะปะธ ะฒ ะณะพะดั, ะพัะฝะพะฒะฐะฝะฝัะน ะฝะฐ ISO 8601 (ะณะดะต ะณะพะด ะฝะฐัะธะฝะฐะตััั ะฒ ะฟะพะฝะตะดะตะปัะฝะธะบ ะฝะตะดะตะปะธ, ัะพะดะตัะถะฐัะตะน 4 ัะฝะฒะฐัั)
ย ย ย ย the yearยย ยะณะพะด ะบะฐะบ 4 ัะธััั

22.0) ะะพัะปะตะดะฝะธะน ะดะตะฝั ะผะตัััะฐย
ย ย ย ย ย ย ย ย ย ย ย ย ย ยEOMONTH(date) AS lastD
22.00) ะะตัะฒัะน ะดะตะฝั ะผะตัััะฐย
ย ย ย ย ย ย ย ย ย ย ย ย ย ยDATEADD(DAY,1,EOMONTH(date,-1)) as firstD

22.1) EXTRACT -- ะธะทะฒะปะตัะตะฝะธะต ะธะท ะดะฐัั ัะฐััะธ (ะณะพะด, ะผะตััั, ะดะตะฝั...)

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย EXTRACT(field FROM source)

ย ยhttps://learndb.ru/articles/article/122 ย
ย ย

ะคัะฝะบัะธั extract ะฟะพะปััะฐะตั ะธะท ะทะฝะฐัะตะฝะธะน ะดะฐัั/ะฒัะตะผะตะฝะธ ะฟะพะปั, ัะฐะบะธะต ะบะฐะบ ะณะพะด ะธะปะธ ัะฐั.ย
ะะดะตัั source โ ะทะฝะฐัะตะฝะธะต ัะธะฟะฐ timestamp, time ะธะปะธ interval.ย
(ะััะฐะถะตะฝะธั ัะธะฟะฐ date ะฟัะธะฒะพะดัััั ะบ ัะธะฟั timestamp, ัะฐะบ ััะพ ะดะพะฟััะบะฐะตััั ะธ ััะพั ัะธะฟ.)ย
ะฃะบะฐะทะฐะฝะฝะพะต ะฟะพะปะต ะฟัะตะดััะฐะฒะปัะตั ัะพะฑะพะน ะธะดะตะฝัะธัะธะบะฐัะพั, ะฟะพ ะบะพัะพัะพะผั ะธะท ะธััะพัะฝะธะบะฐ ะฒัะฑะธัะฐะตััั ะทะฐะดะฐะฝะฝะพะต ะฟะพะปะต.


23) DATEADD (datepart, number, date) -- ะฒะพะทะฒัะฐัะฐะตั ะทะฝะฐัะตะฝะธะต ัะธะฟะฐ datetime, ะบะพัะพัะพะต ะฟะพะปััะฐะตััั ะดะพะฑะฐะฒะปะตะฝะธะตะผย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย-- ะบ ะดะฐัะต date ะบะพะปะธัะตััะฒะฐ ะธะฝัะตัะฒะฐะปะพะฒ ัะธะฟะฐ datepart, ัะฐะฒะฝะพะณะพ number (ัะตะปะพะต ัะธัะปะพ)

ย ย ยDatepartยย ยะะพะฟัััะธะผัะต ัะพะบัะฐัะตะฝะธั
ย ย ย ย Year ย ย โ ะณะพะดยย ยyy, yyyy
ย ย ย ย Quarter ยโ ะบะฒะฐััะฐะปยย ยqq, q
ย ย ย ย Month ย ยโ ะผะตัััยย ยmm, m
ย ย ย ย Dayofyear โ ะดะตะฝั ะณะพะดะฐยย ยdy, y
ย ย ย ย Day ย ย ยโ ะดะตะฝัยย ยdd, d
ย ย ย ย Week ย ย โ ะฝะตะดะตะปัยย ยwk, ww
ย ย ย ย Hour ย ย โ ัะฐัยย ยhh
ย ย ย ย Minute ย โ ะผะธะฝััะฐยย ยmi, n
ย ย ย ย Second ย โ ัะตะบัะฝะดะฐยย ยss, s
ย ย ย ย Millisecond - ะผะธะปะปะธัะตะบัะฝะดะฐยย ยms ย ย ย ย ย ย ย ย ย ย ย ย ย ย ยย


24) TO_CHAR() -- ะัะตะพะฑัะฐะทะพะฒะฐะฝะธะต ะดะฐัั ะฒ ัััะพะบัย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย SELECT TO_CHAR(SYSDATE, 'FMMonth DD, YYYY') FROM DUAL;
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย --ะะตะทัะปััะฐั: ย ะะฒะณััั 9, 2014
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย SELECT TO_CHAR(SYSDATE, 'FMMON DDth, YYYY') FROM DUAL;
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย --ะะตะทัะปััะฐั: ย ะะะ 9TH, 2014
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย SELECT TO_CHAR(SYSDATE, 'FMMon ddth, YYYY') FROM DUAL;
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย --ะะตะทัะปััะฐั: ย ะะฒะณ 9th, 2014

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย SELECT TO_CHAR(sysdate, 'yyyy/mm/dd') FROM DUAL;
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย --ะะตะทัะปััะฐั: ย 2014/08/28
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย SELECT TO_CHAR(sysdate, 'yyyy.mm.dd') FROM DUAL;
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย --ะะตะทัะปััะฐั: ย 2014.08.28
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย SELECT TO_CHAR(sysdate, 'Month DD, YYYY') FROM DUAL;
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย --ะะตะทัะปััะฐั: ย ะะฒะณััั ย 28, 2014

ย ย ย ย ย ย ย ย ะะฐัะฐะผะตััยย ยะะพััะฝะตะฝะธะต
ย ย ย ย ย ย ย ย YEARยย ยะะพะด.
ย ย ย ย ย ย ย ย YYYYยย ย4-ะทะฝะฐัะฝัะน ะณะพะด.
ย ย ย ย ย ย ย ย YYY
ย ย ย ย ย ย ย ย YY
ย ย ย ย ย ย ย ย Yยย ยะะพัะปะตะดะฝะธะต 3, 2 ะธะปะธ 1 ัะธััะฐ(ั) ะณะพะดะฐ.
ย ย ย ย ย ย ย ย IYY
ย ย ย ย ย ย ย ย IY
ย ย ย ย ย ย ย ย Iยย ยะะพัะปะตะดะฝะธะต 3, 2 ะธะปะธ 1 ัะธััะฐ(ั) ะณะพะดะฐ ISO.
ย ย ย ย ย ย ย ย IYYYยย ย4-ะทะฝะฐัะฝัะน ะณะพะด ะฒ ัะพะพัะฒะตัััะฒะธะธ ัะพ ััะฐะฝะดะฐััะพะผ ISO.
ย ย ย ย ย ย ย ย Qยย ยะะฒะฐััะฐะป ะณะพะดะฐ (1, 2, 3, 4; JAN-MAR = 1).
ย ย ย ย ย ย ย ย MMยย ยะะตััั (01-12; JAN = 01).
ย ย ย ย ย ย ย ย MONยย ยะกะพะบัะฐัะตะฝะฝะพะต ะฝะฐะทะฒะฐะฝะธะต ะผะตัััะฐ.
ย ย ย ย ย ย ย ย MONTHยย ยะะฐะทะฒะฐะฝะธะต ะผะตัััะฐ, ะดะพะฟะพะปะฝะตะฝะฝะพะต ะฟัะพะฑะตะปะฐะผะธ ะดะปะธะฝะพะน ะดะพ 9 ัะธะผะฒะพะปะพะฒ.
ย ย ย ย ย ย ย ย RMยย ยะะธะผัะบะฐั ัะธััะฐ RM (I-XII; JAN = I).
ย ย ย ย ย ย ย ย WWยย ยะะตะดะตะปั ะณะพะดะฐ (1-53), ะณะดะต ะฝะตะดะตะปั 1 ะฝะฐัะธะฝะฐะตััั ะฒ ะฟะตัะฒัะน ะดะตะฝั ะณะพะดะฐ ะธ ะฟัะพะดะพะปะถะฐะตััั ะดะพ ัะตะดัะผะพะณะพ ะดะฝั ะณะพะดะฐ.
ย ย ย ย ย ย ย ย Wยย ยะะตะดะตะปั ะผะตัััะฐ (1-5), ะณะดะต ะฝะตะดะตะปั 1 ะฝะฐัะธะฝะฐะตััั ะฒ ะฟะตัะฒัะน ะดะตะฝั ะผะตัััะฐ ะธ ะทะฐะบะฐะฝัะธะฒะฐะตััั ัะตะดัะผัะผ.
ย ย ย ย ย ย ย ย IWยย ยะะตะดะตะปั ะณะพะดะฐ (1-52 ะธะปะธ 1-53) ะฝะฐ ะพัะฝะพะฒะต ััะฐะฝะดะฐััะฐ ISO.
ย ย ย ย ย ย ย ย Dยย ยะะตะฝั ะฝะตะดะตะปะธ (1-7).
ย ย ย ย ย ย ย ย DAYยย ยะะฐะทะฒะฐะฝะธะต ะดะฝั.
ย ย ย ย ย ย ย ย DDยย ยะะตะฝั ะผะตัััะฐ (1-31).
ย ย ย ย ย ย ย ย DDDยย ยะะตะฝั ะณะพะดะฐ (1-366).
ย ย ย ย ย ย ย ย DYยย ยะกะพะบัะฐัะตะฝะฝะพะต ะฝะฐะทะฒะฐะฝะธะต ะดะฝั.
ย ย ย ย ย ย ย ย Jยย ยัะปะธะฐะฝัะบะธะน ะดะตะฝั; ะบะพะปะธัะตััะฒะพ ะดะฝะตะน ั 1 ัะฝะฒะฐัั 4712 ะณ. ะดะพ ะฝ.ั.
ย ย ย ย ย ย ย ย HHยย ยะงะฐั ะดะฝั (1-12).
ย ย ย ย ย ย ย ย HH12ยย ยะงะฐั ะดะฝั (1-12).
ย ย ย ย ย ย ย ย HH24ยย ยะงะฐั ะดะฝั (0-23).
ย ย ย ย ย ย ย ย MIยย ยะะธะฝััั (0-59).
ย ย ย ย ย ย ย ย SSยย ยะกะตะบัะฝะดั (0-59).
ย ย ย ย ย ย ย ย SSSSSยย ยะกะตะบัะฝะดั ะฟะพัะปะต ะฟะพะปัะฝะพัะธ (0-86399).
ย ย ย ย ย ย ย ย FFยย ยะัะพะฑะฝัะต ัะตะบัะฝะดั.


24.1) NOW()-- ะฟะพะปะตะทะฝะฐั ััะฝะบัะธั, ะบะพัะพัะฐั ะฟะพะทะฒะพะปัะตั ะฟะพะปััะฐัั ัะตะบัััั ะดะฐัั ะธ ะฒัะตะผั

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย SELECT NOW()

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ะะตะทัะปััะฐั:
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย 17/12/22 19:32

24.2) FROM_UNIXTIME( ) ย-- ะดะปั ะฟะตัะตะฒะพะดะฒะฐ ะฒัะตะผะตะฝะธะธ ะฒ ัะตะบัะฝะดะฐั Unix-ะฒัะตะผัย
ย ย ย ย ย ย ย ย ย ย ย FROM_UNIXTIME(1598291490) = ย2020-08-24 17:51:30

ย ย ย ย ย ย ย ย ย ย ย -- ะฝั ะธะปะธ ัะพัะผัะปะฐ
ย ย ย ย ย ย ย ย ย ย ย 1970-01-01 + time_unix / 86400

24.3) SEC_TO_TIME() ย-- ะะปั ะฟะตัะตะฒะพะดะฐ ะบะพะปะธัะตััะฒะฐ ัะตะบัะฝะด ะฒะพ ะฒัะตะผะตะฝะฝะพะน ัะพัะผะฐั
ย ย ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย ย ย ย ย SEC_TO_TIME(288) = 0:04:48

25) unnest -- ะคัะฝะบัะธั unnest ะฟัะตะดะฝะฐะทะฝะฐัะตะฝะฐ ะดะปั ัะฐะทะฒะพัะฐัะธะฒะฐะฝะธั ะผะฐััะธะฒะพะฒ ะธ ะฟัะตะฒัะฐัะตะฝะธั ะธั ะฒ ะฝะฐะฑะพั ัััะพะบ:

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ยSELECT unnest(ARRAY['one','two','three'])

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ะะตะทัะปััะฐั:
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย one
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย two
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย three

25.1) array_agg -- ััะพ ะฟัะพะดะฒะธะฝััะฐั ะฐะณัะตะณะธััััะฐั ััะฝะบัะธั, ะบะพัะพัะฐั ัะพะฑะธัะฐะตั ะฒัะต ะทะฝะฐัะตะฝะธั ะฒ ัะบะฐะทะฐะฝะฝะพะผ ััะพะปะฑัะต ะฒ ะตะดะธะฝัะน ัะฟะธัะพะบ (ARRAY).ย
ย ย ย ย ย ย ย ย ะะพ ัััะธ array_agg โ ััะพ ะพะฟะตัะฐัะธั, ะพะฑัะฐัะฝะฐั unnest,ย
ย ย ย ย ย ย ย ย ะตั ัะธะฝัะฐะบัะธั ะฝะธัะตะผ ะฝะต ะพัะปะธัะฐะตััั ะพั ัะธะฝัะฐะบัะธัะฐ ะพััะฐะปัะฝัั ะฐะณัะตะณะธััััะธั ััะฝะบัะธะน:
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย SELECT column_1, array_agg(column_2) AS new_array
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย FROM table
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย GROUP BY column_1
25.2) array_length -- ะดะปะธะฝะฐ ะผะฐััะธะฒะฐ ะะปั ัะฐััััะฐ ัะธัะปะฐ ัะพะฒะฐัะพะฒ ะฒ ะทะฐะบะฐะทะฐั ะฒะพัะฟะพะปัะทัะนัะตัั ััะฝะบัะธะตะน array_length

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย SELECT array_length(ARRAY[0, 1, 2], 1);

25.3) array_to_string(array[], ';') -- ะฟะพะทะฒะพะปัะตั ะฟัะตะพะฑัะฐะทะพะฒะฐัั ะผะฐััะธะฒ ะฒ ัััะพะบั: ะฟะตัะฒัะผ ะฟะฐัะฐะผะตััะพะผ ัะบะฐะทัะฒะฐะตััั ะผะฐััะธะฒ,ย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย -- ะฒัะพััะผ โ ัะดะพะฑะฝัะน ะฝะฐะผ ัะฐะทะดะตะปะธัะตะปั ะฒ ะพะดะธะฝะฐัะฝัั ะบะฐะฒััะบะฐั (ะฐะฟะพัััะพัะฐั).ย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย -- ะ ะบะฐัะตััะฒะต ัะฐะทะดะตะปะธัะตะปั ะผะพะถะฝะพ ะธัะฟะพะปัะทะพะฒะฐัั
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย -- ะขะฐะฑัะปััะธั \t โ ะบ ะฟัะธะผะตัั, ะฟะพะทะฒะพะปะธั ะฟัะธ ะฒััะฐะฒะบะธ ััะตะนะบะธ ะฒ EXCEL ะฑะตะท ััะธะปะธะน ัะฐะทะฑะธััย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย -- ะทะฝะฐัะตะฝะธั ะฝะฐ ััะพะปะฑัั (ะธัะฟะพะปัะทะพะฒะฐัั ัะฐะบ: array_to_string(array[], E'\t') )
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย -- ะะตัะตะฒะพะด ัััะพะบะธ \n โ ัะฐะทะปะพะถะธั ะทะฝะฐัะตะฝะธั ะผะฐััะธะฒะฐ ะฟะพ ัััะพะบะฐะผ ะฒ ะพะดะฝะพะน ััะตะนะบะตย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย -- (ะธัะฟะพะปัะทะพะฒะฐัั ัะฐะบ: array_to_string(array[], E'\n') โ ะพะฑัััะฝั ะฝะธะถะต ะฟะพัะตะผั)

26) UNION -- ะพะฑัะตะดะธะฝัะตั ะทะฐะฟะธัะธ ะธะท ะดะฒัั ะทะฐะฟัะพัะพะฒ ะฒ ะพะดะธะฝ ะพะฑัะธะน ัะตะทัะปััะฐั (ะพะฑัะตะดะธะฝะตะฝะธะต ะผะฝะพะถะตััะฒ).

ย ย ย ย ะัะธ ััะพะผ ะฟะพ ัะผะพะปัะฐะฝะธั ััะธ ะพะฟะตัะฐัะธะธ ะธัะบะปััะฐัั ะธะท ัะตะทัะปััะฐัะฐ ัััะพะบะธ-ะดัะฑะปะธะบะฐัั.ย
ย ย ย ย ะงัะพะฑั ะดัะฑะปะธะบะฐัั ะฝะต ะธัะบะปััะฐะปะธัั ะธะท ัะตะทัะปััะฐัะฐ, ะฝะตะพะฑัะพะดะธะผะพ ะฟะพัะปะต ะธะผะตะฝะธ ะพะฟะตัะฐัะธะธ ัะบะฐะทะฐัั ะบะปััะตะฒะพะต ัะปะพะฒะพ ALL
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย SELECT column_1, column_2
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย FROM table_1
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย UNION ALL ย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย SELECT column_1, column_2
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย FROM table_2
26.1) ย ยEXCEPT ย- ะฒััะตัะฐะฝะธะต , ะฒะพะทะฒัะฐัะฐะตั ะฒัะต ะทะฐะฟะธัะธ, ะบะพัะพััะต ะตััั ะฒ ะฟะตัะฒะพะผ ะทะฐะฟัะพัะต, ะฝะพ ะพััััััะฒััั ะฒะพ ะฒัะพัะพะผ (ัะฐะทะฝะธัะฐ ะผะฝะพะถะตััะฒ).

26.2) ย ยINTERSECT ย- ะฟะตัะตัะตัะตะฝะธะต, ะฒะพะทะฒัะฐัะฐะตั ะฒัะต ะทะฐะฟะธัะธ, ะบะพัะพััะต ะตััั ะธ ะฒ ะฟะตัะฒะพะผ, ะธ ะฒะพ ะฒัะพัะพะผ ะทะฐะฟัะพัะต (ะฟะตัะตัะตัะตะฝะธะต ะผะฝะพะถะตััะฒ).

27) ยะัะฟะพะปัะทะพะฒะฐะฝะธะต SUM ะธ CASE WHEN ะฒะผะตััะตย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย selectย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย sum(case when allergies = 'Penicillin' and city = 'Burlington' then 1 else 0 end) as allergies_burl
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย , sum(case when allergies = 'Penicillin' and city = 'Oakville' then 1 else 0 end) ย as allergies_oak
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ยย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย from patients
28) ยCASE WHEN ะฒ WHERE

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย select
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย *ย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย FROM patients
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย WHERE TRUE
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย and 1 = (case when allergies = 'Penicillin' and city = 'Burlington' then 1 else 0 end)

29) ะพะฑัะตะดะตะฝัะตะผ ะดะฒะฐ ััะพะปะฑัะฐ ะฒ ะพะดะธะฝ ะผะฐััะธะฒ

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย SELECT string_to_array(CONCAT(name_1,', ', name_2), ', ') AS pair

30) ะะตััะธะบะธ
ย ย 1. ARPU (Average Revenue Per User) โ ััะตะดะฝัั ะฒััััะบะฐ ะฝะฐ ะพะดะฝะพะณะพ ะฟะพะปัะทะพะฒะฐัะตะปั ะทะฐ ะพะฟัะตะดะตะปัะฝะฝัะน ะฟะตัะธะพะด.
ย ย 2. ARPPU (Average Revenue Per Paying User) โ ััะตะดะฝัั ะฒััััะบะฐ ะฝะฐ ะพะดะฝะพะณะพ ะฟะปะฐัััะตะณะพ ะฟะพะปัะทะพะฒะฐัะตะปั ะทะฐ ะพะฟัะตะดะตะปัะฝะฝัะน ะฟะตัะธะพะด.
ย ย 3. AOV (Average Order Value) โ ััะตะดะฝะธะน ัะตะบ, ะธะปะธ ะพัะฝะพัะตะฝะธะต ะฒััััะบะธ ะทะฐ ะพะฟัะตะดะตะปัะฝะฝัะน ะฟะตัะธะพะด ะบ ะพะฑัะตะผั ะบะพะปะธัะตััะฒั ะทะฐะบะฐะทะพะฒ ะทะฐ ััะพ ะถะต ะฒัะตะผั.
ย ย 4. CAC (Customer Acquisition Cost), ะบะพัะพัะฐั ะพััะฐะถะฐะตั ะทะฐััะฐัั ะฝะฐ ะฟัะธะฒะปะตัะตะฝะธะต ะพะดะฝะพะณะพ ะฟะพะบัะฟะฐัะตะปั.
ย ย 5. ROI (Return on Investment), ะฒ ะผะฐัะบะตัะธะฝะณะต ะตั ัะฐััะพ ะฟัะธะผะตะฝััั ะดะปั ะฟะพะดััััะฐ ะพะบัะฟะฐะตะผะพััะธ ัะตะบะปะฐะผะฝัั ะบะฐะผะฟะฐะฝะธะน
ย ย 6. Retention rate โ ะบะพัััะธัะธะตะฝั ัะดะตัะถะฐะฝะธั ะบะปะธะตะฝัะพะฒ. ะะฝ ะฟะพะบะฐะทัะฒะฐะตั ะดะพะปั ะฟะพะปัะทะพะฒะฐัะตะปะตะน, ะบะพัะพััะต ะฒะตัะฝัะปะธัั ะฒ ะฟัะธะปะพะถะตะฝะธะต ัะฟัััั N ะดะฝะตะน
ย ย ย ย ย ย ย ย ย ยย
31) CAST CONVERT --ะขะฐะฑะปะธัะฐ ะฟัะธะพัะธัะตัะพะฒ (ัะตะผ ะฒััะต, ัะตะผ ะฑะพะปััะธะน ะฟัะธะพัะธัะตั):
ยSQL Server ะผะพะถะตั ะฒัะฟะพะปะฝััั ะฝะตัะฒะฝัะต ะฟัะตะพะฑัะฐะทะพะฒะฐะฝะธั ะพั ัะธะฟะฐ ั ะผะตะฝััะธะผ ะฟัะธะพัะธัะตัะพะผ ะบ ัะธะฟั ั ะฑะพะปััะธะผ ะฟัะธะพัะธัะตัะพะผ

ย ย ย ย ย ย ย ย datetime
ย ย ย ย ย ย ย ย smalldatetime
ย ย ย ย ย ย ย ย float
ย ย ย ย ย ย ย ย real
ย ย ย ย ย ย ย ย decimal
ย ย ย ย ย ย ย ย money
ย ย ย ย ย ย ย ย smallmoney
ย ย ย ย ย ย ย ย int
ย ย ย ย ย ย ย ย smallint
ย ย ย ย ย ย ย ย tinyint
ย ย ย ย ย ย ย ย bit
ย ย ย ย ย ย ย ย nvarchar
ย ย ย ย ย ย ย ย nchar
ย ย ย ย ย ย ย ย varchar
ย ย ย ย ย ย ย ย char

ย ย ะะบะพะณะดะฐ ะฝะตะพะฑัะพะดะธะผะพ ะฒัะฟะพะปะฝะธัั ะฟัะตะพะฑัะฐะทะพะฒะฐะฝะธั ะพั ัะธะฟะพะฒ ั ะฒัััะธะผ ะฟัะธะพัะธัะตัะพะผ ะบ ัะธะฟะฐะผ ั ะฝะธะทัะธะผ ะฟัะธะพัะธัะตัะพะผ,
ย ย ยัะพ ะฝะฐะดะพ ะฒัะฟะพะปะฝััั ัะฒะฝะพะต ะฟัะธะฒะตะดะตะฝะธะต ัะธะฟะพะฒ.
ย ย ย ย ย ย ย ย CAST(ะฒััะฐะถะตะฝะธะต AS ัะธะฟ_ะดะฐะฝะฝัั)
ย ย ย ย ย ย ย ย ย ย CAST(CreatedAt AS nvarchar) + '; total: ' + CAST(Price * ProductCount AS nvarchar)ย

ย ย ย ย ย ย ย ย CONVERT(ัะธะฟ_ะดะฐะฝะฝัั, ะฒััะฐะถะตะฝะธะต [, ััะธะปั])
ย ย ย ย ย ย ย ย ย ย CONVERT(nvarchar, CreatedAt, 3),ย
ย ย ย ย ย ย ย ย ย ย CONVERT(nvarchar, Price * ProductCount, 1)
ย ย ย ย ย ย ย ย ััะธะปั ัะพัะผะฐัะธัะพะฒะฐะฝะธั ะดะฐะฝะฝัั:
ย ย ย ย ย ย ย ย ย ย ย ย ย ย 0 ะธะปะธ 100 - ัะพัะผะฐั ะดะฐัั "Mon dd yyyy hh:miAM/PM" (ะทะฝะฐัะตะฝะธะต ะฟะพ ัะผะพะปัะฐะฝะธั)

ย ย ย ย ย ย ย ย ย ย ย ย ย ย 1 ะธะปะธ 101 - ัะพัะผะฐั ะดะฐัั "mm/dd/yyyy"

ย ย ย ย ย ย ย ย ย ย ย ย ย ย 3 ะธะปะธ 103 - ัะพัะผะฐั ะดะฐัั "dd/mm/yyyy"

ย ย ย ย ย ย ย ย ย ย ย ย ย ย 7 ะธะปะธ 107 - ัะพัะผะฐั ะดะฐัั "Mon dd, yyyy hh:miAM/PM"

ย ย ย ย ย ย ย ย ย ย ย ย ย ย 8 ะธะปะธ 108 - ัะพัะผะฐั ะดะฐัั "hh:mi:ss"

ย ย ย ย ย ย ย ย ย ย ย ย ย ย 10 ะธะปะธ 110 - ัะพัะผะฐั ะดะฐัั "mm-dd-yyyy"

ย ย ย ย ย ย ย ย ย ย ย ย ย ย 14 ะธะปะธ 114 - ัะพัะผะฐั ะดะฐัั "hh:mi:ss:mmmm" (24-ัะฐัะพะฒะพะน ัะพัะผะฐั ะฒัะตะผะตะฝะธ)

ย ย ย ย ย ย ย ย ย ย ย ย ย ย ะะตะบะพัะพััะต ะทะฝะฐัะตะฝะธั ะดะปั ัะพัะผะฐัะธัะพะฒะฐะฝะธั ะดะฐะฝะฝัั ัะธะฟะฐ money ะฒ ัััะพะบั:

ย ย ย ย ย ย ย ย ย ย ย ย ย ย 0 - ะฒ ะดัะพะฑะฝะพะน ัะฐััะธ ัะธัะปะฐ ะพััะฐัััั ัะพะปัะบะพ ะดะฒะต ัะธััั (ะฟะพ ัะผะพะปัะฐะฝะธั)

ย ย ย ย ย ย ย ย ย ย ย ย ย ย 1 - ะฒ ะดัะพะฑะฝะพะน ัะฐััะธ ัะธัะปะฐ ะพััะฐัััั ัะพะปัะบะพ ะดะฒะต ัะธััั, ะฐ ะดะปั ัะฐะทะดะตะปะตะฝะธั ัะฐะทััะดะพะฒ ะฟัะธะผะตะฝัะตััั ะทะฐะฟััะฐั

ย ย ย ย ย ย ย ย ย ย ย ย ย ย 2 - ะฒ ะดัะพะฑะฝะพะน ัะฐััะธ ัะธัะปะฐ ะพััะฐัััั ัะพะปัะบะพ ัะตัััะต ัะธััั
ย ย ย ย ย ยย
32) DDL -- data definition language - ัะทัะบ ะพะฟัะตะดะตะปะตะฝะธั ะดะฐะฝะฝัั.
ย ย ย ย ยะกัะดะฐ ะฒัะพะดัั ัะต ะบะพะผะฐะฝะดั, ะบะพัะพััะต ะฝัะถะฝั ะดะปั ะธะทะผะตะฝะตะฝะธั ััััะบัััั ะะ. (CREATE, ALTER, DROP, RENAME ะธ ะดั.)
ย ยย
ย ย DML -- (data manipulation language).ย
ย ย ย ย ย ย ะญัะพ ะพะฟะตัะฐัะธะธ ัะธะฟะฐ SELECT, INSERT, UPDATE, DELETE.

ย ย DCL -- Data Control Language ะพะฟะตัะฐัะพัั ะดะปั ะฐะดะผะธะฝะธัััะธัะพะฒะฐะฝะธั ะะย
ย ย ย ย ย ยGRANT -- ะฟัะตะดะพััะฐะฒะปัะตั ะฟะพะปัะทะพะฒะฐัะตะปั ะธะปะธ ะณััะฟะฟะต ัะฐะทัะตัะตะฝะธั ะฝะฐ ะพะฟัะตะดะตะปัะฝะฝัะต ะพะฟะตัะฐัะธะธ ั ะพะฑัะตะบัะพะผ;
ย ย ย ย ย ยREVOKE -- ะพัะทัะฒะฐะตั ะฒัะดะฐะฝะฝัะต ัะฐะทัะตัะตะฝะธั;
ย ย ย ย ย ยDENY -- ะทะฐะดะฐัั ะทะฐะฟัะตั, ะธะผะตััะธะน ะฟัะธะพัะธัะตั ะฝะฐะด ัะฐะทัะตัะตะฝะธะตะผ
ย ยย
ย ย TCL -- Transaction Control Language ะพะฟะตัะฐัะพัั ะดะปั ัะฐะฑะพัั ั ััะฐะฝะทะฐะบัะธัะผะธ
ย ย ย ย ย ย BEGIN TRANSACTION โ ัะปัะถะธั ะดะปั ะพะฟัะตะดะตะปะตะฝะธั ะฝะฐัะฐะปะฐ ััะฐะฝะทะฐะบัะธะธ;
ย ย ย ย ย ย COMMIT TRANSACTION โ ะฟัะธะผะตะฝัะตั ััะฐะฝะทะฐะบัะธั;
ย ย ย ย ย ย ROLLBACK TRANSACTION โ ะพัะบะฐััะฒะฐะตั ะฒัะต ะธะทะผะตะฝะตะฝะธั, ัะดะตะปะฐะฝะฝัะต ะฒ ะบะพะฝัะตะบััะต ัะตะบััะตะน ััะฐะฝะทะฐะบัะธะธ;
ย ย ย ย ย ย SAVE TRANSACTION โ ัััะฐะฝะฐะฒะปะธะฒะฐะตั ะฟัะพะผะตะถััะพัะฝัั ัะพัะบั ัะพััะฐะฝะตะฝะธั ะฒะฝัััะธ ััะฐะฝะทะฐะบัะธะธ.

33) CREATE INDEX -- ัะพะทะดะฐะตะผ ะธะฝะดะตะบัั

ย ย ย ย ย ย ย ย ย ย ย ย CREATE INDEX idx1 ON Booking(flight_id);
ย ย ย ย ย ย ย ย ย ย ย ย CREATE INDEX idx2 ON Flight(planet_id);
ย ย ย ย ย ย ย ย ย ย ย ย ----
ย ย ย ย ย ย ย ย ย ย ย ย SELECT COUNT(1)
ย ย ย ย ย ย ย ย ย ย ย ย FROM Flight F JOIN Spacecraft S ON F.spacecraft_id = S.id
ย ย ย ย ย ย ย ย ย ย ย ย JOIN Planet P ON F.planet_id = P.id
ย ย ย ย ย ย ย ย ย ย ย ย JOIN Booking B ON F.id = B.flight_id
ย ย ย ย ย ย ย ย ย ย ย ย WHERE S.capacity<_capacity AND S.class=1
ย ย ย ย ย ย ย ย ย ย ย ย AND P.name=_planet_name;

34) -- ัะพะทะดะฐะตะผ ััะฝะบัะธั

ย ย ย ย ย ย ย ย ย ย ย ย SELECT Price.planet_id,ย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย Price.spacecraft_class,ย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย Price.price * GetPaxCount(Price.planet_id, Price.spacecraft_class) AS takingsย
ย ย ย ย ย ย ย ย ย ย ย ย ย FROM Price;


ย ย ย ย ย ย ย ย ย ย ย ย -- ะัะฟะพะผะพะณะฐัะตะปัะฝะฐั ััะฝะบัะธั, ััะธัะฐััะฐั ะบะพะปะธัะตััะฒะพ ะฟะฐััะฐะถะธัะพะฒ, ะปะตัะตะฒัะธัย
ย ย ย ย ย ย ย ย ย ย ย ย -- ะฝะฐ ะฟะปะฐะฝะตัั _planet_id ะฒ ะทะฒะตะทะดะพะปะตัะต ะบะปะฐััะฐ _class

ย ย ย ย ย ย ย ย ย ย ย ย CREATE OR REPLACE FUNCTION GetPaxCount(_planet_id INT, _class INT) RETURNS BIGINT AS $$
ย ย ย ย ย ย ย ย ย ย ย ย SELECT COUNT(Pax.id)
ย ย ย ย ย ย ย ย ย ย ย ย FROM Planet Pย
ย ย ย ย ย ย ย ย ย ย ย ย JOIN Flight F ย ย ON P.id=F.planet_id
ย ย ย ย ย ย ย ย ย ย ย ย JOIN Booking B ย ยON B.flight_id = F.id
ย ย ย ย ย ย ย ย ย ย ย ย JOIN Spacecraft S ON F.spacecraft_id = S.id
ย ย ย ย ย ย ย ย ย ย ย ย JOIN Pax ย ย ย ย ยON B.pax_id = Pax.id
ย ย ย ย ย ย ย ย ย ย ย ย WHERE S.class = _class AND P.id = _planet_id;
ย ย ย ย ย ย ย ย ย ย ย ย $$ LANGUAGE SQL;

35) ะะตะฝะตัะฐัะธั ัััะพะบ

ย ย ย ย ย ย ย ย ย ย ย WITH t1 (RowNumber) AS (
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย SELECT 1 AS RowNumber
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย UNION ALL
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย SELECT a.RowNumber + 1 ย ยAS RowNumber
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย FROM t1 a
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย WHERE a.RowNumber < 7)


36) ะงัะพะฑั ะฟัะพะฒะตัะธัั, ะตััั ะปะธ ะบะปััะตะฒะพะต ัะปะพะฒะพ ะฒ ะทะฐะณะพะปะพะฒะบะต ัะฐะณะฐ, ะผะพะถะฝะพ ะธัะฟะพะปัะทะพะฒะฐัั ััะฝะบัะธั:

ย ย ย ย ย ย ย ย ย ย ยINSTR(string_1, string_2)
ย ย -- ะบะพัะพัะฐั ะฒะพะทะฒัะฐัะฐะตั ะฟะพะทะธัะธั ะฟะตัะฒะพะณะพ ะฒัะพะถะดะตะฝะธั string_2 ะฒ string_1.ย
ย ย -- ะัะปะธ ะฒัะพะถะดะตะฝะธั ะฝะตั - ัะตะทัะปััะฐั ััะฝะบัะธะธ 0.

36)ะะพะทะผะพะถะฝะพััะธ SQLite, ะบะพัะพััะต ะฒั ะผะพะณะปะธ ะฟัะพะฟัััะธัั

ะงะฐััะธัะฝัะต ะธะฝะดะตะบัั (Partial Indexes) -- ะัะธ ะฟะพัััะพะตะฝะธะธ ะธะฝะดะตะบัะฐ ะผะพะถะฝะพ ัะบะฐะทะฐัั ััะปะพะฒะธะต ะฟะพะฟะฐะดะฐะฝะธั ัััะพะบะธ ะฒ ะธะฝะดะตะบั, ะบ ะฟัะธะผะตัั,ย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย -- ะพะดะฝะฐ ะธะท ะบะพะปะพะฝะพะบ ะฝะต ะฟัััะฐั, ะฐ ะดััะณะฐั ัะฐะฒะฝะฐ ะทะฐะดะฐะฝะฝะพะผั ะทะฝะฐัะตะฝะธั.

create index idx_partial on tab1(a, b) where a is not null and b = 5;
select * from tab1 where a is not null and b = 5; --> search table tab1 using index

ะะฝะดะตะบัั ะฝะฐ ะฒััะฐะถะตะฝะธะต (Indexes On Expressions) -- ะัะปะธ ะฒ ะทะฐะฟัะพัะฐั ะบ ัะฐะฑะปะธัะต ัะฐััะพ ะธัะฟะพะปัะทัะตััั ะฒััะฐะถะตะฝะธะต,ย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย -- ัะพ ะผะพะถะฝะพ ะฟะพัััะพะธัั ะธะฝะดะตะบั ะฟะพ ะฝะตะผั. ะะดะฝะฐะบะพ ัะปะตะดัะตั ะธะผะตััย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย -- ะฒ ะฒะธะดั, ััะพ ะฟะพะบะฐ ะพะฟัะธะผะธะทะฐัะพั ะฝะต ะพัะตะฝั ะณะธะฑะพะบ ะธ ะฟะตัะตััะฐะฝะพะฒะบะฐ ััะพะปะฑัะพะฒย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย -- ะฒ ะฒััะฐะถะตะฝะธะธ ะฟัะธะฒะตะดะตั ะบ ะพัะบะฐะทั ะพั ะธัะฟะพะปัะทะพะฒะฐะฝะธั ะธะฝะดะตะบัะฐ.

create index idx_expression on tab1(a + b);
select * from tab1 where a + b > 10; --> search table tab1 using index ...
select * from tab1 where b + a > 10; --> scan table

ะััะธัะปัะตะผัะต ะบะพะปะพะฝะบะธ (Generated Columns) -- ะัะปะธ ะดะฐะฝะฝัะต ััะพะปะฑัะฐ ะฟัะตะดััะฐะฒะปััั ัะพะฑะพะน ัะตะทัะปััะฐั ะฒััะธัะปะตะฝะธั ะฒััะฐะถะตะฝะธัย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย -- ะฟะพ ะดััะณะธะผ ััะพะปะฑัะฐะผ, ัะพ ะผะพะถะฝะพ ัะพะทะดะฐัั ะฒะธัััะฐะปัะฝัะน ััะพะปะฑะตั.ย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย -- ะััั ะดะฒะฐ ะฒะธะดะฐ: VIRTUAL (ะฒััะธัะปัะตััั ะบะฐะถะดัะน ัะฐะท ะฟัะธย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย -- ััะตะฝะธะธ ัะฐะฑะปะธัั ะธ ะฝะต ะทะฐะฝะธะผะฐะตั ะผะตััะฐ) ะธ STORED (ะฒััะธัะปัะตััั ะฟัะธ ะทะฐะฟะธัะธย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย -- ะดะฐะฝะฝัั ะฒ ัะฐะฑะปะธัั ะธ ะผะตััะพ ะทะฐะฝะธะผะฐะตั).
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย -- ะะฐะทัะผะตะตััั ะทะฐะฟะธััะฒะฐัั ะดะฐะฝะฝัะต ะฒ ัะฐะบะธะต ััะพะปะฑัั ะฝะฐะฟััะผัั ะฝะตะปัะทั.

create table tab1 (
ยย ยa integer primary key,
ยย ยb int,
ยย ยc text,
ยย ยd int generated always as (a * abs(b)) virtual,
ยย ยe text generated always as (substr(c, b, b + 1)) stored
);

R-Tree ะธะฝะดะตะบั -- ะะฝะดะตะบั ะฟัะตะดะฝะฐะทะฝะฐัะตะฝ ะดะปั ะฑััััะพะณะพ ะฟะพะธัะบะฐ ะฒ ะดะธะฐะฟะฐะทะพะฝะต ะทะฝะฐัะตะฝะธะน/ะฒะปะพะถะตะฝะฝะพััะธ ะพะฑัะตะบัะพะฒ,
ย ย ย ย ย ย ย -- ยั.ะต. ะทะฐะดะฐัะธ ัะธะฟะธัะฝะพะน ะดะปั ะณะตะพ-ัะธััะตะผ, ะบะพะณะดะฐ ะพะฑัะตะบัั-ะฟััะผะพัะณะพะปัะฝะธะบะธ ะทะฐะดะฐะฝั ัะฒะพะตะนย
ย ย ย ย ย ย ย -- ะฟะพะทะธัะธะตะน ะธ ัะฐะทะผะตัะพะผ ะธ ััะตะฑัะตััั ะฝะฐะนัะธ ะฒัะต ะพะฑัะตะบัั, ะบะพัะพััะต ะฟะตัะตัะตะบะฐัััั ั ัะตะบััะธะผ.
ย ย ย ย ย ย ย -- ยะะฐะฝะฝัะน ะธะฝะดะตะบั ัะตะฐะปะธะทะพะฒะฐะฝ ะฒ ะฒะธะดะต ะฒะธัััะฐะปัะฝะพะน ัะฐะฑะปะธัั (ัะผ. ะฝะธะถะต) ะธ ััะพ ะธะฝะดะตะบั ัะพะปัะบะพย
ย ย ย ย ย ย ย -- ะฟะพ ัะฒะพะตะน ัััะธ. ะะปั ะฟะพะดะดะตัะถะบะธ R-Tree ะธะฝะดะตะบัะฐ
ย ย ย ย ย ย ย -- ยััะตะฑัะตััั ัะพะฑัะฐัั SQLite ั ัะปะฐะณะพะผ SQLITE_ENABLE_RTREE (ะฟะพ ัะผะพะปัะฐะฝะธั ะฝะต ัััะฐะฝะพะฒะปะตะฝ).

create virtual table idx_rtree using rtree (
ยย ยid, ย ย ย ย ย ย ย-- ะบะปัั
ยย ยminx, maxx, ย ย ย-- ะผะธะฝ ะธ ะผะฐะบc x ะบะพะพัะดะธะฝะฐัั
ยย ยminy, maxy, ย ย ย-- ะผะธะฝ ะธ ะผะฐะบc y ะบะพะพัะดะธะฝะฐัั
ยย ยdata ย ย ย ย ย ย -- ะดะพะฟะพะปะฝะธัะตะปัะฝัะต ะดะฐะฝะฝัะต ย
); ย

insert into idx_rtree values (1, -80.7749, -80.7747, 35.3776, 35.3778);ย
insert into idx_rtree values (2, -81.0, -79.6, 35.0, 36.2);

select id from idx_rtreeย
where minx >= -81.08 and maxx <= -80.58 and miny >= 35.00 ยand maxy <= 35.44;

ะะพะทะฒัะฐัะฐะตะผัะต ะทะฝะฐัะตะฝะธั (Returning) -- ะก ะฒะตััะธะธ 3.35.0 ะผะพะถะฝะพ ะฒะตัะฝััั ะทะฝะฐัะตะฝะธั ะธะท ะพะฟะตัะฐัะพัะพะฒ update, insert ะธ delete.

insert into t (a, b) values ('x', 'y') returning id;
update t set a = a * 2 where b < 10 returning a, b as c;

ะะตัะตะธะผะตะฝะพะฒะฐะฝะธะต ะธ ัะดะฐะปะตะฝะธะต ะบะพะปะพะฝะบะธ -- ะ SQLite ัะปะฐะฑะพ ะฟะพะดะดะตัะถะธะฒะฐะตั ะธะทะผะตะฝะตะฝะธั ะฒ ััััะบัััะต ัะฐะฑะปะธั, ัะฐะบ,ย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย -- ะฟะพัะปะต ัะพะทะดะฐะฝะธั ัะฐะฑะปะธัั, ะฝะตะปัะทั ะธะทะผะตะฝะธัั ะพะณัะฐะฝะธัะตะฝะธะต (constraint)ย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย -- ะธะปะธ ะฟะพะปะพะถะตะฝะธะต ะบะพะปะพะฝะบะธ. ะก ะฒะตััะธะธ 3.25.0 ะผะพะถะฝะพ ะฟะตัะตะธะผะตะฝะพะฒะฐัั ััะพะปะฑะตั,ย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย -- ะฝะพ ะฝะต ะธะทะผะตะฝะธัั ะตะณะพ ัะธะฟ.

alter table tbl1 rename column a to b;

ะก ะฒะตััะธะธ 3.35.0 ะผะพะถะฝะพ ัะดะฐะปะธัั ััะพะปะฑะตั.

alter table tbl1 drop column a;

ะะปั ะดััะณะธั ะพะฟะตัะฐัะธะน ะฒัั ัะฐะบะถะต ะฟัะตะดะปะฐะณะฐะตััั ัะพะทะดะฐัั ัะฐะฑะปะธัั ั ะฝัะถะฝะพะน ััััะบัััะพะน,ย
ะฟะตัะตะปะธัั ััะดะฐ ะดะฐะฝะฝัะต, ัะดะฐะปะธัั ััะฐััั ะธ ะฟะตัะตะธะผะตะฝะพะฒะฐัั ะฝะพะฒัั.

ะะพะฑะฐะฒะธัั ัััะพะบั, ะธะฝะฐัะต ะพะฑะฝะพะฒะธัั (Upsert) -- ะัะฟะพะปัะทัั ะบะปะฐัั on conflict ะพะฟะตัะฐัะพัะฐ insert,ย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย-- ะผะพะถะฝะพ ะดะพะฑะฐะฒะธัั ะฝะพะฒัั ัััะพะบั,
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย-- ยะฐ ะฟัะธ ัะถะต ะธะผะตััะตะนัั ั ัะฐะบะธะผ ะถะต ะทะฝะฐัะตะฝะธะตะผ ะฟะพ ะบะปััั, ะพะฑะฝะพะฒะธัั.

create table vocabulary (word text primary key, count int default 1);
insert into vocabulary (word) values ('jovial')ย
ย on conflict (word) do update set count = count + 1;

ะะฟะตัะฐัะพั Update from -- ะัะปะธ ัััะพะบะฐ ะดะพะปะถะฝะฐ ะฑััั ะพะฑะฝะพะฒะปะตะฝะฐ ะฝะฐ ะพัะฝะพะฒะต ะดะฐะฝะฝัั ะดััะณะพะน ัะฐะฑะปะธัั,ย
ย ย ย ย ย ย ย ย ย ย ย-- ัะพ ัะฐะฝะตะต ะฟัะธัะพะดะธะปะพัั ะธัะฟะพะปัะทะพะฒะฐัั ะฒะปะพะถะตะฝะฝัะน ะทะฐะฟัะพั ะดะปั ะบะฐะถะดะพะณะพย
ย ย ย ย ย ย ย ย ย ย ย-- ััะพะปะฑัะฐ ะธะปะธ with. ะก ะฒะตััะธะธ 3.33.0 ะพะฟะตัะฐัะพั update ัะฐััะธัะตะฝย
ย ย ย ย ย ย ย ย ย ย ย-- ะบะปััะตะฒัะผ ัะปะพะฒะพะผ from ะธ ัะตะฟะตัั ะผะพะถะฝะพ ะดะตะปะฐัั ัะฐะบ

update inventory
ย ยset quantity = quantity - daily.amt
ย from (select sum(quantity) as amt, itemid from sales group by 2) as daily
ยwhere inventory.itemid = daily.itemid;

CTE ะทะฐะฟัะพัั, ะบะปะฐัั with (Common Table Expression) -- ะะปะฐัั with ะผะพะถะตั ะธัะฟะพะปัะทะพะฒะฐัััั ะบะฐะบย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย -- ะฒัะตะผะตะฝะฝะพะต ะฟัะตะดััะฐะฒะปะตะฝะธะต ะดะปั ะทะฐะฟัะพัะฐ.ย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย -- ะ ะฒะตััะธะธ 3.34.0 ะทะฐัะฒะปะตะฝะฐ ะฒะพะทะผะพะถะฝะพัััย
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย -- ะธัะฟะพะปัะทะพะฒะฐะฝะธั with ะฒะฝัััะธ with.

with tab2 as (select * from tab1 where a > 10),ย
ย tab3 as (select * from tab2 inner join ...)
select * from tab3;

-- ะฏะฒะฝะพะต ัะบะฐะทะฐะฝะธะต ะธะผะตะฝ ะดะปั ััะพะปะฑัะพะฒ
with tab2 (a, b) as (select col1, col2 from tab1 where ...)
select a, b from tab2;

ะก ะดะพะฑะฐะฒะปะตะฝะธะตะผ ะบะปััะตะฒะพะณะพ ัะปะพะฒะฐ recursive, with ะผะพะถะฝะพ ะธัะฟะพะปัะทะพะฒะฐัั ะดะปั ะทะฐะฟัะพัะพะฒ,
ยะณะดะต ััะตะฑัะตััั ะพะฟะตัะธัะพะฒะฐัั ัะฒัะทะฐะฝะฝัะผะธ ะดะฐะฝะฝัะผะธ.

-- ะะตะฝะตัะฐัะธั ะทะฝะฐัะตะฝะธะน
with recursive cnt(x) as (
ย values(1) union all select x + 1 from cnt where x < 1000
)
select x from cnt;

-- ะะฐัะพะถะดะตะฝะธั ะดะพัะตัะฝะธั ัะปะตะผะตะฝัะพะฒ ะธะปะธ ัะพะดะธัะตะปั ะฒ ัะฐะฑะปะธัะต ั ะธะตัะฐััะธะตะน
-- ะฃะทะปั ะฝะธะถะต ะฟะพ ะธะตัะฐััะธะธ
with recursive tc (id) as (
ยย ยselect id from tab1 where id = 10ยย ย
ยย ยunionย
ยย ยselect tab1.id from tab1, tc where tab1.parent_id = tc.id
)
select * from tc;

-- ะฃะทะตะปั ะฒะตััะฝะตะณะพ ััะพะฒะฝั ะดะปั ะฒัะฑัะฐะฝะฝัั ะดะพัะตัะฝะธั
with recursive tc (id, parent_id) as (
ยย ยselect id, parent_id from tab1 where id in (12, 21)
ยย ยunionย
ยย ยselect tc.parent_id, tab1.parent_idย
ยย ยfrom tab1, tc where tab1.id = tc.parent_id
)
select distinct id from tc where parent_id is null order by 1;

-- ะคะพัะผะธัะพะฒะฐะฝะธั ะพััััะฟะพะฒ ะฟัะธ ะฒัะฒะพะดะต, ะฝะฐะฟั. ะดะปั ััััะบัััั ะพัะดะตะปะพะฒ
create table org(name text primary key, boss text references org);
insert into org values ('Alice', null),ย
ย ('Bob', 'Alice'), ('Cindy', 'Alice'), ('Dave', 'Bob'),ย
ย ('Emma', 'Bob'), ('Fred', 'Cindy'), ('Gail', 'Cindy');

with recursive
ย under_alice (name, level) as (
ย ย values('Alice', 0)
ย ย union all
ย ย select org.name, under_alice.level + 1
ย ย ย from org join under_alice on org.boss = under_alice.name
ย ย ยorder by 2
ย )
select substr('..........', 1, level * 3) || name from under_alice;

ะ ะฒะตััะธะธ 3.35.0 ะฒะฒะตะดะตะฝะพ ะบะปััะตะฒะพะต ัะปะพะฒะพ MATERIALIZED,ย
ะฟัะธ ะบะพัะพัะพะผ ะฟะปะฐะฝะธัะพะฒัะธะบ ะดะปั ัะตะทัะปััะฐัะพะฒ CTE-ะทะฐะฟัะพัะฐ ัะพะทะดะฐัั ยซััะตะผะตัะฝััยป ัะฐะฑะปะธัั.
ยะะพ ัะผะพะปัะฐะฝะธั ะพะฝะพ ะตััั ะฒ ะทะฐะฟัะพัะต, ะธ ะดะปั ะพัะบะปััะตะฝะธั ัะฐะบะพะณะพ ะฟะพะฒะตะดะตะฝะธั ะฝะตะพะฑัะพะดะธะผะพ ะธัะฟะพะปัะทะพะฒะฐัั NOT MATERIALIZED.

with tab2 (a, b) as materialized (
ย ย select col1, col2 from tab1 where ...
)
select a, b from tab2;

ะะบะพะฝะฝัะต ััะฝะบัะธะธ (Window Functions)
ะก ะฒะตััะธะธ 3.25.0 ะฒ SQLite ะดะพัััะฟะฝั ะพะบะพะฝะฝัะต ััะฝะบัะธะธ,ย
ัะฐะบะถะต ะธะฝะพะณะดะฐ ะฝะฐะทัะฒะฐะตะผัะต ะฐะฝะฐะปะธัะธัะตัะบะธะผะธ, ะฟะพะทะฒะพะปัััะธะต ะฟัะพะฒะพะดะธัั ะฒััะธัะปะตะฝะธั ะฝะฐะด ัะฐัััั ะดะฐะฝะฝัั (ะพะบะฝะพะผ).

-- ะะพะผะตั ัััะพะบะธ ะฒ ัะตะทัะปััะฐัะต
create table tab1 (x integer primary key, y text);
insert into tab1 values (1, 'aaa'), (2, 'ccc'), (3, 'bbb');
select x, y, row_number() over (order by y) as row_number from tab1 order by x;

-- ะขะฐะฑะปะธัะฐ ะธัะฟะพะปัะทัะตััั ะดะปั ัะปะตะดัััะธั ะฟัะธะผะตัะพะฒ
create table tab1 (a integer primary key, b, c);
insert into tab1 values (1, 'A', 'one'),
ย (2, 'B', 'two'), (3, 'C', 'three'), (4, 'D', 'one'),ย
ย (5, 'E', 'two'), (6, 'F', 'three'), (7, 'G', 'one');

-- ะะพัััะฟ ะบ ะฟัะตะดัะดััะตะน ะธ ัะปะตะดัััะตะน ะทะฐะฟะธัะธ ะฒ ะพะบะฝะต
select a, b, group_concat(b, '.') over (order by a rows between 1 preceding and 1 following) as prev_curr_next from tab1;

-- ะะฝะฐัะตะฝะธั ะฒ ะพะบะฝะต (ะณััะฟะฟะต, ะพะฟัะตะดะตะปัะตะผะพะน ะบะพะปะพะฝะบะพะน c) ยะพั ัะตะบััะตะน ัััะพะบะธ ะดะพ ะบะพะฝัะฐ ะพะบะฝะฐ
select c, a, b, group_concat(b, '.') over (partition by c order by a range between current row and unbounded following) as curr_end from tab1 order by c, a;

-- ะัะพะฟััะบ ัััะพะบ ะฒ ะพะบะฝะต ะฟะพ ััะปะพะฒะธั
select c, a, b, group_concat(b, '.') filter (where c <> 'two') over (order by a) as exceptTwo from t1 order by a;

ะฃัะธะปะธัั SQLite -- ะะพะผะธะผะพ CLI sqlite3 ะดะพัััะฟะฝั ะตัะต ะดะฒะต ััะธะปะธัั.ย
ะะตัะฒะฐั โ sqldiff, ะฟะพะทะฒะพะปัะตั ััะฐะฒะฝะธะฒะฐัั ะฑะฐะทั (ะธะปะธ ะพัะดะตะปัะฝัั ัะฐะฑะปะธัั) ะฝะต ัะพะปัะบะพ ะฟะพ ััััะบัััะต, ะฝะพ ะธ ะฟะพ ะดะฐะฝะฝัะผ.ย
ะัะพัะฐั โ sqlite3_analizer ะธัะฟะพะปัะทัะตััั ะดะปั ะฒัะฒะพะดะฐ ะธะฝัะพัะผะฐัะธะธ ะพ ัะพะผ, ะบะฐะบ ัััะตะบัะธะฒะฝะพ ะธัะฟะพะปัะทัะตััั ะผะตััะพย
ัะฐะฑะปะธัะฐะผะธ ะธ ะธะฝะดะตะบัะฐะผะธ ะฒ ัะฐะนะปะต ะฑะฐะทั ะดะฐะฝะฝัั. ะะฝะฐะปะพะณะธัะฝัั ะธะฝัะพัะผะฐัะธั ะผะพะถะฝะพ ะฟะพะปััะธัั ะธะท ะฒะธัััะฐะปัะฝะพะนย
ัะฐะฑะปะธัั dbstat (ััะตะฑัะตั ัะปะฐะณ SQLITE_ENABLE_DBSTAT_VTAB ะฟัะธ ะบะพะผะฟะธะปััะธะธ SQLite).

ะก ะฒะตััะธะธ 3.22.0 CLI sqlite3 ัะพะดะตัะถะธั (ัะบัะฟะตัะธะผะตะฝัะฐะปัะฝัั) ะบะพะผะฐะฝะดั .expert, ะบะพัะพัะฐั ะผะพะถะตั ะฟะพะดัะบะฐะทะฐััย
ะบะฐะบะพะน ะธะฝะดะตะบั ััะพะธั ะดะพะฑะฐะฒะธัั ะดะปั ะฒะฒะพะดะธะผะพะณะพ ะทะฐะฟัะพัะฐ.

ะกะพะทะดะฐะฝะธะต ัะตะทะตัะฒะฝะพะน ะบะพะฟะธะธ Vacuum Into
ะก ะฒะตััะธะธ 3.27.0 ะบะพะผะฐะฝะดะฐ vacuum ัะฐััะธัะตะฝะฐ ะบะปััะตะฒัะผ ัะปะพะฒะพะผ into, ะฟะพะทะฒะพะปัััะธะผ ัะพะทะดะฐััย
ะบะพะฟะธั ะฑะฐะทั ะฑะตะท ะตั ะพััะฐะฝะพะฒะบะธ ะฟััะผะพ ะธะท SQL. ะฏะฒะปัะตััั ะฟัะพััะพะน ะฐะปััะตัะฝะฐัะธะฒะพะน Backup API.

vacuum into 'D:/backup/' || strftime('%Y-%m-%d', 'now') || '.sqlite';

ะคัะฝะบัะธั printf -- ะคัะฝะบัะธั ัะฒะปัะตััั ะฐะฝะฐะปะพะณะพะผ ะก-ััะฝะบัะธะธ. ะัะธ ััะพะผ NULL-ะทะฝะฐัะตะฝะธั ะธะฝัะตัะฟัะตัะธััััััย
ย ย ย ย ย ย ย ย-- ะบะฐะบ ะฟัััะฐั ัััะพะบะฐ ะดะปั %s ะธ 0 ะดะปั ะฟะปะตะนััะพะปะดะตัะฐ ัะธัะปะฐ.

select 'a' || ' 123 ' || null; --> null
select printf('%s %i %s', 'a', 123, null); --> 123 a
select printf('%s %i %i', 'a', 123, null); --> 123 a 0

ะะพััะตะถะธ ััะพะปะฑัะพะฒ (Row values)

delete from tab where (a, b) = (1, 2); -- ัะพ ะถะต ัะฐะผะพะต ััะพ a = 1 and b = 2
update tab set c = 3 where (a, b) = (1, 2);
update tab set c = 3 where (a, b) in (select c, d from tab2);
select * from tab where (year, month, day) between (2015, 9, 12) and (2016, 9, 12);

ะัะตะผั ะธ ะดะฐัะฐ -- ะ SQLite ะฝะตั ัะธะฟะพะฒ Date ะธ Time.ย
ย ย ย ย ย ย ย-- ะฅะพัั ะธ ะผะพะถะฝะพ ัะพะทะดะฐัั ัะฐะฑะปะธัั ั ะบะพะปะพะฝะบะฐะผะธ ัะฐะบะธั ัะธะฟะพะฒ, ััะพ ะฑัะดะตั ะฐะฝะฐะปะพะณะธัะฝะพ ัะพะทะดะฐะฝะธั ะบะพะปะพะฝะพะบย
ย ย ย ย ย ย ย-- ะฑะตะท ัะบะฐะทะฐะฝะธั ัะธะฟะฐ, ะฟะพััะพะผั ะดะฐะฝะฝัะต ะฒ ัะฐะบะธั ะบะพะปะพะฝะบะฐั ััะฐะฝัััั ะบะฐะบ ัะตะบัั.
ย ย ย ย ย ย -- ะญัะพ ัะดะพะฑะฝะพ ะฟัะธ ะฟัะพัะผะพััะต ะดะฐะฝะฝัั, ะพะดะฝะฐะบะพ ะธะผะตะตั ััะด ะฝะตะดะพััะฐัะบะพะฒ: ะฝะตัััะตะบัะธะฒะฝัะน ะฟะพะธัะบ,ย
ย ย ย ย ย ย -- ะตัะปะธ ะฝะตั ะธะฝะดะตะบัะฐ, ะดะฐะฝะฝัะต ะทะฐะฝะธะผะฐัั ะผะฝะพะณะพ ะผะตััะฐ, ะพัััััะฒัะตั ะฒัะตะผะตะฝะฝะฐั ะทะพะฝะฐ.
ย ย ย ย ย ย -- ะะปั ะธะทะฑะตะถะฐะฝะธั ััะพะณะพ ะผะพะถะฝะพ ััะฐะฝะธัั ะดะฐะฝะฝัะต ะบะฐะบ unix-ะฒัะตะผั, ั.ะต. ัะธัะปะพ ัะตะบัะฝะด, ะฟัะพัะตะดัะธั ั ะฟะพะปัะฝะพัะธ 01.01.1970.

select strftime('%Y-%m-%d %H:%M', 'now'); --> UTC ะฒัะตะผั
select strftime('%Y-%m-%d %H:%M', 'now', 'localtime'); --> ะผะตััะฝะพะต ะฒัะตะผั
select strftime('%s', 'now'); -- ัะตะบััะตะต Unix-ะฒัะตะผัย
select strftime('%s', 'now', '+2 day'); --> ัะตะบััะตะต unix-ะฒัะตะผั ะฟะปัั ะดะฒะฐ ะดะฝั
-- ะะพะฝะฒะตััะฐัะธั unix-ะฒัะตะผะตะฝะธ ะฒ ะปะพะบะฐะปัะฝะพะต ะดะปั ะฟะพะปัะทะพะฒะฐัะตะปั - 21-11-2020 15:25:14
select strftime('%d-%m-%Y %H:%M:%S', 1605961514, 'unixepoch', 'localtime')

Json
ะก ะฒะตััะธะธ 3.9.0 ะฒ SQLite ะผะพะถะฝะพ ัะฐะฑะพัะฐัั ั json (ััะตะฑัะตััั ะปะธะฑะพ ัะปะฐะณ SQLITE_ENABLE_JSON1 ะฟัะธ ะบะพะผะฟะธะปััะธะธ ะธะปะธ ะทะฐะณััะถะตะฝะฝะพะต ัะฐััะธัะตะฝะธะต).
ยะะฐะฝะฝัะต json ััะฐะฝัััั ะบะฐะบ ัะตะบัั. ะะตะทัะปััะฐั ััะฝะบัะธะน โ ัะฐะบะถะต ัะตะบัั.

select json_array(1, 2, 3); --> [1,2,3] (ัััะพะบะฐ)
select json_array_length(json_array(1, 2, 3)); --> 3
select json_array_length('[1,2,3]'); --> 3
select json_object('a', json_array(2, 5), 'b', 10); --> {"a":[2,5],"b":10} (ัััะพะบะฐ)
select json_extract('{"a":[2,5],"b":10}', '$.a[0]'); ย--> 2
select json_insert('{"a":[2,5]}', '$.c', 10); --> {"a":[2,5],"c":10} (ัััะพะบะฐ)
select value from json_each(json_array(2, 5)); --> 2 ัััะพะบะธ 2, 5
select json_group_array(value) from json_each(json_array(2, 5)); --> [2,5] (ัััะพะบะฐ)
ะ ะธัะฟะพะปัะทัั ะฒััะธัะปัะตะผัะต ะบะพะปะพะฝะบะธ ะธ ะธะฝะดะตะบัั ะฟะพ ะฝะธะผ, ััะธ ะทะฐะฟัะพัั ะผะพะถะฝะพ ััะบะพัะธัั.

ะะพะปะฝะพัะตะบััะพะฒัะน ะฟะพะธัะบ
ะะฐะบ ะธ json, ะฟะพะปะฝะพัะตะบััะพะฒัะน ะฟะพะธัะบ ััะตะฑัะตั ะทะฐะดะฐะฝะธั ัะปะฐะณะฐ SQLITE_ENABLE_FTS5 ะฟัะธ ะบะพะผะฟะธะปััะธะธ ะธะปะธ ะทะฐะณััะทะบะธ ัะฐััะธัะตะฝะธั.ย
ะะปั ัะฐะฑะพัั ั ะฟะพะธัะบะพะผ, ัะฟะตัะฒะฐ ัะพะทะดะฐะตััั ะฒะธัััะฐะปัะฝะฐั ัะฐะฑะปะธัะฐ ั ะธะฝะดะตะบัะธััะตะผัะผะธ ะฟะพะปัะผะธ,ย
ะฐ ะธ ะฟะพัะพะผ ััะดะฐ ะทะฐะณััะถะฐัััั ะดะฐะฝะฝัะต, ะธัะฟะพะปัะทัั ะพะฑััะฝัะน insert. ะกะปะตะดัะตั ะธะผะตัั ะฒ ะฒะธะดั, ััะพ ะดะปั ัะฒะพะตะน ัะฐะฑะพัั
ยัะฐััะธัะตะฝะธะต ัะพะทะดะฐะตั ะดะพะฟะพะปะฝะธัะตะปัะฝัะต ัะฐะฑะปะธัั ะธ ัะพะทะดะฐะฝะฝะฐั ะฒะธัััะฐะปัะฝะฐั ัะฐะฑะปะธัะฐ ะธัะฟะพะปัะทัะตั ะธั ะดะฐะฝะฝัะต.

create virtual table emails using fts5(sender, body);
SELECT * FROM emails WHERE emails = 'fts5'; -- sender ะธะปะธ body ัะพะดะตัะถะธั fts5

ะะฐััะธัะตะฝะธั
ะะพะทะผะพะถะฝะพััะธ SQLite ะผะพะณัั ะฑััั ะดะพะฑะฐะฒะปะตะฝั ัะตัะตะท ะทะฐะณััะถะฐะตะผัะต ะผะพะดัะปะธ. ะะตะบะพัะพััะต ะธะท ะฝะธั ัะถะต ะฑัะปะธ ัะฟะพะผัะฝััั ะฒััะต โ json1 ะธ fts.

ะะฐััะธัะตะฝะธั ะผะพะณัั ะธัะฟะพะปัะทะพะฒะฐัััั ะบะฐะบ ะดะปั ะดะพะฑะฐะฒะปะตะฝะธั ะฟะพะปัะทะพะฒะฐัะตะปััะบะธั ััะฝะบัะธะน
ย(ะฝะต ัะพะปัะบะพ ัะบะฐะปััะฝัั, ะบะฐะบ, ะฝะฐะฟัะธะผะตั, crc32, ะฝะพ ะธ ะฐะณัะตะณะธััััะธั ะธะปะธ ะดะฐะถะต ะพะบะพะฝะฝัั),ย
ยัะฐะบ ะธ ะฒะธัััะฐะปัะฝัั ัะฐะฑะปะธั. ะะธัััะฐะปัะฝัะต ัะฐะฑะปะธัั โ ััะพ ัะฐะฑะปะธัั, ะบะพัะพััะต ะฟัะธัััััะฒััั ะฒ ะฑะฐะทะต,ย
ยะฝะพ ะธั ะดะฐะฝะฝัะต ะพะฑัะฐะฑะฐััะฒะฐัััั ัะฐััะธัะตะฝะธะตะผ, ะฟัะธ ััะพะผ, ะฒ ะทะฐะฒะธัะธะผะพััะธ ะพั ัะตะฐะปะธะทะฐัะธะธ, ะฝะตะบะพัะพััะต ะธะท ะฝะธั ััะตะฑััั ัะพะทะดะฐะฝะธั

create virtual table temp.tab1 using csv(filename='thefile.csv');
select * from tab1;

ะััะณะธะต ะถะต, ัะฐะบ ะฝะฐะทัะฒะฐะตะผัะต table-valued, ะผะพะณัั ะธัะฟะพะปัะทะพะฒะฐัััั ััะฐะทั

select value from generate_series(5, 100, 5);
.
ะงะฐััั ะฒะธัััะฐะปัะฝัั ัะฐะฑะปะธั ะฟะตัะตัะธัะปะตะฝะฐ ะทะดะตัั.

ะะดะฝะพ ัะฐััะธัะตะฝะธะต ะผะพะถะตั ัะตะฐะปะธะทะพะฒะฐัั ะบะฐะบ ััะฝะบัะธะธ, ัะฐะบ ะธ ะฒะธัััะฐะปัะฝัะต ัะฐะฑะปะธัั.ย
ะะฐะฟัะธะผะตั, json1 ัะพะดะตัะถะธั 13 ัะบะฐะปััะฝัั ะธ 2 ะฐะณัะตะณะธััััะธะต ััะฝะบัะธะธ ะธย
ะดะฒะต ะฒะธัััะฐะปัะฝัะต ัะฐะฑะปะธัั json_each ะธ json_tree.
ยะงัะพะฑั ะฝะฐะฟะธัะฐัั ัะฒะพั ััะฝะบัะธั ะดะพััะฐัะพัะฝะพ ะธะผะตัั ะฑะฐะทะพะฒัะต ะทะฝะฐะฝะธั ะก ะธ ัะฐะทะพะฑัะฐัั
ย ะบะพะด ัะฐััะธัะตะฝะธะน ะธะท ัะตะฟะพะทะธัะฐัะธั SQLite. ะะตะฐะปะธะทะฐัะธั ัะฒะพะธั ะฒะธัััะฐะปัะฝััย
ย ัะฐะฑะปะธั ะฝะตัะบะพะปัะบะพ ัะปะพะถะฝะตะต (ะฒะธะดะธะผะพ ะฟะพััะพะผั ะธั ะผะฐะปะพ). ะขัั ะผะพะถะฝะพ ัะตะบะพะผะตะฝะดะพะฒะฐัั ะฝะต ัะธะปัะฝะพย
ย ัััะฐัะตะฒััั ะบะฝะธะณั Using SQLite by Jay A. Kreibich, ััะฐััั Michael Owens,
ย ยัะฐะฑะปะพะฝ ะธะท ัะตะฟะพะทะธัะฐัะธั ะธ ะบะพะด generate_series, ะบะฐะบ table-valued ััะฝะบัะธะธ.

ะะพะผะธะผะพ ััะพะณะพ, ัะฐััะธัะตะฝะธั ะผะพะณัั ัะตะฐะปะธะทะพะฒะฐัั ัะฟะตัะธัะธัะฝัะต ะดะปั ะพะฟะตัะฐัะธะพะฝะฝะพะน ัะธััะตะผั ะฒะตัะธ,ย
ัะฐะบะธะต ะบะฐะบ ัะฐะนะปะพะฒะฐั ัะธััะตะผะฐ, ะพะฑะตัะฟะตัะธะฒะฐััะธะต ะฟะพััะธััะตะผะพััั. ะะพะดัะพะฑะฝะพััะธ ะผะพะถะฝะพ ัะทะฝะฐัั ะทะดะตัั.

ะะฐะทะฝะพะต

ะัะฟะพะปัะทัะนัะต ' (ะพะดะธะฝะฐัะฝะฐั ะบะฐะฒััะบะฐ) ะดะปั ัััะพะบะพะฒัั ะบะพะฝััะฐะฝั ะธ " (ะดะฒะพะนะฝะฐั ะบะฐะฒััะบะฐ) ะดะปั ะธะผะตะฝ ััะพะปะฑัะพะฒ ะธ ัะฐะฑะปะธั.
ะงัะพะฑั ะฟะพะปััะธัั ะธะฝัะพัะผะฐัะธั ะฟะพ ัะฐะฑะปะธัะต tab1 ะผะพะถะฝะพ ะธัะฟะพะปัะทะพะฒะฐัั

-- ะ main ััะตะผะต
select * from pragma_table_info('tab1');
-- ะ temp ััะตะผะต ะธะปะธ ะฟะพะดะบะปััะตะฝะฝะพะน (attach) ะฑะฐะทะต
select * from pragma_table_info('tab1') where schema = 'temp'
ยย